
<!doctype html>
<html>
	<head>
		<meta charset="utf-8">

		<!-- Don't cache! -->
		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
		<meta http-equiv="Pragma" content="no-cache" />
		<meta http-equiv="Expires" content="0">

		<title>Amalgamation of Render Results - mmt-pygments-lexer</title>
	</head>
	<body>
		<h1>Amalgamation of Render Results</h1>
<style>pre { line-height: 125%; margin: 0; }
td.linenos pre { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }
span.linenos { color: #000000; background-color: #f0f0f0; padding-left: 5px; padding-right: 5px; }
td.linenos pre.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.hll { background-color: #ffffcc }
.c { color: #408080; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #008000; font-weight: bold } /* Keyword */
.-MMT_DD { color: #D3D3D3 } /* MMT_DD */
.-MMT_MD { color: #D3D3D3 } /* MMT_MD */
.-MMT_OD { color: #D3D3D3 } /* MMT_OD */
.o { color: #666666 } /* Operator */
.ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.cm { color: #408080; font-style: italic } /* Comment.Multiline */
.cp { color: #BC7A00 } /* Comment.Preproc */
.cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.c1 { color: #408080; font-style: italic } /* Comment.Single */
.cs { color: #408080; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.gr { color: #FF0000 } /* Generic.Error */
.gh { color: #000080; font-weight: bold } /* Generic.Heading */
.gi { color: #00A000 } /* Generic.Inserted */
.go { color: #888888 } /* Generic.Output */
.gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.gs { font-weight: bold } /* Generic.Strong */
.gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.gt { color: #0044DD } /* Generic.Traceback */
.kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.kt { color: #B00040 } /* Keyword.Type */
.m { color: #666666 } /* Literal.Number */
.s { color: #BA2121 } /* Literal.String */
.na { color: #7D9029 } /* Name.Attribute */
.nb { color: #008000 } /* Name.Builtin */
.nc { color: #0000FF; font-weight: bold } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #999999; font-weight: bold } /* Name.Entity */
.ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #A0A000 } /* Name.Label */
.nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.nt { color: #008000; font-weight: bold } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mb { color: #666666 } /* Literal.Number.Bin */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sa { color: #BA2121 } /* Literal.String.Affix */
.sb { color: #BA2121 } /* Literal.String.Backtick */
.sc { color: #BA2121 } /* Literal.String.Char */
.dl { color: #BA2121 } /* Literal.String.Delimiter */
.sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.s2 { color: #BA2121 } /* Literal.String.Double */
.se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.sh { color: #BA2121 } /* Literal.String.Heredoc */
.si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #BB6688 } /* Literal.String.Regex */
.s1 { color: #BA2121 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.fm { color: #0000FF } /* Name.Function.Magic */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.vm { color: #19177C } /* Name.Variable.Magic */
.il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/ALMANAC/Context-Graph</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Basic example of a Dung abstract argumentation framework interpreting theories as arguments and views as attacks ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">a</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">b</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">c</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">a_attacks_b</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?a</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?b</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">b_attacks_a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?b</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?a</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// view c_attacks_a : ?c → ?a =</span>

<span class="cm">❚</span><span class="w"></span>

<span class="cm">// Doing Semantics: For semantics, one would have to teach MMT to compute the different semantics </span>
<span class="cm">based on the views between theories. Alternativey, this could be done in the graph viewer.❚</span><span class="w"></span>

<span class="cm">// A larger example: ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">B</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">C</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">D</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">E</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">F</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">G</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">A_attacks_B</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?A</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?B</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">B_attacks_A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?B</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?A</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">G_attacks_F</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?G</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?F</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">E_attacks_F</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?E</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?F</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">view</span><span class="w"> </span><span class="nc">F_attacks_D</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?F</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?D</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">D_attacks_C</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?D</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?C</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">C_attacks_A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?C</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?A</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">C_attacks_B</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?C</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?B</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="cm">/T A little bit more. First a metatheory: ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TrueFalse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">prop</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">true</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="ss">T</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="ss">F</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">bot</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⊥</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">impl</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">implies</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">and</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">and</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">ded</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ (T and F implies ⊥) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>



<span class="kd">theory</span><span class="w"> </span><span class="nc">TND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">neg</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">¬</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">impl</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">implies</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">ded</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ded</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">bot</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⊥</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">LEM1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded {A:prop}(A implies (neg (neg A))) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">LEM2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded {A:prop}(neg (neg A) implies A) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="cm">/T Now the contentious propositions:❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">props</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TND </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">fact1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">fact2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">one</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TrueFalse </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">True</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">two</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TrueFalse </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">False</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ F </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">view</span><span class="w"> </span><span class="nc">one_attacks_two</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?one</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?two</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TrueFalse = ?TrueFalse </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T True = False</span>

<span class="cm">	</span>
<span class="cm">	/T The following line characterises the attack: one and two disagree allow to prove contradicting statements. Hence one attacks two on fact1 (or vice versa: these semantics for attack don&#39;t tell us enough yet to determine the correct direction of the arrow). Allowing a view to have this could e.g. involve a replacement of &quot;=&quot; by some contradiction operator. Note also the different between finding a view that yields a contradiction and proving that no non-contradictory view /theory-morphism is possible between the two theories.❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T supports_fact1 = attacks_fact1 ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Another semantics for attack based on includes, views and conflict theories❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">common_ground</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TND </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">X</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Y</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">conflict</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TND </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">C</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">A</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded C </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">B</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded (C implies ⊥) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>



<span class="kd">theory</span><span class="w"> </span><span class="nc">three</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TND </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">X</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Y</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">ass1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded X </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">ass2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded (X implies ¬Y) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">four</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TND </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Y</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">ass3</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded Y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">oneandthree</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?three </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?four </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">three_attacks_four</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?conflict</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?oneandthree</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TND = ?TND </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">C</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">X </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T A = ass1 ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T B = ded X implies ⊥ ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">A</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ass1 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/ALMANAC/JLogic/Context_Graph</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">found</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ABA</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">found:?NaturalDeduction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="vc">assumption</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|~</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-500</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">aid</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} |~ X ⟶ ⊦ X </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">aid</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Contrary</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?ABA</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">contrary</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">not</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">con</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Convenience</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?ABA</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Contrary </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="cm">/T some derivable rules for convenience:❙</span><span class="w"></span>
<span class="vc">or_elim</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} ⊦ (A ∨ B) ⟶ (⊦ A ⟶ ⊦ C) ⟶ (⊦ B ⟶ ⊦ C) ⟶ ⊦ C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">orel</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">double_negation_introduction</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ A ⟶ ⊦ (¬ ¬ A) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">NI</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">quantifier_exchange</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:𝒰 100, B: A ⟶ prop} (⊦ ¬ ∃ [x:A] B x) ⟶ (⊦ ∀ [x:A] ¬ B x) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">exch</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?Convenience</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Arg1</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">a1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ ¬ use Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Arg2</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">a2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ ¬ ∃[x] x better Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Kernel</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">w</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Assumption</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Kernel </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">con1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ w </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Defeater</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Kernel </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">con2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ con w </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">δ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Kernel</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">w</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">¬ use Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">φ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Assumption</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Arg1</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?δ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">con1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a1 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">ψ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Defeater</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Arg2</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?δ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">con2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NI (MP ax1 (aid a2)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/ALMANAC/JLogic/Context_Graph</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">found</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?Convenience</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Ordinary_Premise</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">op</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ¬ too_complicated Meta_Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Too_Complicated_Cond</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lexicon </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">comp</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">comp_ax</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ met comp  </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Too_Complicated_Rule</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Too_Complicated_Cond </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">too_complicated_proposition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">too_complicated comp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">too_complicated_rule</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ met comp ⇒ too_complicated_proposition</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">too_complicated_arg</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ too_complicated_proposition </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">MP (aid too_complicated_rule) comp_ax</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">its_complicated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Too_Complicated_Cond</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lexicon</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">comp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Meta_Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">comp_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ax2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Too_Complicated_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">too_complicated_app</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ met Meta_Tweety_example ⇒ too_complicated Meta_Tweety_example</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">too_complicated_met</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ too_complicated Meta_Tweety_example </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">MP (aid too_complicated_app) ax2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">met_is_complicated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Too_Complicated_Rule</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Too_Complicated_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?its_complicated</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">too_complicated_rule</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">too_complicated_app </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">too_complicated_arg</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">too_complicated_met </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Prop_complicated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Proposition</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">proposition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">too_complicated Meta_Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Pro_complicated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Pro</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Too_Complicated_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Prop_complicated </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">pro</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">too_complicated_met </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Con_complicated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Con</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Ordinary_Premise</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Prop_complicated </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">con</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">op </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Meta_is_Better_Cond</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lexicon </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">ex1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">ex2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">cond_normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ standard ex2 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">cond_met</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ met ex1</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Meta_is_Better_Rule</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Meta_is_Better_Cond </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">better_proposition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ex1 better ex2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">better_rule</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ met ex1 ∧ standard ex2 ⇒ better_proposition</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">better_arg</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ better_proposition </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">MP (aid better_rule) and_introduction cond_met cond_normal </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">its_better</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Meta_is_Better_Cond</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Ordinary_Premise</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lexicon</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">ex1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Meta_Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">ex2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">cond_met</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ax2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">cond_normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ax3 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Meta_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ordinary_Premise </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">met_Tweety_better_proposition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Meta_Tweety_example better Tweety_example</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">met_Tweety_better_rule</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ met Meta_Tweety_example ∧ standard Tweety_example ⇒ met_Tweety_better_proposition</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">better_arg</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ met_Tweety_better_proposition </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">MP (aid met_Tweety_better_rule) and_introduction ax2 ax3 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Dont_Use_Tweety_Example</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Meta_Pushout </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">no_Tweety</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ¬ use Tweety_example</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">conservatively_Dont_Use_Tweety</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Dont_Use_Tweety_Example</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Meta_Pushout</span><span class="w">  </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Meta_Pushout </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">no_Tweety</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">MP ax4 (existsI better_arg)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Default_Cond</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">Prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Default_Rule</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Default_Cond </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">default_proposition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">default</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ ¬ default_proposition </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Default_App_Knowledge_Base</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Default_Cond</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">Prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">∃[x] x better Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Def_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">Def_better</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|~ ¬ ∃[x] x better Tweety_example</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Pushout_Along_Default_App</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Default_Rule</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Def_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Default_App_Knowledge_Base </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Def_better </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Use_Tweety</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Def_Pushout </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">Tweety</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ use Tweety_example</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">conservatively_Use_Tweety</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Use_Tweety</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Def_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Def_Pushout </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">Tweety</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">MP ax1 (aid Def_better)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">undercut1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Kernel</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">w</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">met Meta_Tweety_example ∧ standard Tweety_example ⇒ Meta_Tweety_example better Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">undercut2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Assumption</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Meta_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?undercut1 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">con1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">met_Tweety_better_rule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">undercut3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Defeater</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Def_Pushout</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?undercut1 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">con2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">not_introduction [x](fals_introduction (MP x (and_introduction ax2 ax3)) forallE (exch aid Def_better) Meta_Tweety_example) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/ALMANAC/Context-Graph</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">found</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T How about a first-order-metatheory?❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">background_knowledge</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">found:?Logic </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">found:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">human</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">black</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">fetus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_person</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">has_rights</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_born</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_conceived</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_black</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_caucasian</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">human ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">def_fetus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ is_conceived fetus ∧ ¬ is_born fetus </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">def_black</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ is_conceived black ∧ ¬ is_caucasian black </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// theory attack =</span>
<span class="cm">	tag ❙</span>
<span class="cm">// ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">constitution_pro_choice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// person: ⊦ ∀[x] (is_person x ⇔ is_born x ∧ is_human x) ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x:human] (is_person x ⇒ is_born x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">                                                   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">constitution_pro_slavery</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// person: ⊦ ∀[x] is_person x ⇔ is_conceived x ∧ is_human x ∧ ¬ is_black x ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x:human] (is_person x ⇒ is_caucasian x)  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">constitution_pro_life</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x:human] (is_conceived x ⇒ is_person x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">constitution_pro_choice_attacks_constitution_pro_slavery</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?constitution_pro_slavery</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person ❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">constitution_pro_slavery_attacks_constitution_pro_choice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?constitution_pro_slavery</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack ❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person ❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">constitution_pro_life_attacks_constitution_pro_choice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?constitution_pro_life</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack ❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class="cm">/T person = person ❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">constitution_pro_life_attacks_constitution_pro_slavery</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?constitution_pro_life</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?constitution_pro_slavery</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack ❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person ❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">constitution_pro_slavery_attacks_constitution_pro_life</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?constitution_pro_slavery</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?constitution_pro_life</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack ❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person ❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">constitution_pro_choice_attacks_constitution_pro_life</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?constitution_pro_life</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack ❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person ❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">fourteenth_amendment</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ is_person black </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w">	</span>
<span class="w">	</span>
<span class="kd">view</span><span class="w"> </span><span class="nc">fourteenth_amendment_attacks_constitution_pro_slavery</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?fourteenth_amendment</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?constitution_pro_slavery</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack ❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person ❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">legal_common_ground</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">personhood_and_rights</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] ¬ is_person x ⇒ ¬ has_rights x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">dredd_scott_v_sanford</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?constitution_pro_slavery </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?legal_common_ground </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">blacks_have_no_rights</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦  ¬ has_rights black </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch </span>
<span class=" -MMT_ObjectExpression">									&quot;				</span>
<span class=" -MMT_ObjectExpression">								  background knowledge.def_black: Blacks are not caucasian. </span>
<span class=" -MMT_ObjectExpression">									constitution_pro_slavery.person: Whoever is not caucasian is not a person to the constitution. </span>
<span class=" -MMT_ObjectExpression">									Hence blacks are not persons to the constitution. </span>
<span class=" -MMT_ObjectExpression">									legal_common_ground.personhood_and_rights: If you&#39;re not a person then you have no rights. </span>
<span class=" -MMT_ObjectExpression">									Ergo blacks have no rights</span>
<span class=" -MMT_ObjectExpression">									&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">dredd_scott_v_sanford_attacks_constitution_pro_life</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?dredd_scott_v_sanford</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?constitution_pro_life</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">person </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">dredd_scott_v_sanford_attacks_constitution_pro_choice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?dredd_scott_v_sanford</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">person </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">fourteenth_amendment_superseds_dredd_scott_v_sanford</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?dredd_scott_v_sanford</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack ❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person ❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">view</span><span class="w"> </span><span class="nc">fourteenth_amendment_superseds_dredd_scott_v_sanford</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?fourteenth_amendment</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?dredd_scott_v_sanford</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack ❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person = person ❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// view constitution_pro_choice_attacks_dredd_scott_v_sanford : ?constitution_pro_choice → ?dredd_scott_v_sanford =</span>
<span class="cm">	include ?background_knowledge = ?background_knowledge ❙</span>
<span class="cm">	// tag ?attack ❙</span>
<span class="cm">	/T person1 = person1 ❙</span>
<span class="cm">	/T person2 = person2 ❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">roe_v_wade</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?constitution_pro_choice </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?legal_common_ground </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">fetusses_have_no_rights</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ¬ has_rights fetus </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch </span>
<span class=" -MMT_ObjectExpression">									&quot;				</span>
<span class=" -MMT_ObjectExpression">								  background knowledge.def_fetus: fetusses are not born. </span>
<span class=" -MMT_ObjectExpression">									constitution_pro_slavery.person: Whoever is not born is not a person to the constitution. </span>
<span class=" -MMT_ObjectExpression">									Hence fetusses are not persons to the constitution. </span>
<span class=" -MMT_ObjectExpression">									legal_common_ground.personhood_and_rights: If you&#39;re not a person then you have no rights. </span>
<span class=" -MMT_ObjectExpression">									Ergo fetusses have no rights</span>
<span class=" -MMT_ObjectExpression">									&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">view</span><span class="w"> </span><span class="nc">if_not_dredd_scott_v_sanford_then_not_roe_v_wade</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?dredd_scott_v_sanford</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?roe_v_wade</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">black</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">fetus </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">blacks_have_no_rights</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">fetusses_have_no_rights </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person1=person1 ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T person2=person2 ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">roe_v_wade_attacks_constitution_pro_life</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?roe_v_wade</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?constitution_pro_life</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?background_knowledge = ?background_knowledge </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// tag ?attack ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">person</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">person </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/ALMANAC/JLogic/Context_Graph</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">found</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">found:?NaturalDeduction</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Lexicon</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">example</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">Tweety_example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">Meta_Tweety_example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">have</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">use</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">standard</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">better_than</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example ⟶ example ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">better</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">met</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">/T should be meta but unfortunately meta is an mmt keyword, hence not usable.❙</span><span class="w"></span>
<span class="vc">too_complicated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">example ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>


<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Knowledge_Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lexicon </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ have Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">b</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ have Meta_Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">ax1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ (¬ ∃[x] x better Tweety_example) ⇒ use Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">ax2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ met Meta_Tweety_example</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">ax3</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ standard Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">ax4</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">⊦ (∃[x] x better Tweety_example) ⇒ ¬ use Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Use_Tweety</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">c</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ use Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Not_Tweety</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Knowledge_Base </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">d</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ¬ use Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// theory Joint_Inconsistency =</span>
<span class="cm">include ?Use_Tweety ❙</span>
<span class="cm">include ?Not_Tweety ❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Proposition</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">proposition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Pro</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proposition </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">pro</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ proposition </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Con</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proposition </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">con</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">⊦ ¬ proposition </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// view Contradiction : ?Conflict_Theory → ?Joint_Inconsistency =</span>
<span class="cm">conflict = fals_introduction c d ❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">prop_Tweety</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Proposition</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Lexicon</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="vc">proposition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">use Tweety_example </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">pro_Tweety</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Pro</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Joint_Inconsistency</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?prop_Tweety</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">pro</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">c </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">con_Tweety</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Con</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Joint_Inconsistency</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="kn">include</span><span class="w"> </span><span class="l l-URI">?prop_Tweety </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="vc">con</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">d </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQND</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveSet</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Set</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveMagma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveSet</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveSet/add</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveMagma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Commutative </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveMagma/add</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveIdempotent</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveMagma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Idempotent </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveMagma/add</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveSemigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveMagma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Semigroup </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveMagma/add</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveCommSemigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveSemigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveCommutative</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?CommSemigroup </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveSemigroup/add</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AdditiveCommutative/add</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T regular bands and views between them</span>
<span class="cm">mostly following the wikipedia page on Bands</span>

<span class="cm">Notes: </span>
<span class="cm">- some names that were not given on Wikipedia are made up</span>
<span class="cm">- most views do not actually use (all of) the Band properties</span>
<span class="cm">- LeftX and RightX are stronger than X, not weaker</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:/?LF</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Magma</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?EqualityType</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">carrier ⟶ carrier ⟶ carrier </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∘</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semigroup</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} (x∘y)∘z = x∘(y∘z)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">assocR</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} x∘(y∘z) = (x∘y)∘z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] sym assoc</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">assoc4</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{w,x,y,z} ((w∘x)∘y)∘z = w∘(x∘(y∘z))</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[w,x,y,z] trans3 (assoc congT [u]u∘z) assoc (assoc congT [u]w∘u)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc4R</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,x,y,z} w∘(x∘(y∘z)) = ((w∘x)∘y)∘z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w,x,y,z] sym assoc4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc5</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v,w,x,y,z} (((v∘w)∘x)∘y)∘z = v∘(w∘(x∘(y∘z)))</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w,x,y,z] trans4 (assoc4 congT [u]u∘z) assoc</span>
<span class=" -MMT_ObjectExpression">                              (assoc congT [u]v∘u) (assoc congT [u]v∘(w∘u))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Commutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x∘y = y∘x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Neutral</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">e</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">carrier </span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">  </span><span class="vc">neutLeft</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} e∘x = x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} x∘e = x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Idempotent</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">idempotent</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} x∘x = x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Neutral</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommSemigroup</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Commutative</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Band</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Idempotent</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommSemigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommSemigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BoundedSemilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommMonoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Regular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">regular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} z∘x∘z∘y∘z = z∘x∘y∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} z∘x∘z∘y = z∘x∘y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,z} z∘x∘z = z∘x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightregular1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} x∘z∘y∘z = x∘y∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightregular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{y,z} z∘y∘z = y∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T views for the three stages of regular band theories ❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Regular2LeftNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] leftregular1 congT [u]u∘z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2LeftRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] leftregular congT [u]u∘y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Regular2RightNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc5 ((trans3 assoc4R rightregular1 assoc) congT [u]z∘u) assoc4R</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2RightRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc4 ((trans assocR rightregular) congT [u] x∘u) assocR</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T normal bands ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">normal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} z∘(x∘y)∘z = z∘(y∘x)∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftnormal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} z∘(x∘y) = z∘(y∘x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightnormal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} (x∘y)∘z = (y∘x)∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T views for the diamond of normal band theories (with semilattices at the bottom) ❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Normal2RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] leftnormal congT [u]u∘z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Normal2LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc (rightnormal congT [u]z∘u) assocR</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">RightCommutative2Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] comm congT [u]z∘u</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftCommutative2Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] comm congT [u]u∘z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T views from regular to normal band theories ❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// zxzy = zxzyzxzy = zx yz zxzy = zxy zx zy = zxy xz zy = zxy zxy = zxy❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 (sym idempotent) _ idempotent</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftRegular2RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftRegular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftregular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,z] trans4 assoc leftnormal assocR (idempotent congT [u]u∘x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// xzyz = xzyz xzyz = x yz zxzyz = xy zxzyz = xyz zx yz = xyz xyz = xyz❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 (sym idempotent) _ idempotent</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightRegular2LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightRegular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[y,z] trans3 rightnormal assoc (idempotent congT [u]y∘u)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T rectangular bands (the axioms here already imply idempotency)❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rectangular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rectangular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x∘y∘x = x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// provable ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rectangularAny</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} x∘y∘z = x∘z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftZero</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftsingular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x∘y = x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightZero</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightsingular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x∘y = y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T regular bands and views between them</span>
<span class="cm">mostly following the wikipedia page on Bands</span>

<span class="cm">Notes: </span>
<span class="cm">- some names that were not given on Wikipedia are made up</span>
<span class="cm">- most views do not actually use (all of) the Band properties</span>
<span class="cm">- LeftX and RightX are stronger than X, not weaker</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQND</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Regular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">regular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ z∘x∘z∘y∘z ≐ z∘x∘y∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ z∘x∘z∘y ≐ z∘x∘y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,z} ⊦ z∘x∘z ≐ z∘x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightregular1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ x∘z∘y∘z ≐ x∘y∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightregular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{y,z} ⊦ z∘y∘z ≐ y∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T views for the three stages of regular band theories ❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Regular2LeftNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] leftregular1 congT [u]u∘z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2LeftRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] leftregular congT [u]u∘y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Regular2RightNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc5 ((trans3 assoc4R rightregular1 assoc) congT [u]z∘u) assoc4R</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2RightRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc4 ((assocR trans rightregular) congT [u] x∘u) assocR</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T normal bands ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">normal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ z∘(x∘y)∘z ≐ z∘(y∘x)∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftnormal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ z∘(x∘y) ≐ z∘(y∘x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightnormal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ (x∘y)∘z ≐ (y∘x)∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T views for the diamond of normal band theories (with semilattices at the bottom) ❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Normal2RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] leftnormal congT [u]u∘z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Normal2LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc (rightnormal congT [u]z∘u) assocR</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">RightCommutative2Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] comm congT [u]z∘u</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftCommutative2Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] comm congT [u]u∘z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T views from regular to normal band theories ❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// zxzy = zxzyzxzy = zx yz zxzy = zxy zx zy = zxy xz zy = zxy zxy = zxy❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 (idem sym) _ idem</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftRegular2RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftRegular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftregular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,z] trans4 assoc leftnormal assocR (idem congT [u]u∘x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// xzyz = xzyz xzyz = x yz zxzyz = xy zxzyz = xyz zx yz = xyz xyz = xyz❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 (idem sym) _ idem</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightRegular2LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightRegular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[y,z] trans3 rightnormal assoc (idem congT [u]y∘u)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T rectangular bands (the axioms here already imply idempotency)❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rectangular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rectangular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x∘y∘x ≐ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// provable ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rectangularAny</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ x∘y∘z ≐ x∘z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftZero</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftzero</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x∘y ≐ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightZero</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightzero</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x∘y ≐ y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">powertypes?PowerSFOL</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GeneratedSets</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">generated</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">latin:/?ClosureOperator </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="vc">X</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">universe</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">closure</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⟨</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⟩</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GeneratedMagmas</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GeneratedSets</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">closure_op</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} ⊦ ∀[x]∀[y] x∈⟨S⟩ ⇒ y∈⟨S⟩ ⇒ (x∘y)∈⟨S⟩</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GeneratedPointed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Pointed</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GeneratedMagmas</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">closure_elem</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} ⊦ e∈⟨S⟩</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GeneratedInverseFun</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InverseFun</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GeneratedPointed</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">closure_inv</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} ⊦ ∀[x] x∈⟨S⟩ ⇒ x⁻∈⟨S⟩</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQ</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Quasigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">div_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] ∀[y] ∃[a] (a∘x ≐ y) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">div_right</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] ∀[y] ∃[b] (x∘b ≐ y) </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Loop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Quasigroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InverseOperator</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⁻</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">is_weak_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] x∘y∘x ≐ x ∧ y∘x∘y ≐ y</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T weaker variant of unique inverse element, formulated without neutral element</span>
<span class="cm">   usually union of X and WeakInverse usually called InverseX in the literature❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">WeakInverse</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InverseOperator</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">weak_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] is_weak_inverse x (x⁻)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InverseFun</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InverseOperator</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">inverseLeft</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] x⁻∘x ≐ e</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inverseRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] x∘x⁻ ≐ e</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">div</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ U</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y]x∘y⁻</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">invL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x⁻∘x≐e</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] inverseLeft forallE x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">invR</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x∘x⁻≐e</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] inverseRight forallE x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inverse_inv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ inverse x (x⁻)</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] andI invR invL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inv_unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ e⁻≐e</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">inverse_unique inverse_inv inverse_neutral</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inv_op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ (x∘y)⁻ ≐ y⁻∘x⁻</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] inverse_unique inverse_inv (inverse_op inverse_inv inverse_inv)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InverseExistence</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inverseLeft</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∃[i] i∘x ≐ e </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inverseRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∃[i] x∘i ≐ e </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Group</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InverseFun </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommGroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Group</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommMonoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GroupHom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MagmaHom </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">domain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Group </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">U</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">domain/U </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">codoamin</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Group </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="vc">U</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">codomain/U </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="cm">// e: ⊦ U domain/e ≐ codomain/e ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQND</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Magma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∘</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">divisibility</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Relation </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,z] ∃[y]x∘y≐z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MagmaHom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetHom </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">domain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetHom/domain</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">codomain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetHom/codomain</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∀[y] U (x domain/∘ y) ≐ U x codomain/∘ U y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubMagma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubSet</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">parent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubSet/parent</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∀[y] U x ⇒ U y ⇒ U (x parent/∘ y)  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Commutative</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comm_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∀[y] x∘y ≐ y∘x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x∘y ≐ y∘x</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] comm_ax forallE x forallE y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">OppositeMagma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">universe </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">U</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, y] y ∘ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Idempotent</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">idem_ax</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] x∘x ≐ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">idem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x∘x≐x</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] idem_ax forallE x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">OppositeCommMagma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Commutative</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Commutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OppositeMagma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">op </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comm_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">comm_ax </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerAssociative</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">power_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] (x∘x)∘x ≐ x∘(x∘x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∀[y]∀[z] (x∘y)∘z ≐ x∘(y∘z)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ (x∘y)∘z ≐ x∘(y∘z)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] assoc_ax forallE x forallE y forallE z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assocR</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ x∘(y∘z) ≐ (x∘y)∘z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] assoc sym</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc4</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{w,x,y,z} ⊦ ((w∘x)∘y)∘z ≐ w∘(x∘(y∘z))</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[w,x,y,z] trans3 (assoc congT [u]u∘z) assoc (assoc congT [u]w∘u)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc4R</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,x,y,z} ⊦ w∘(x∘(y∘z)) ≐ ((w∘x)∘y)∘z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w,x,y,z] assoc4 sym</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc5</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v,w,x,y,z} ⊦ (((v∘w)∘x)∘y)∘z ≐ v∘(w∘(x∘(y∘z)))</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w,x,y,z] trans4 (assoc4 congT [u]u∘z) assoc</span>
<span class=" -MMT_ObjectExpression">                             (assoc congT [u]v∘u) (assoc congT [u]v∘(w∘u))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?PowerAssociative</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">power_assoc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">forallI [x] assoc</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">//  total structure divisibility : ?Transitivity =</span>
<span class="cm">    include ?Magma/divisibility❙</span><span class="w"></span>
<span class="cm">//    metarel/trans = [x,y,z,p,q] p existsE [xy,xyP] q existsE [yz,yzP]</span>
<span class="cm">      existsI (xy ∘ yz) trans3 assocR (xyP congT [u]u∘yz) yzP❙</span><span class="w"></span>
<span class="cm">//  ❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">OppositeSemigroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OppositeMagma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">op </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">assoc_ax</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommSemigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Commutative </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Band</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Idempotent </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommIdempotent</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Idempotent</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Commutative</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommSemigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommIdempotent</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Pointed</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">elem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UnitElement</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">unitelem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Pointed </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">elem</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">e</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">involution</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] x∘x≐e</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightUnital</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UnitElement</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutralR</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] x∘e ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutR</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x∘e≐x</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] neutralR forallE x</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftUnital</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UnitElement</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutralL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] e∘x ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutL</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ e∘x≐x</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] neutralL forallE x</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Unital</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeftUnital </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RightUnital </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AbsorbingElement</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">absorbingelem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Pointed </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">elem</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">abs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightAbsorptive</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AbsorbingElement</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">absorbR</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] x∘abs ≐ abs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">absR</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x∘abs ≐ abs</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] absorbR forallE x</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftAbsorptive</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AbsorbingElement</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">absorbL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] abs∘x ≐ abs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">absL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ abs∘x ≐ abs</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] absorbL forallE x</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Absorptive</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeftAbsorptive</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RightAbsorptive</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FirstNonNeutral</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">firstNonNeutral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] x≠e ⇒ ∀[y]x∘y≐x</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">  </span><span class="cm">// realize ?Monoid❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LastNonNeutral</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lastNonNeutral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] x≠e ⇒ ∀[y]x∘y≐x</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">  </span><span class="cm">// realize ?Monoid❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Powers</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerAssociative</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?Nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">power</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ ℕ ⟶ U</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">power_zero</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x^0 ≐ e</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">power_succ</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,n} ⊦ x^(n&#39;) ≐ x^n∘x</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,xˈ] x∘xˈ≐e ∧ xˈ∘x≐e</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">inverse</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">inverse_sym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,xˈ} ⊦ inverse x xˈ ⟶ ⊦ inverse xˈ x</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,xˈ,p] andI (p andEr) (p andEl)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inverse_unique</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,x1,x2} ⊦ inverse x x1 ⟶ ⊦ inverse x x2 ⟶ ⊦ x1≐x2</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,x1,x2,p,q] trans3</span>
<span class=" -MMT_ObjectExpression">                   ((neutR sym) trans (q andEl sym congT [u]x1∘u))</span>
<span class=" -MMT_ObjectExpression">                   assocR</span>
<span class=" -MMT_ObjectExpression">                   ((p andEr congT [u]u∘x2) trans neutL)</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">inverse_neutral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ inverse e e</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">andI neutL neutL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inverse_op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,xˈ,yˈ} ⊦ inverse x xˈ ⟶ ⊦ inverse y yˈ ⟶ ⊦ inverse (x∘y) (yˈ∘xˈ)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">             </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,xˈ,yˈ,p,q] andI</span>
<span class=" -MMT_ObjectExpression">             (trans3 assoc ((trans3 assocR (q andEl congT [u]u∘xˈ) neutL) congT [u]x∘u) (p andEl))</span>
<span class=" -MMT_ObjectExpression">             (trans3 assoc ((trans3 assocR (p andEr congT [u]u∘y) neutL) congT [u]yˈ∘u) (q andEr))</span>
<span class=" -MMT_ObjectExpression">             </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">involution_inverse</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ involution x ⇔ inverse x x</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">             </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] equivI ([p] andI p p) ([p] p andEl)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Involutory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">involutory</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ involution x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inverse_refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ inverse x x</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">               </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] involution_inverse equivEl involutory</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inverse_ident</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ inverse x y ⟶ ⊦ x≐y</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,p] inverse_unique inverse_refl p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IdempotentMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommSemigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BoundedSemilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semilattice </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommMonoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/powertypes?PowerSFOL</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftModule</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommGroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">left_scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Ring </span><span class="p">=</span><span class="w"></span>
<span class="w">	  </span><span class="vc">U</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">S</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="vc">left_scalar_mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">S ⟶ U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∗</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">left_identity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[a:U] one ∗ a ≐ a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">left_distrib_ring</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[r: S] ∀[s: S] ∀[a : U] (r + s) ∗ a ≐ add (r ∗ a) (s ∗ a) </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">left_distrib_module</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[r: S] ∀[a: U] ∀[b: U] r ∗ (add a b) ≐ add (r ∗ a) (r ∗ b) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">left_assoc_ring</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[r: S] ∀[s: S] ∀[a: U] r ∗ (s ∗ a) ≐ (r ⋅ s) ∗ a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightModule</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommGroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">right_scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Ring </span><span class="p">=</span><span class="w"></span>
<span class="w">	  </span><span class="vc">U</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">S</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="vc">right_scalar_mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ S ⟶ U </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∗</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">right_identity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[a:U] a ∗ one ≐ a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">right_distrib_ring</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[r: S] ∀[s: S] ∀[a : U] a ∗ (r + s) ≐ add (a ∗ r) (a ∗ s) </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">right_distrib_module</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[r: S] ∀[a: U] ∀[b: U] (add a b) ∗ r ≐ add (a ∗ r) (b ∗ r) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">right_assoc_ring</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[r: S] ∀[s: S] ∀[a: U] (a ∗ s) ∗ r ≐ a ∗ (s ⋅ r) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BiModule</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeftModule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RightModule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">VectorSpace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeftModule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?DivisionRing </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeftModule/left_scalars </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQND</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Relation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">metarel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">latin:/?Relation </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">carrier</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] ⊦ x $ y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Reflexivity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">metarel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">latin:/?Reflexivity </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation/metarel</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symmetry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">metarel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">latin:/?Symmetry </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation/metarel</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Transitivity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">metarel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">latin:/?Transitivity </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation/metarel</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Preorder</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Reflexivity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Transitivity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceRelation</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Preorder</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symmetry</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AntiSymmetry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">antisym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x$y ⟶ ⊦ y$x ⟶ ⊦ x≐y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Order</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Preorder</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AntiSymmetry</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQ</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BiMagma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Set </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">universe </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">U</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">universe </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">U</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⋅</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Ringoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMagma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">left_distrib</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[r]∀[x]∀[y] r⋅(x+y) ≐ r⋅x + r⋅y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">right_distrib</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[r]∀[x]∀[y] (x+y)⋅r ≐ x⋅r + y⋅r </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommRingoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ringoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?CommSemigroup </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMagma/mult </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MonoidalRingoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ringoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Monoid </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMagma?add</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">elem</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">zero</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BiMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MonoidalRingoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Monoid </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMagma?mult</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">elem</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">one</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NonZeroInvertible</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMonoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">multinverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] ¬x≐zero ⇒ ∃[y] mult/inverse x y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NoZeroDividers</span><span class="w"> </span><span class="p">=</span><span class="w">  </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMonoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">no_zero_div</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∀[y] (x⋅y ≐ zero) ⇒ ((x ≐ zero) ∨ (y ≐ zero)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NonTrivial</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMonoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neq01</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ¬(zero ≐ one)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semiring</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMonoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?CommMonoid </span><span class="p">=</span><span class="w">                                                                   </span>
<span class="w">	  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MonoidalRingoid/add </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommSemiring</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semiring </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommRingoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NearRing</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMonoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Group </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MonoidalRingoid/add </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">inv</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">45</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">div</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommNearRing</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NearRing </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommRingoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Ring</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NearRing</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// realize ?Semiring❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?CommGroup </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NearRing/add </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BooleanRing</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?IdempotentMonoid </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BiMonoid/mult</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CommRing</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommRingoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IntegralDomain</span><span class="w"> </span><span class="p">=</span><span class="w">  </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommRing </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NoZeroDividers</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SkewField</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NonZeroInvertible</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NonTrivial</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Field</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SkewField </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CommRingoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BilinearRingoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ringoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">f</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ U </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bilinear</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∀[y]∀[z] (f (x+y) z) ≐ (f x z) + (f y z) ∧ (f x (y+z)) ≐ (f x y) + (f y z) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">homogen</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[r]∀[x]∀[y] f (r⋅x) y ≐ r⋅ (f x y) ∧ f x (r⋅y) ≐ r⋅(f x y) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LieRing</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BilinearRingoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">bracket</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">f </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⟨</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="si">2</span><span class="w"> </span><span class="ss">⟩</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">bracket_defn</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∀[y] ⟨x y⟩ ≐ x⋅y - y⋅x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">jacobi</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∀[y]∀[z] ⟨x ⟨y z⟩⟩ + ⟨y ⟨z x⟩⟩ + ⟨z ⟨x y⟩⟩ ≐ zero </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">alternating</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x] ⟨x x⟩ ≐ zero </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/algebraic</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQND</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Set</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">U</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm universe</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetHom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kd">structure</span><span class="w"> </span><span class="nc">domain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Set</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span><span class="kd">structure</span><span class="w"> </span><span class="nc">codomain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Set</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span><span class="vc">U</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">domain/U ⟶ codomain/U </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubSet</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">parent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Set </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">U</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">P</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">P ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">PropositionsAsTypes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TypesAsPropositionsAs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Propositions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Proofs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inconsistent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} ⊦ a</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">↯</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inconsistentE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">inconsistent ⟶ {a} ⊦ a</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p,a] p a</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">inconE</span><span class="w"> </span><span class="si">%I2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Terms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">term</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Types</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Kinds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">kd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">of</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ tp ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⦂</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">KindedTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Kinds</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kd ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">tf</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tpk</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kd</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tf tpk</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UntypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w">         </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalPropositions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalPropositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∈</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">of</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">in</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">typesAsPredicates</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SoftTypedTerms </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">of</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,A] A X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Equality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≐</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EqualityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x ≐ x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">congP</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x ≐ y ⟶ {P: term ⟶ prop} ⊦ P x ⟶ ⊦ P y</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">congP</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">eq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EquivalenceCongruence </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">carrier</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] ⊦ x≐y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">refl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] refl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">sym</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,p] p congP ([u]u≐x) refl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">trans</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z,p,q] q congP ([u]x≐u) p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">congT</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,p,T] p congP ([u] T x ≐ T u) refl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedEqualityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EqualityND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A ⟶ tm A ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≐</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedEqualityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x: tm A} ⊦ x ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">congP</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,  x,y} ⊦ x ≐ y ⟶ {P: tm A ⟶ prop} ⊦ P x ⟶ ⊦ P y</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">congP</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">congT</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,x,y} ⊦ x ≐ y ⟶ {T: tm A ⟶ tm B} ⊦ T x  ≐  T y </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">congT</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,x,y,p,T] p congP ([u] T x ≐ T u) refl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">sym</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, x,y: tm A} ⊦ x ≐ y ⟶ ⊦ y ≐ x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">sym</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y,p] p congP ([u]u≐x) refl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, x,y,z: tm A} ⊦ x ≐ y ⟶ ⊦ y ≐ z ⟶ ⊦ x ≐ z</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">trans</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y,z,p,q] q congP ([u]x≐u) p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, w,x,y,z: tm A} ⊦ w ≐ x ⟶ ⊦ x ≐ y ⟶ ⊦ y ≐ z ⟶ ⊦ w ≐ z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, w,x,y,z,p,q,r] p trans q trans r</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans4</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, v,w,x,y,z: tm A} ⊦ v ≐ w ⟶ ⊦ w ≐ x ⟶ ⊦ x ≐ y ⟶ ⊦ y ≐ z ⟶ ⊦ v ≐ z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, v,w,x,y,z,p,q,r,s] p trans q trans r trans s</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OneTyped</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">carrier</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Relation</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OneTyped</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">carrier ⟶ carrier ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Reflexivity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} x$x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symmetry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x$y ⟶ y$x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Transitivity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} x$y ⟶ y$z ⟶ x$z</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans3</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,x,y,z} w$x ⟶ x$y ⟶ y$z ⟶ w$z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w,x,y,z,p,q,r] p trans q trans r</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans4</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v,w,x,y,z} v$w ⟶ w$x ⟶ x$y ⟶ y$z ⟶ v$z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w,x,y,z,p,q,r,s] trans3 (p trans q) r s</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Preorder</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Reflexivity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Transitivity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceRelation</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Preorder</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symmetry</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Congruence</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">congT</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x$y ⟶ {T: carrier ⟶ carrier} T x $ T y </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">congT</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceCongruence</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceRelation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Congruence</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Equality is an equivalence-congruence.</span>
<span class="cm">   But semantic equality is even stronger: it allows substitution in objects of any type so that equal objects can never be distinguished.</span>
<span class="cm">   This is different from the syntactic equality used inside a logic, where equal objets cannot be distinguished by logical formulas but might be distinguishable by other judgments.❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SemanticEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceRelation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x$y ⟶ {A: carrier ⟶ type} A x ⟶ A y</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">cong</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// realizes Congruence❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">congT</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x$y ⟶ {T: carrier ⟶ carrier} T x $ T y </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">congT</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,p,T] p cong ([u]T x $ T u) refl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EqualityType</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OneTyped</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">equalityRel</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EquivalenceRelation </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OneTyped</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">refl</span><span class="w"> </span><span class="p">@</span><span class="no"> refl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">sym</span><span class="w"> </span><span class="p">@</span><span class="no"> sym</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">trans</span><span class="w"> </span><span class="p">@</span><span class="no"> trans</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">trans3</span><span class="w"> </span><span class="p">@</span><span class="no"> trans3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">trans4</span><span class="w"> </span><span class="p">@</span><span class="no"> trans4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AntiSymmetry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EqualityType</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">antisym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} x$y ⟶ y$x ⟶ x = y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Order</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Preorder</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AntiSymmetry</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Subtyping</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">subtype</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⪽</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">subtype_preorder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Preorder </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">carrier</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] ⊦ A⪽B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubtypeInjections</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subtyping</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inject</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ⪽ B ⟶ tm A ⟶ tm B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">↑</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inject_refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x: tm A} ⊦ x ↑ subtype_preorder/refl ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inject_trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,x: tm A,P:⊦A⪽B, Q:⊦B⪽C} ⊦ x↑(P subtype_preorder/trans Q) ≐ (x↑P)↑Q</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQ</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Booleans</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">tt</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ff</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">if</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} tm bool ⟶ tm S ⟶ tm S ⟶ tm S</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">if</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">then</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">else</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">bool_tnd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[b] b≐tt ∨ b≐ff</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool_nontrivial</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ¬ tt≐ff</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">if_tt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,x,y:tm s} ⊦ if tt then x else y ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">if_ff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,x,y:tm s} ⊦ if ff then x else y ≐ y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T A formalization of Discourse Representation Theory (Hans Kamp \cite{Kamp:atotas81}; </span>
<span class="cm">  see also \cite{KamRey:acffodrs96}).</span>
<span class="cm">  This formalization is patterned after https://kwarc.info/people/mkohlhase/papers/dlc00.pdf</span>
<span class="cm">  only that we restrict ourselves to the first-order case. </span>
<span class="cm">  We give DRSes and Conditions a mode (in the type), where modes record the binding </span>
<span class="cm">  and bindable (i.e. free) discourse referents. </span>
<span class="cm">  In particular, the modes allow us to predict binding potentials; just see the positive </span>
<span class="cm">  referents in the mode. </span>
<span class="cm">  The modes have special computation rules here, so that they are normalized correctly.</span>
<span class="cm">❚</span><span class="w"></span>
<span class="w">  </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DRT</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">dr</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">//Discourse Referents ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mode</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w">  </span><span class="cm">//DLC modes, they annotate the dynamic status of DRs ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pos</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dr ⟶ mode</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⁺</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neg</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dr ⟶ mode</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⁻</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∅</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">punion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode ⟶ mode ⟶ mode</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⊎</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">mequal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode ⟶ mode ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≐</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} x ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// bounded semi-lattice❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">capture</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} x⁺⊎x⁻ ≐ pos x</span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">//specifying DR capture ❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">☞scala://modes.drt.latin2?NormalizePunion</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">close</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode ⟶ mode</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">↓</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">close_pos</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} x⁺↓ ≐ ∅</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">close_neg</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} x⁻↓ ≐ x⁻</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">close_empty</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">∅↓ ≐ ∅</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">close_close</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x}x↓↓ ≐ x↓</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// normal form of modes: set of DR with function into boolean❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">drs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">#</span><span class="w"> </span><span class="ss">o</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// type of DRSes ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// type of terms ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cond</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">cond</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// type of conditions ❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T DRSs❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">atomic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} cond n ⟶ drs (m⊎n)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w">  </span><span class="cm">// m is just set of drs, all mapped with pos in the return type❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">merge</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} drs m ⟶ drs n ⟶ drs(m⊎n) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⊗</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">seqmerge</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} drs m ⟶ drs n ⟶ drs (m ⊎ n↓) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">;;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span>
<span class="w">  </span><span class="cm">/T conditions❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} cond m ⟶ cond n ⟶ cond m⊎n</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">∧</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dneg</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m} drs m ⟶ cond m↓</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">¬*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dimpl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} drs m ⟶ drs n ⟶ cond (m⊎n↓)↓ </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">⇒*</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"> </span>

<span class="w">  </span><span class="cm">/T terms❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">idref</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{i:dr} tm i⁻</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">`</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DRT</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T example for a predicate❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">farmer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m} tm m ⟶ cond m</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">donkey</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m} tm m ⟶ cond m</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">stick</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m} tm m ⟶ cond m</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">beat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{l,m,n} tm l ⟶ tm m ⟶ tm n ⟶ cond l⊎m⊎n</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">own</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} tm m ⟶ tm n ⟶ cond m⊎n</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">u</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dr</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">v</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dr</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">w</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dr</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">uv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mode</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">u⁺ ⊎ v⁺</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T A farmer owns a donkey ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fod</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">uv | farmer`u ∧ donkey`v ∧ own(`u)`v</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T He beats it with a stick ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fbds</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">w⁺ | stick`w ∧ beat(`u)(`v)`w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the iconic DRT example: If a farmer owns a donkey, he beats it with a stick ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">donkey_sentence</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">drs ∅</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">∅ | fod ⇒* fbds</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Dynamic Logic is a Multi-Modal Logic originally introduced by</span>
<span class="cm">  Vaugham Pratt in 1996 for reasoning about imperative programs</span>
<span class="cm">  and later extended to more general uses in linguistics and philosophy.</span>
<span class="cm">  See https://en.wikipedia.org/wiki/Dynamic_logic_(modal_logic) for details.</span>
<span class="cm">  </span>
<span class="cm">  Dynamic Logic comes with a very simple non-deterministic programming</span>
<span class="cm">  language Π that only features composition, distribution, iteration, test, and assignment.</span>
<span class="cm">  </span>
<span class="cm">  The main idea is to have a modality for every program α and proposition A:prop</span>
<span class="cm">  - ⟬α⟭A means that &quot;if α terminates, then $A$ holds afterwards&quot;</span>
<span class="cm">  - ⦉α⦊A means that &quot;α terminates and $A$ holds afterwards&quot;.</span>
<span class="cm">  The possible worlds are &quot;states&quot;, i.e. variable assignments for program</span>
<span class="cm">  variables, and a state w:world is accessible from state v:state for program α,</span>
<span class="cm">  if a run of program α in v yields state w.</span>
<span class="cm">  </span>
<span class="cm">  Dynamic logic comes in three levels of modeling: </span>
<span class="cm">  - Proposititional Dynamic Logic: programs are built up from program opaque variables,</span>
<span class="cm">    states are unspecified, and tests are over propositional formulae.</span>
<span class="cm">  - First-Order Dynamic Logics: program contain (program) variables and assignment,</span>
<span class="cm">    possible worlds are states, accessibility is state change.</span>
<span class="cm">  ❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Programs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">Π</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Dynamic Logic is just the multimodal logic </span>
<span class="cm">   where the modality is given by Π programs. ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">DynamicLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MML</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?Programs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prog</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">modality </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T A simple non-deterministic programming language ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NonDetProg</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Programs</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T the programming language primitives of a non-deterministic programming</span>
<span class="cm">    language Π whose semantics is easy to specify.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Π ⟶ Π ⟶ Π</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">distrib</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Π ⟶ Π ⟶ Π</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∪</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">iteration</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Π ⟶ Π</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ Π</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">?</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T in Π, we can define the usual program combinators we know and love ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">skip</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Π</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">true ?</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ifte</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ Π ⟶ Π ⟶ Π</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">if</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">then</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">else</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,P,Q] (F ? ; P) ∪ (¬F ? ; Q)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">while</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ Π ⟶ Π</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">while</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">do</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,P] *(F ?;P) ; ¬F ?</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">until</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ Π ⟶ Π</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">repeat</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">until</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,P] *(P; ¬F ?) ; F ?</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PropDynamicLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DynamicLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NonDetProg</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T A theory of (first-order) program variables and for Π; we also extend the language of</span>
<span class="cm">tests ot sorted first-order logic ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedDynamicLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropDynamicLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLEQ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">retrieve</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} var S ⟶ tm S</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">`</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">assign</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} var S ⟶ tm S ⟶ Π</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≔</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">35</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">random_assign</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} var S ⟶ Π</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">randomize</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">35</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T A simple example to test what we have done above ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?TypedDynamicLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Booleans</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">int</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">1</span><span class="p">:</span><span class=" -MMT_ObjectExpression">tm int</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">5</span><span class="p">:</span><span class=" -MMT_ObjectExpression">tm int</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm int ⟶ tm int ⟶ tm int</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">test</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b: var bool,x:var int}prog</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b,x] x≔1; b≔tt; while `b≐tt do (x ≔ `x+1; if `x≐5 then b≔ff else skip); x≔`x+1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">kripkemodels</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T a theory of states, i.e. assignments to program variables ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">State</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?HOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cell</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">state</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm W ⟶ {S} tm cell S ⟶ tm S</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">extends</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm W ⟶ tm W ⟶ {S} tm cell S ⟶ (tm W ⟶ tm S) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w,S,n,x] n*w ≐ x v ∧ ∀[m] ¬n≐m ⇒ m*v≐m*w</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">          </span><span class="p">#</span><span class="w"> </span><span class="ss">extends</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">trclos</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} (tm S ⟶ tm S ⟶ prop) ⟶ (tm S ⟶ tm S ⟶ prop)</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">trclos</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trclose_extend</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,r} {x,y: tm S} ⊦ r x y ⟶ ⊦ trclos r x y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trclose_refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,r} {x: tm S} ⊦ trclos r x x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trclose_trans</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,r} {x,y,z: tm S} ⊦ trclos r x y ⟶ ⊦ trclos r y z ⟶ ⊦ trclos r x z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">DynamicLogicSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?DynamicLogic</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?State</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MMLSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">NonDetProgSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?NonDetProg</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?State</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?Programs❘ = ?DynamicLogicSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p,q] [u,w] ∃ [v] p u v ∧ q v w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">distrib</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p,q] [v,w] p v w ∨ q v w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">iteration</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] [v,w] trclos p v w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] [v,w] f v ∧ v≐w</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// check currently skipped❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">skip</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w] v ≐ w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">PropDynamicLogicSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?PropDynamicLogic</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?State</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DynamicLogicSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NonDetProgSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TypedDynamicSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?TypedDynamicLogic</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?State</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropDynamicLogicSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">var</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] tm cell S</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">retrieve</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,n] [w] n*w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assign</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,n,x] [v,w] extends v w n x</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">random_assign</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,n] [v,w] ∃[t: tm W→S] extends v w n ([u]t@u)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniversalQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_OD">❘</span><span class="p">##</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniversalQuantificationNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ({x} ⊦ (P x)) ⟶ ⊦ ∀ P</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniversalQuantificationNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,X} ⊦ ∀ P ⟶ ⊦ (P X)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">forallE</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniversalQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantificationNDE</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantificationNDI</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExistentialQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∃</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_OD">❘</span><span class="p">##</span><span class="w"> </span><span class="ss">∃</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExistentialQuantificationNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,X} ⊦ P X ⟶ ⊦ ∃ P</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">existsI</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExistentialQuantificationNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,C} ⊦ ∃ P ⟶ ({x} ⊦ (P x) ⟶ ⊦ C) ⟶ ⊦ C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">existsE</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">EliminationRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExistentialQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantificationNDI</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantificationNDE</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IFOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IFOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IFOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantificationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantificationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IFOLEQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IFOLEQND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IFOLEQ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EqualityND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantificationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantificationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IFOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IFOLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLEQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLEQND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EqualityND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RelativizedUniversalQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rforall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ (term ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] ∀[x] x⦂A ⇒ P x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∀&#39;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RelativizedUniversalQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RelativizedUniversalQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rforallI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,F} ({x} ⊦x⦂A ⟶ ⊦ F x) ⟶ ⊦ ∀&#39; A F</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,F,P] forallI [x] impI [xa] P x xa</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rforallE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,F} ⊦ ∀&#39; A F ⟶ {x} ⊦x⦂A ⟶ ⊦ F x</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,F,p,x,xa] p forallE x impE xa</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RelativizedExistentialQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rexists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ (term ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] ∃[x] x⦂A ∧ P x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∃&#39;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RelativizedExistentialQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RelativizedExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rexistsI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,F} {x} ⊦x⦂A ⟶ ⊦ F x ⟶ ⊦ ∃&#39; A F</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,F,x,xa,p] existsI x andI xa p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rexistsE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,F,C} ⊦ ∃&#39; A F ⟶ ({x} ⊦x⦂A ⟶ ⊦ F x ⟶ ⊦ C) ⟶ ⊦ C</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,F,C,p,P] p existsE [x,q] P x (q andEl) (q andEr)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniqueExistentialQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsUnique</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∃¹</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniqueExistentialQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniqueExistentialQuantification </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsUniqueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} {x} ⊦ P x ⟶ ({y} ⊦ P y ⟶ ⊦ x ≐ y) ⟶ ⊦ ∃¹ P</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">existsUniqueI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsUniqueE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,C} ⊦ ∃¹ P ⟶ ({x} ⊦ P x ⟶ ({y} ⊦ P y ⟶ ⊦ x ≐ y) ⟶ ⊦ C) ⟶ ⊦ C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">existsUniqueE</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_OD">❘</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Description</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniqueExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">the</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ⊦ ∃¹ P ⟶ term</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">the</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">the_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,p} ⊦ P (the P p)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Choice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">some</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ⊦ ∃ P ⟶ term</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">some</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">some_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,p} ⊦ P (some P p)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLEQDesc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Description</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLEQDescND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQDesc</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniversalQuantificationHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantificationNDE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">UQ_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ⊦ ∀ [x] P x ⇒ ∀ P</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// The following views need to be built ❚</span><span class="w"></span>
<span class="cm">// view HilbertNDEquivalence : ?EquivalenceHilbert → ?EquivalenceNDI =</span>
<span class="cm">  UQ_ax = ❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">// view NDHilbertEquivalence : ?EquivalenceNDI → ?EquivalenceHilbert =</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equalConstant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A → (A → bool)</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A]λ[x]λ[y]x≐y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PropositionalExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">propext</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} (⊦ F ⟶ ⊦ G) ⟶ (⊦ G ⟶ ⊦ F) ⟶ ⊦ F≐G</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ISFOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IHOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEqualityND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ISFOLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropositionalExtensionality</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IHOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?HOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IHOLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionsEta</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eq_equiv</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦F≐G ⟶ ⊦F⇔G</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,p] equivI ([q] p congP ([u]u) q) ([q] (p sym) congP ([u]u) q)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv_eq</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦F⇔G ⟶ ⊦F≐G</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,p] propext ([q] p equivEl q) ([q] p equivEr q)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerHOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?HOLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">powertypes?PowerTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">power</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] a → bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">filter</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] λ P</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,S] S @ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">compute</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,x] eq_equiv simpbeta</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">expand</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] eta sym</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HOLAndrews</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEqualityND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropositionalExtensionality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Remaining implementation is missing</span>

<span class="cm">  realize ?IHOLND❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// true = (λ[x:tm bool]x) ≐ λ[x]x❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// false = (λ[x]x) ≐ λ[x]true❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// not = [F]F ≐ false❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// forall = [A,P] (λ[x]P x) ≐ λ[x]true❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// and = [F,G] ∀[h:tm bool→bool→bool] h@F@G ≐ h@true@true❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// impl = [F,G] (F∧G) ≐ F❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// or = [F,G] ∀[H] (F⇒H) ⇒ (G⇒H) ⇒ H❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// equiv = [F,G] (F⇒G) ∧ (G⇒F)❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// exists = [A,F] ∀[H] (∀[x]F x ⇒ H) ⇒ H❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetaLevelUniversalQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} (A ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetaLevelExistentialQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} (A ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∃</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetaLevelEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} A ⟶ A ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⊜</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x:A} ⊦ x ⊜ x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">transport</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x,y} ⊦ x ⊜ y ⟶ {T: A⟶type} T x ⟶ T y</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">transport</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,x,y} ⊦ x ⊜ y ⟶ {F: A⟶B} ⊦ F x ⊜ F y</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">cong</span><span class="w"> </span><span class="si">6</span><span class="w"></span>
<span class="w">        </span><span class="ss">=</span><span class="w"> </span><span class="ss">[A,B,x,y,p,F]</span><span class="w"> </span><span class="ss">transport</span><span class="w"> </span><span class="ss">p</span><span class="w"> </span><span class="ss">([a]</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="ss">F</span><span class="w"> </span><span class="ss">x</span><span class="w"> </span><span class="ss">⊜</span><span class="w"> </span><span class="ss">F</span><span class="w"> </span><span class="ss">a)</span><span class="w"> </span><span class="ss">refl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetaLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetaLevelEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?IPL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?MetaLevelUniversalQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?MetaLevelExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x:prop]x) ⊜ [x]x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x]x) ⊜ [x]true</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F]F ⊜ false</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,F] F ⊜ [x:A]true</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G] ∀[h: prop ⟶ prop ⟶ prop]h F G ⊜ h true true</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G] (F∧G) ⊜ F</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G] ∀[H] (F⇒H) ⇒ (G⇒H) ⇒ H</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G] (F⇒G) ∧ (G⇒F)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,F] ∀[H] (∀[x]F x ⇒ H) ⇒ H</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Box</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">box</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">□</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Diamond</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">diamond</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">◇</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ML</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Box</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Diamond</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MLHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ML</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Rules with hypothetical premises are not sound in Kripke models; so we need to use a Hilbert calculus.❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLHilbert</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">kripkemodels</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Worlds</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?HOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">world</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">W</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">liftPred2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,A,B} (          tm A ⟶           tm B  ⟶          prop)</span>
<span class=" -MMT_ObjectExpression">                   ⟶ (tm S ⟶ tm A) ⟶ (tm S ⟶ tm B) ⟶ (tm S ⟶ prop)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,A,B,o,f,g] [x] o (f x) (g x)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="ss">liftFun</span><span class="si">2</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">lift0</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} prop ⟶ (tm S ⟶ prop)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,o] [x]o</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="ss">lift</span><span class="si">0</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lift1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} (prop ⟶ prop) ⟶ (tm S ⟶ prop) ⟶ (tm S ⟶ prop)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,o,f] [x]o (f x)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="ss">lift</span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lift2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} (prop ⟶ prop ⟶ prop) ⟶ (tm S ⟶ prop) ⟶ (tm S ⟶ prop) ⟶ (tm S ⟶ prop)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,o,f,g] [x]o (f x) (g x)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="ss">lift</span><span class="si">2</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span>
<span class="w">  </span><span class="vc">liftbind</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} ({T}  (        tm T            ⟶ prop)  ⟶          prop) ⟶</span>
<span class=" -MMT_ObjectExpression">                  {T} ((tm S ⟶ tm T) ⟶ (tm S ⟶ prop)) ⟶ (tm S ⟶ prop)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S][B][T][F][x] B (S→T) [f] F (apply1 f) x</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">           </span><span class="p">#</span><span class="w"> </span><span class="ss">liftbind</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">latin:/?DisjunctionHilbert2ND</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">latin:/?NegationHilbert2ND</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">latin:/?ImplicationHilbert2ND</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">latin:/?EquivalenceHilbert2ND</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">KripkeFrame</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?TypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">accessible</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm W ⟶ tm W ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">acc</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">KripkeModel</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?SFOLEQ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?KripkeFrame</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">PropSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?Propositions</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm W ⟶ prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">LogicSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?Logic</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] {w} ⊦ f w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">PLSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?PL</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift0 true</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift0 false</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift2 and</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift2 or</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift2 impl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift1 not</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lift2 equiv</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">PLHilbertSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?PLHilbert</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LogicSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w] trueI</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">falseE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] [g,w] f w falseE inconE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">andI</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,f,g][w] andI (f w) (g w)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,fg] [w] fg w andEl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,fg] [w] fg w andEr</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">orIl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,f] [w] f w orIl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">orIr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,f] [w] f w orIr</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">orE_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,H][w] orE_ax</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">impE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,fg,f] [w] (fg w) impE (f w)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">K_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,w] K_ax</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">S_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,H,w] S_ax</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">notI_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,w] notI_ax</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">notE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,nf,f] [g,w] (nf w) notE (f w) inconE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">equivI_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,w] equivI_ax</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivEl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,fg,f] [w] (fg w) equivEl (f w)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivEr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,fg,g] [w] (fg w) equivEr (g w)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">classical</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,p] [w] classical [Fwincon] [A] p ([Fw,Gv,v] Fwincon (Fw w) (Gv v)) ([u] A) w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TermSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?TypedTerms</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T constant universe; alternative would be tp = tm W ⟶ tp❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] tm W ⟶ tm S</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">SFOLSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQ</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TermSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LogicSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">liftbind forall</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">liftbind exists</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] liftFun2 (equal S)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">MLSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?ML</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?KripkeModel</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LogicSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">box</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] [v] ∀ [w] v acc w ⇒ p w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">diamond</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] [v] ∃ [w] v acc w ∧ p w</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">MLHilbertSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?MLHilbert</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?KripkeModel</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MLSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLHilbertSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MultiModal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">modality</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MultiBox</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MultiModal</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">box</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">modality ⟶ prop ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⟬</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⟭</span><span class="w">  </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MultiDiamond</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MultiModal</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">diamond</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">modality ⟶ prop ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⦉</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⦊</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MML</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MultiModal</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MultiBox</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MultiDiamond</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SMML</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MML</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLEQ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">kripkemodels</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">MMLSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?MML</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LogicSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">modality</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm W ⟶ tm W ⟶ prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">box</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m,p] [v] ∀ [w] m v w ⇒ p w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">diamond</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m,p] [v] ∃ [w] m v w ∧ p w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">SMMLSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">latin:/?SMML</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MMLSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLSemantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">diagops</span><span class="w"> </span><span class="l l-URI">scala://diagops.latin2</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Declare operator constants</span>

<span class="cm">   Use an empty meta theory! E.g. if we used LF as a meta theory the notation</span>
<span class="cm">   would be parsed as LF-y.</span>
<span class="cm">❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LogicDiagramOperatorsSyntax</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">fol_typifier</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">TYPIFY</span><span class="w"> </span><span class="ss">FOL</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LogicDiagramOperatorsSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://cds.omdoc.org/urtheories?ModExp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">diagops?ComputeFOLTypified </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LogicDiagramOperators</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LogicDiagramOperatorsSyntax </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LogicDiagramOperatorsSemantics </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://cds.omdoc.org/urtheories?Combinators </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PLModel</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLEQND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Booleans</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// View currently not total</span>

<span class="cm">view PLSemantics : ?PLND → ?PLModel =</span>
<span class="cm">  prop = tm bool❙</span>
<span class="cm">  ded  = [F] ⊦ F ≐ tt❙</span>
<span class="cm">  </span>
<span class="cm">  true = tt❙</span>
<span class="cm">  false = ff❙</span>
<span class="cm">  </span>
<span class="cm">  and   = [x,y] if x then y else ff❙</span>
<span class="cm">  or    = [x,y] if x then tt else y❙</span>
<span class="cm">  impl  = [x,y] if x then y else tt❙</span>
<span class="cm">  not   = [x] if x then ff else tt❙</span>
<span class="cm">  equiv = [x,y] if x then y else if y then ff else tt❙</span>

<span class="cm">  trueI = refl❙</span>
<span class="cm">  falseE = [p][a] (bool_nontrivial notE (p sym)) inconE❙</span>
<span class="cm">  </span>
<span class="cm">  andI = [F][G][p][q]</span>
<span class="cm">          trans3 (p congT [u] if u then G else ff) if_tt q❙</span>

<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Tableaux</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">marktrue</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">¹</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">TabMarker </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">markfalse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⁰</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">TabMarker </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">closedbranch</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⊥</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p} p¹ </span><span class=" -MMT_OD">❘</span><span class="w">  </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">TabClosed </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// We could define many of the rules below by defining P⁰ = P¹ ⟶ ⊥ ❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">closebranch</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} P¹ ⟶ P⁰ ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">close</span><span class="si">10</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">closebranch2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} P⁰ ⟶ P¹ ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">close</span><span class="si">01</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,p0,p1] close10 p1 p0 </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">proofstart</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} (P⁰ ⟶ ⊥) ⟶ P¹ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">start</span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refutationstart</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} (P¹ ⟶ ⊥) ⟶ P⁰ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">start</span><span class="si">0</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">classicality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ((P¹ ⟶ ⊥) ⟶ ⊥) ⟶ P¹ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// We need classicality to prove proofstart ❚</span><span class="w"></span>
<span class="kd">view</span><span class="w"> </span><span class="nc">Tableaux2Proofs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Tableaux</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Classical</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">marktrue</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] ⊦ p </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">markfalse</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] ⊦ p ⟶ ↯ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">closedbranch</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">↯ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">closebranch</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P, p1, p0] p0 p1 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">proofstart</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">classical </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">classicality</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">classical </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refutationstart</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,pr] pr </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">Proofs2Tableaux</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Tableaux</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] p¹ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// classical = classicality ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">negationTab0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ¬P⁰ ⟶ (P¹ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">negt</span><span class="si">0</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">negationTab1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ¬P¹ ⟶ (P⁰ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">negt</span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">NegationTab2ND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NegationTab</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux2Proofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">not </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">negationTab0</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P, np0, p1r] np0 (notI p1r) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">negationTab1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P, np1, p0r] np1 notE (classical p0r) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">NegationND2Tab</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NegationND</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?NegationTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs2Tableaux </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">not </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">notI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F, fr : F¹ ⟶ ⊥] start1 ([nfr : ¬F⁰] negt0 nfr fr) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">notE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F, nf, f] negt1 nf ([f0] close10 f f0) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">ConjunctionTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">conjunctionTab0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A∧B⁰ ⟶ (A⁰ ⟶ ⊥) ⟶ (B⁰ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">conjt</span><span class="si">0</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">conjunctionTab1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A∧B¹ ⟶ (A¹ ⟶ B¹ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">conjt</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// view ConjunctionTab2ND : ?ConjunctionTab -&gt; ?PLND =</span>
<span class="cm">  and = and ❙</span>
<span class="cm">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">DisjunctionTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">disjunctionTab0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A∨B⁰ ⟶ (A⁰ ⟶ B⁰ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">disjt</span><span class="si">0</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">disjunctionTab1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A∨B¹ ⟶ (A¹ ⟶ ⊥) ⟶ (B¹ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">disjt</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">implicationTab0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A⇒B⁰ ⟶ (A¹ ⟶ B⁰ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">implt</span><span class="si">0</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">implicationTab1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A⇒B¹ ⟶ (A⁰ ⟶ ⊥) ⟶ (B¹ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">implt</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equivalence </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivalenceTab0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A⇔B⁰ ⟶ (A⁰ ⟶ B¹ ⟶ ⊥) ⟶ (A¹ ⟶ B⁰ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">equivt</span><span class="si">0</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivalenceTab1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A⇔B¹ ⟶ (A⁰ ⟶ B⁰ ⟶ ⊥) ⟶ (A¹ ⟶ B¹ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">equivt</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UniversalQuantificationTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UniversalQuantification </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallT</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P, X} ∀ P ¹ ⟶ (P X ¹ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ApplyRepeatedly </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ∀ P ⁰ ⟶ ({x} P x ⁰ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExistentialQuantificationTab</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExistentialQuantification </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Tableaux </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsT</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ∃ P ¹ ⟶ ({x} P x ¹ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P, X} ∃ P ⁰ ⟶ (P X ⁰ ⟶ ⊥) ⟶ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ApplyRepeatedly </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   Interdefinability of logics is formalized in various views. ❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   The views currently still need single theories as a domain and codomain, which </span>
<span class="cm">  forces us to provide spurious named theories. This should be refactored when</span>
<span class="cm">  multi-theory domains and codomains are possible. ❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationTruth</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Truth</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationFalsity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Falsity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationTruthND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationTruth</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationNDE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TruthND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationFalsityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationFalsity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FalsityND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">FalsityNegTruth</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Falsity</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?NegationTruth</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">¬ true </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">FalsityNegTruthND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FalsityND</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?NegationTruthND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FalsityNegTruth</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">falseE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] p notE trueI </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TruthNegFalsity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Truth</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?NegationFalsity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">¬ false </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TruthNegFalsityND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?TruthND</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?NegationFalsityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TruthNegFalsity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">notI [p] p falseE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">DisjNegConj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?NegationConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] ¬(¬a ∧ ¬b)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationDisjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">ConjNegDisj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?NegationDisjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] ¬(¬a ∨ ¬b)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationImplication</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">DisjNegConj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?NegationImplication</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] ¬a ⇒ b</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationDisjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">ImplNegDisj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?NegationDisjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] ¬a ∨ b</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">ImplNegConj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?NegationConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] ¬(a ∧ ¬b)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">EquivImplConj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Equivalence</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?ImplicationConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] (a ⇒ b) ∧ (b ⇒ a)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationFalsity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Falsity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">NegImplFalsity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?ImplicationFalsity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] a ⇒ false</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T A fully modular specification of intuitionistic and classical propositional</span>
<span class="cm">  logics.</span>
<span class="cm">  Every connective and all proof rules are specified in their own theories to maximize reusability.</span>
<span class="cm">  </span>
<span class="cm">  Proof rules follow natural deduction except that a judgment for inconsistency is used in some rules.</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">/T Naming conventions for theory name suffixes</span>
<span class="cm">   * ND: natural deduction rules</span>
<span class="cm">   * I resp. E: introduction resp. elimination rules</span>
<span class="cm">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Truth</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">true</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TruthND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Truth</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ true</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Falsity</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FalsityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Falsity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">falseE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ false ⟶ ↯</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">falseE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Negation</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">¬</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">notI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} (⊦ F ⟶ ↯) ⟶ ⊦ ¬ F</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">notI</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">notE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} ⊦ ¬ F ⟶ ⊦ F ⟶ ↯</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">notE</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationNDI</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationNDE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AlternativeNegationAndFalsityND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Falsity </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">notIntroduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (⊦ A ⟶ ⊦ false) ⟶ (⊦ ¬ A) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">altNotI</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">notElimination</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ¬ ¬ A ⟶ ⊦ A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">altNotE</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">falseIntroduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ¬ A ⟶ ⊦ A ⟶ ⊦ false </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">altFI</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">EliminationRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">falseElimination</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ false ⟶ ⊦ A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">altFE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Conjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∧</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ConjunctionNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">andI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ F ⟶ ⊦ G ⟶ ⊦ F ∧ G</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ConjunctionNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ F ∧ G ⟶ ⊦ F</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">andEl</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ F ∧ G ⟶ ⊦ G</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">andEr</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ConjunctionND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ConjunctionNDI</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ConjunctionNDE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Disjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∨</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DisjunctionNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">orIl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ F ⟶ ⊦ F ∨ G</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">orIl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">orIr</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ G ⟶ ⊦ F ∨ G</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">orIr</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DisjunctionNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">orE</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G,C} ⊦ F ∨ G ⟶ (⊦ F ⟶ ⊦ C) ⟶ (⊦ G ⟶ ⊦ C) ⟶ ⊦ C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">orE</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">EliminationRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DisjunctionND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionNDI</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionNDE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Implication</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">%R⇒</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">impI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} (⊦ F ⟶ ⊦ G) ⟶ ⊦ F ⇒ G</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">impE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ F ⇒ G ⟶ ⊦ F ⟶ ⊦ G</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">impE</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationNDI</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationNDE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">impl_preorder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Preorder </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">carrier</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] ⊦ x ⇒ y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">refl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] impI [f] f</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">trans</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,H,fg,gh] impI [f] gh impE (fg impE f)</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Equivalence</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⇔</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceNDI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equivalence</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} (⊦ F ⟶ ⊦ G) ⟶ (⊦ G ⟶ ⊦ F) ⟶ ⊦ F ⇔ G</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceNDE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equivalence</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ F ⇔ G ⟶ ⊦ F ⟶ ⊦ G</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">equivEl</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ F ⇔ G ⟶ ⊦ G ⟶ ⊦ F</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">equivEr</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceNDI</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceNDE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">equiv_equivalence</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EquivalenceRelation </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">carrier</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">rel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] ⊦ x ⇔ y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">refl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] equivI ([p]p) ([p]p)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">sym</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,p] equivI ([q] p equivEr q) ([q] p equivEl q)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">trans</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,H,fg,gh] equivI ([f] gh equivEl (fg equivEl f))</span>
<span class=" -MMT_ObjectExpression">                                 ([h] fg equivEr (gh equivEr h))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IPL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Truth</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Falsity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Negation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conjunction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Disjunction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Implication</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equivalence</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IPLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TruthND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FalsityND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ConjunctionND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">not_or_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ ¬(F∨G) ⟶ ⊦¬F </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,p] notI [q] p notE (q orIl)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">not_or_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ ¬(F∨G) ⟶ ⊦¬G </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,p] notI [q] p notE (q orIr)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">nntnd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} ⊦¬¬(F∨¬F)</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] notI [p] (not_or_right p) notE (not_or_left p)</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">impl_order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Order </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationND/impl_preorder</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">    </span><span class="kd">structure</span><span class="w"> </span><span class="nc">equalityRel</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="l l-URI">?EquivalenceND/equiv_equivalence</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">antisym</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,fg,gf] equivI ([f] fg impE f) ([g] gf impE g)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Classical</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">classical</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} ((⊦ F ⟶ ↯) ⟶ ↯) ⟶ ⊦ F</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">classical</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ProofIrrelevance</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TermIrrelevanceRule ded</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ProofIrrelevance</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Classical</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">indirect</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} (⊦¬F ⟶ ↯) ⟶ ⊦ F</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,h] classical [q] h (notI q)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">indirect</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">  </span><span class="vc">dne</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} ⊦¬¬F ⟶ ⊦F</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,p] indirect [q] p notE q</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tnd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} ⊦F∨¬F</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] dne nntnd</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Conjunction where the second conjunct&#39;s well-formedness may depend on the truth of the first conjunct</span>
<span class="cm">   Curry-Howard analogue of Sigma types ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentConjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dand</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} (⊦ F ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∧-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentConjunctionND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentConjunction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dandI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} {p:⊦ F} ⊦ G p ⟶ ⊦ F ∧- G</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dandEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ F ∧- G ⟶ ⊦ F</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">dandEl</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dandEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} {p: ⊦ F ∧- G} ⊦ G (p dandEl)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">dandEr</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Disjunction where the second disjunct&#39;s well-formedness may depend on the falsity of the first disjunct</span>
<span class="cm">   Curry-Howard analogue of an unusual union type where the second argument is only considered if the first one is empty❚</span><span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentDisjunction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dor</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} ((⊦ F ⟶ ↯) ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∨-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentDisjunctionND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentDisjunction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dorIl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ F ⟶ ⊦ F ∨- G</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">dorIl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dorIr</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ({p:⊦ F ⟶ ↯} ⊦ G p) ⟶ ⊦ F ∨- G</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">dorIr</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dorE</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G,C} ⊦ F ∨- G ⟶ (⊦ F ⟶ ⊦ C) ⟶ ({p: ⊦ F ⟶ ↯} ⊦ G p ⟶ ⊦ C) ⟶ ⊦ C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">dorE</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Implication where the implicate&#39;s well-formedness may depend on the truth of the implicant</span>
<span class="cm">   Curry-Howard analogue of Pi types ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentImplication</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dimpl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} (⊦ F ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⇒-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentImplicationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentImplication</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dimpI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ({p} ⊦ G p) ⟶ ⊦ F ⇒- G</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dimpE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ F ⇒- G ⟶ {p:⊦ F} ⊦ G p</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">dimpE</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Hilbert calculi for propositional and first-order logic. </span>
<span class="cm">  Here we formalize a version that is rule-maximal, i.e. we include </span>
<span class="cm">  as many rules from natural deduction a we can, i.e. all rules that </span>
<span class="cm">  do not use hypothetical reasoning. The ones that do, we reformulate </span>
<span class="cm">  into axioms, where all the function types become implications. </span>
<span class="cm">  </span>
<span class="cm">  Unfortunately, this means that we cannot be fully modular, since we </span>
<span class="cm">  need a treatment of implication in all cases.❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ImplicationHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationNDE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">K_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ F ⇒ G ⇒ F </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">S_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G,H} ⊦ (F ⇒ G ⇒ H) ⇒ (F ⇒ G) ⇒ F ⇒ H </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NegationHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationNDE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">notI_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} ⊦ (F ⇒ ¬F) ⇒ ¬F </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DisjunctionHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionNDI</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">orE_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G,H} ⊦ (F ∨ G) ⇒ (F ⇒ H) ⇒ (G ⇒ H) ⇒ H</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EquivalenceHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceNDE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivI_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ⊦ (F ⇒ G) ⇒ (G ⇒ F) ⇒ (F ⇔ G)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PLHilbert</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TruthND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FalsityND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ConjunctionND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationHilbert</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionHilbert</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceHilbert</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Classical</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">ImplicationHilbert2ND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?ImplicationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationNDE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">K_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G] impI [p] impI [q] p </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">S_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,H] impI [p] impI [q] impI [r] (p impE r) impE (q impE r)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">NegationHilbert2ND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NegationHilbert</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationNDE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert2ND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">notI_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] impI [p] notI [q] (p impE q) notE q</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">DisjunctionHilbert2ND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DisjunctionHilbert</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionNDI</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert2ND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">orE_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G,H] impI [fg] impI [fh] impI [gh] fg orE ([f] fh impE f) ([g] gh impE g)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">EquivalenceHilbert2ND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?EquivalenceHilbert</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceNDE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert2ND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivI_ax</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,G] impI [fg] impI [gf] equivI ([f] fg impE f) ([g] gf impE g)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">PLHilbert2ND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLHilbert</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ImplicationHilbert2ND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TruthND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FalsityND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ConjunctionND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NegationHilbert2ND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DisjunctionHilbert2ND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EquivalenceHilbert2ND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Classical</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">diagram</span><span class="w"> </span><span class="nv">SFOL_via_operator</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?LogicDiagramOperators :</span><span class=" -MMT_ObjectExpression">= TYPIFY FOL DIAG FROM FILE &quot;C:\Users\nroux\Desktop\kwarc-project\code\archives\MathHub\MMT\LATIN2\source\logic\fol.mmt&quot; </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedUniversalQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedUniversalQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedUniversalQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P} ({x: tm A} ⊦ P x) ⟶ ⊦ ∀ [x] P x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P} ⊦ ∀ P ⟶ {x: tm A} ⊦ P x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">forallE</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedExistentialQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∃</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedExistentialQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P} {x: tm A} ⊦ P x ⟶ ⊦ ∃ P</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">existsI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,C} ⊦ ∃ P ⟶ ({x: tm A} ⊦ P x ⟶ ⊦ C) ⟶ ⊦ C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">existsE</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_OD">❘</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ISFOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedUniversalQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ISFOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ISFOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IPLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedUniversalQuantificationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedExistentialQuantificationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ISFOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ISFOLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLEQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">notequal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A ⟶ tm A ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y]¬x≐y</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≠</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLEQND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLEQ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEqualityND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedUniqueExistentialQuantification</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsUnique</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∃¹</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedUniqueExistentialQuantificationND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedUniqueExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsUniqueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P} {x: tm A} ⊦ P x ⟶ ({y} ⊦ P y ⟶ ⊦ x ≐ y) ⟶ ⊦ ∃¹ P</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">existsUniqueI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsUniqueE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,C} ⊦ ∃¹ P ⟶ ({x: tm A} ⊦ P x ⟶ ({y} ⊦ P y ⟶ ⊦ x ≐ y) ⟶ ⊦ C) ⟶ ⊦ C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">existsUniqueE</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_OD">❘</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedDescription</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedUniqueExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">the</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} {P:tm A ⟶ prop} ⊦ ∃¹ P ⟶ tm A</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">the</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">the_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P: tm A ⟶ prop,p} ⊦ P (the P p)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedChoice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedExistentialQuantification</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">some</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} {P:tm A ⟶ prop} ⊦ ∃ P ⟶ tm A</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">some</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">some_ax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P: tm A ⟶ prop,p} ⊦ P (some P p)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">finite</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://structuralfeatures.lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// Mainly ported (with very minor modifications)</span>
<span class="cm">// from Colin&#39;s examples/induction/NatExample.mmt</span>
<span class="cm">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatInduct</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LFXI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">inductive</span><span class="w"> </span><span class="nc">nat</span><span class="p">()</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n     </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">plusn</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(nat/n ⟶ nat/n)     </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n     </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] x)             </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] nat/s (u x)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span><span class="vc">plus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n ⟶ nat/n ⟶ nat/n</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plusn/n</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">z_plus_n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m: nat/n} DED ((nat/z + m) EQ m) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">z_plus_z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DED (nat/z + nat/z) EQ nat/z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">z_plus_suc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m: nat/n} DED (nat/z + m) EQ m ⟶ DED (nat/z + (nat/s m)) EQ (nat/s m) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">z_neutral</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m] DED (nat/z + m) EQ m </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n nat/z </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plusn/z/Applied nat/z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:nat/n} n x ⟶ n (nat/s x) </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, px] plusn/z/Applied (nat/s x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">times</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(nat/n ⟶ nat/n)     </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n     </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] nat/z)         </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] (x + (u x))) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">predec</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n   </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n     </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/z   </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u] u) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">monus</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(nat/n ⟶ nat/n)        </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n     </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] x)                </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] predec/n (u x)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/?SFOLEQND</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uom</span><span class="w"> </span><span class="l l-URI">scala://uom.api.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Nat</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">nat</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Nat</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm nat</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">ℕ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize ℕ uom?StandardNat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize zero uom?Arithmetic/Zero</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize succ uom?Arithmetic/Succ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">proving</span><span class="w"> </span><span class="l l-URI">scala://latin2/proving</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PropositionsITP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">proof</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">block</span><span class="w"> </span><span class="ss">proof</span><span class="w"> </span><span class="si">1</span><span class="ss">;</span><span class="si">…</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">proving?CheckProof</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">hence</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">L1T</span><span class="w"> </span><span class="ss">by</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">suffices</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">use</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">use</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">proving?UseStep</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PLITP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PropositionsITP</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">assume</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">L1T</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">proving?AssumeStep</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cases</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLITP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLITP</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fix</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">L1T</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">proving?FixStep</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?SFOLITP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLEQND</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T,A: tm T⟶ prop} ⊦ ∀ [x] A x ⇒ A x</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T,A] proof fix x; assume a; use a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// the above is equivalent to the following in standard natural deduction❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T,A: tm T⟶ prop} ⊦ ∀ [x] A x ⇒ A x</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T,A] forallI [x] impI [a] a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetFOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">set</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InternalTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Description</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RelativizedUniversalQuantificationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RelativizedExistentialQuantificationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?SetFOL</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Empty</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">isempty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] ¬ ∃[y] y ∈ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∅</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">empty_prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ isempty ∅</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">emptyE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x∈∅ ⟶ ↯</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,p] empty_prop notE (existsI x p)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UnorderedPairs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ set</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopairIL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Xˈ} ⊦ X ∈ uopair X Xˈ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopairIR</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Xˈ} ⊦ X ∈ uopair X Xˈ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopairE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U,X,Xˈ} ⊦ U ∈ uopair X Xˈ ⟶ ⊦ U≐X ∨ U≐Xˈ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Singletons</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">singleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">singletonI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x ∈ singleton x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">singletonE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,u} ⊦ u ∈ singleton x ⟶ ⊦ u≐x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">issingleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] ∃¹[u]u∈x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">singleton_the</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ issingleton x ⟶ set</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,p] the ([u] u ∈ x) p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">SelfPair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Singletons</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?UnorderedPairs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">singleton</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] uopair x x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">singletonI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] uopairIL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">singletonE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,u,p] uopairE p orE ([q] q) ([q] q)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Comprehension</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">comprehend</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ (set ⟶ prop) ⟶ set</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comprehendI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,X} ⊦ X∈A ⟶ ⊦ P X ⟶ ⊦ X ∈ A|P</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comprehend_sub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,X} ⊦ X ∈ A|P ⟶ ⊦ X∈A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comprehendE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,X} ⊦ X ∈ A|P ⟶ ⊦ P X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Replacement</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">replace</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ (set ⟶ set) ⟶ set</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">replaceI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,F,X} ⊦ X∈A ⟶ ⊦ (F X) ∈ A map F</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">replaceE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,F,X} ⊦ X ∈ A map F ⟶ ⊦ ∃&#39;A [x] (F x) ≐ X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BigUnion</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigunion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⋃</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigunionI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X,x} ⊦ x∈X ⟶ ⊦ X∈A ⟶ ⊦ x ∈ ⋃A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigunionE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X,x,C} ⊦ x ∈ ⋃A ⟶ (⊦ X∈A ⟶ ⊦ x∈X ⟶ ⊦ C) ⟶ ⊦ C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerSets</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">power</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">℘</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">powerI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,A} ({u} ⊦u∈X ⟶ ⊦u∈A) ⟶ ⊦X∈℘ A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">powerE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,A} ⊦X∈℘A ⟶ {u} ⊦u∈X ⟶ ⊦u∈A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Infinite</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">latin:/powertypes?PowerSFOL</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ClosureSystem</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">X</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">CC</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm ℘℘X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">intersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Q: tm ℘℘X} ⊦ Q ⊆ CC ⟶ ⊦ (⋂ Q) ∈ CC</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// provable ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">full_closed</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ fullset ∈ CC</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ClosureOperator</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">X</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">closure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm ℘X ⟶ tm ℘X</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">cl</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">extensive</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ A ⊆ cl A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">monotone</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ⊆ B ⟶ ⊦ cl A ⊆ cl B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">idempotent</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ cl (cl A) ≐ cl A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InteriorTopology</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="vc">X</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">interior</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm ℘X ⟶ tm ℘X</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">int_extensivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ( subset X (interior A) A)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">idempotence</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ((interior A) ≐  (interior (interior A)))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">bin_inters</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} ⊦ ((interior (A ∩ B)) ≐ ((interior A) ∩ (interior B)))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">preservation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ((interior (full X)) ≐ (full X))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ClosureTopology</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ClosureOperator</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">closure_empty</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ cl (empty X) ≐ (empty X)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">closure_union</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ cl (A ∪ B) ≐ cl A ∪ cl B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// monotone provable from union❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   isomorphic to ClosureOperator❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Closeness</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">X</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">close</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm X ⟶ tm ℘X ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">in_close</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,A} ⊦ x ∈ A ⟶ ⊦ x|A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigger_close</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,A,B} ⊦ x|A ⟶ ⊦ A ⊆ B ⟶ ⊦ x|B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">transitive</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,x} ⊦ x|B ⟶ ⊦ (∀ [y] y ∈ B ⇒ y|A) ⟶ ⊦ x|A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ClosenessTopology</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Closeness</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">empty_union</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ ¬ x|(empty X)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">finite_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,A,B} ⊦ x|(A ∪ B) ⟶ ⊦ x|A ∨ x|B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// bigger_close provable from union ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   empty and full axioms are implied by/correspond to empty union and empty intersection❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">OpenTopology</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">X</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">OO</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm ℘℘X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">full_open</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ (full X) ∈ OO</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">union_open</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Q: tm ℘℘X} ⊦ Q ⊆ OO ⟶ ⊦ (⋃ Q) ∈ OO</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">empty_open</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ (empty X) ∈ OO </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">finite_intersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ∈ OO ⟶ ⊦ B ∈ OO ⟶ ⊦ A ∩ B ∈ OO</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ClosedTopology</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ClosureSystem</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">  </span><span class="vc">empty_closed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ (empty X) ∈ CC</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">finite_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ∈ CC ⟶ ⊦ B ∈ CC ⟶ ⊦ A ∪ B ∈ CC</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NeighborhoodTopology</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">X</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">NN</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm X ⟶ tm ℘℘X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neighborhood</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm X ⟶ tm ℘X ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,N] N ∈ (NN x)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∘</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">nonempty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ ¬ (NN x) ≐ ∅</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inneighborhood</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: tm X,N} ⊦ x ∘ N ⟶ ⊦ x ∈ N</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">superset_closed</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N,x} ⊦ x ∘ M ⟶ ⊦ M ⊆ N ⟶ ⊦ x ∘ N</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">intersection_closed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N,x} ⊦ x ∘ M ⟶ ⊦ x ∘ N ⟶ ⊦ x ∘ M ∩ N</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">openness</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{N,x} ⊦ x ∘ N ⟶ ⊦ ∃[M]∀[y] x ∘ M ∧ (y∈M ⇒ y∘N)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// views</span>
<span class="cm">   ClosureSystem ⟶ ClosureOperator: A closed if A fixed point of cl</span>
<span class="cm">   ClosureOperator ⟶ ClosureSystem: cl A = intersection of closed supersets of A</span>
<span class="cm">   Closeness ↔ ClosureOperator: X close A ⇔ X ‍∈ cl A</span>
<span class="cm">   ClosureSystem ⟶ Closeness: A closed if A contains all points close to it </span>
<span class="cm">   Closeness ↔ ClosureSystem: X close A if X in every closed superset of A</span>

<span class="cm">for functions f: X ⟶ Y</span>
<span class="cm">  f(cl A) ⊆‍ cl f(A)  ⇔  preservation of closeness   ⇔  reflection of closedness  (= continuous)</span>
<span class="cm">  f(cl A) ⊇ cl f(A)  ⇔  preservation of closedness</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">//   views:</span>
<span class="cm">      Neighborhood ⟶ Open: NN = supersets of open sets</span>
<span class="cm">      Open ⟶ Neighborhood: OO = sets that are neightborhoods for every element</span>
<span class="cm">      Open ⟶ Closed: OO = complements of CC</span>
<span class="cm">      Closed ⟶ Open: CC = complements of OO</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?SFOLEQND</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Option</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">option</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">?</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// unfortunately the notation ? does not work in binders, so use &#39;option A&#39; there</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">some</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A ⟶ tm A? </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">some</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">none</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A? </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">none</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">defined_and_equal_to</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A? ⟶ tm A ⟶ prop</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, optionValue, value] optionValue ≐ some value</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≡</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">defined</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A? ⟶ prop</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, optionValue] ∃[v: tm A] optionValue ≡ v</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">↓</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// we need higher precedence than ∧ (which is 10 currently) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">if_defined_then_equal_to</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A? ⟶ tm A ⟶ prop</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, optionValue, value] optionValue ≐ none ∨ optionValue ≡ value</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ifDefEq</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">both_defined_and_equal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A? ⟶ tm A? ⟶ prop</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, optionValue1, optionValue2] optionValue1↓ ∧ optionValue2↓ ∧ optionValue1 ≐ optionValue2</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">bothDefEq</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">equality_ax</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} ⊦ ∀[optionValue1: tm (option A)] ∀[optionValue2: tm (option A)]</span>
<span class=" -MMT_ObjectExpression">      optionValue1 ≐ optionValue2 ⇔ (optionValue1 ≐ none ∧ optionValue2 ≐ none) ∨ (∃[v: tm A] optionValue1 ≡ v ∧ optionValue2 ≡ v) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">map</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} tm A? ⟶ (tm A ⟶ tm B) ⟶ tm B? </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">map_ax1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B, f: tm A ⟶ tm B, a: tm A} ⊦ map (some a) f ≡ f a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">map_ax2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B, f: tm A ⟶ tm B} ⊦ (map none f) ≐ none </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">flatMap</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} tm A? ⟶ (tm A ⟶ tm (option B)) ⟶ tm B? </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">flatMap</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ObjectLessComposition</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Option </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mor</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Mor</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm mor </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">OptionMor</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm mor? </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Mor?</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">composition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mor ⟶ Mor ⟶ Mor? </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">∘</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The question mark is on the optional side ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">opt_composition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mor? ⟶ Mor ⟶ Mor?</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[α, β] flatMap α ([z] z ∘ β)</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">∘?</span><span class="w"> </span><span class="si">1</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The question mark is on the optional side ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">composition_opt</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mor ⟶ Mor? ⟶ Mor?</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[α, β] flatMap β ([z] α ∘ z)</span>
<span class=" -MMT_ObjectExpression">    </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">?∘</span><span class="w"> </span><span class="si">1</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// Object-less category theory according to</span>
<span class="cm">    https://arxiv.org/pdf/1602.01759.pdf ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ObjectLessCategory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Option </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ObjectLessComposition </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">associativity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{α: Mor, β: Mor, γ: Mor}</span>
<span class=" -MMT_ObjectExpression">    ⊦ (α ∘ β)↓ ∧ (β ∘ γ)↓ ⇒ (α ∘? (β ∘ γ))↓ ∧ ((α ∘ β) ?∘ γ)↓ ∧ (α ∘? (β ∘ γ)) ≐ ((α ∘ β) ?∘ γ)</span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existence_of_subcompositions1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{α: Mor, β: Mor, γ: Mor} ⊦ (α ∘? (β ∘ γ))↓ ⇒ (α ∘ β)↓ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existence_of_subcompositions2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{α: Mor, β: Mor, γ: Mor} ⊦ ((α ∘ β) ?∘ γ)↓ ⇒ (β ∘ γ)↓ </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">leftIdentity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m: Mor} Mor </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftIdentityAlternativeNotation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">leftIdentity </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">dom</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightIdentity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m: Mor} Mor </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&#39;&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// notation &#39; 1 doesn&#39;t work with MMT&#39;s notation parser somehow </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightIdentityAlternativeNotation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rightIdentity </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">cod</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_leftIdentityComposable</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{α: Mor} ⊦ (α ∘ &#39;α)↓ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ax_rightIdentityComposable</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{α: Mor} ⊦ (α&#39;&#39; ∘ α)↓ </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_leftIdentityNeutral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{α: Mor, β: Mor} ⊦ (ifDefEq  (β ∘ &#39;α) β) ∧ (ifDefEq  ((&#39;α) ∘ β) β)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ax_rightIdentityNeutral</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{α: Mor, β: Mor} ⊦ (ifDefEq (β ∘ (α&#39;&#39;)) β) ∧ (ifDefEq (α&#39;&#39; ∘ β) β)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// {β: Mor} ⊦ (β ∘ ⟜β)↓ ⇒ (β ∘ ⟜β) ≡ β ❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">is_identity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mor ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[α] ∃[β] α ≐ dom β ∨ α ≐ cod β </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Hom set between (dom α) and (cod β)</span>
<span class="cm">  hom: {α: Mor, β: Mor} tp ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// https://ncatlab.org/nlab/show/category#OneCollectionOfMorphisms ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">CategoryWithOneCollection</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Option </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ObjectLessComposition </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">obj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mor ⟶ tm obj </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cod</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mor ⟶ tm obj </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">id</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm obj ⟶ Mor </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_dom_preserved</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f, g} ⊦ map (g ∘ f) dom ≡ dom f </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ax_cod_preserved</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f, g} ⊦ map (g ∘ f) cod ≡ cod g </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_identities_dom_cod</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} ⊦ dom (id a) ≐ a ∧ cod (id a) ≐ a </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_comp_defined</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f, g} ⊦ cod f ≐ dom g ⇒ (g ∘ f)↓ </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_associativity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f, g, h} ⊦ (dom g ≐ cod f ∧ dom h ≐ cod g) ⇒ bothDefEq ((h ∘ g) ?∘ f) (h ∘? (g ∘ f)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// https://ncatlab.org/nlab/show/category#AFamilyOfCollectionsOfMorphisms ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">CategoryWithHomSetsSFOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">obj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">hom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{dom: tm obj, cod: tm obj} tp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Hom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm obj ⟶ tm obj ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b] tm (hom a b) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">id</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Hom a a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">compositionABC</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x, y, z} Hom x y ⟶ Hom y z ⟶ Hom x z </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">∘</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">associativity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b, c, d, f: Hom a b, g: Hom b c, h: Hom c d} ⊦ h ∘ (g ∘ f) ≐ (h ∘ g) ∘ f</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">ax_identityLeftNeutral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b, f: Hom a b} ⊦ (id b) ∘ f ≐ f </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ax_identityRightNeutral</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b, f: Hom a b} ⊦ f ∘ (id a) ≐ f </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// view blah: ObjectLessCategory -&gt; CategoryWithHomSetsSFOL =</span>
<span class="cm">  include ?Option ❙</span>
<span class="cm">  // mor = ? ❙</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Collection</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMagma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoNeutral</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">singleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm a ⟶ tm &amp;a</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">S</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm a ⟶ tm &amp;a ⟶ tm &amp;a</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,x,xs] S x ∘ xs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ListSpec</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Collection</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMonoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MultisetSpec</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ListSpec</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoCommutative</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FiniteSetSpec</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MultisetSpec</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoIdempotent</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OptionSpec</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ListSpec</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoFirstNonNeutral</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Lists</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">list</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?ListSpec </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">applyType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">List</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">concat</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">e</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">nil</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">    </span><span class="vc">singleton</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">list</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Multisets</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">multiset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?MultisetSpec </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">applyType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Multiset</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">munion</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">e</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">mempty</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">    </span><span class="vc">singleton</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">multiset</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FiniteSets</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">finset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?FiniteSetSpec </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">applyType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">FinSet</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">union</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">e</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">empty</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">    </span><span class="vc">singleton</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">finset</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Options</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">option</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?OptionSpec </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">applyType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Option</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">op</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">orelse</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">e</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">none</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">    </span><span class="vc">singleton</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">option</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/powertypes</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CongruenceTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?TypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?EquivalenceND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">Cong</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">Cong</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">is_cong</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm Cong A  ⟶ tm A ⟶ tm A ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">≡</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">mod</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A ⟶ tm A ⟶ prop) ⟶ tm Cong A</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">cong</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">compute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,R,x,y: tm A} ⊦ x ≡ y mod (cong R) ⇔ R x y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">expand</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,C:tm Cong A} ⊦ C ≐ cong [x,y] x≡y mod C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="vc">cong_refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, C: tm Cong A, x} ⊦ x≡x mod C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong_sym</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, C: tm Cong A, x, y} ⊦ x≡y mod C ⟶ ⊦ y≡x mod C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong_trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, C: tm Cong A, x,y,z} ⊦ x≡y mod C ⟶ ⊦ y≡z mod C ⟶  ⊦ x≡z mod C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?TypedEqualityND</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypeOperator</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">applyType</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">&amp;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoFunctor</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeOperator</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">applyFun</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} (tm a ⟶ tm b) ⟶ tm &amp;a ⟶ tm &amp;b</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">applyId</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,xs: tm &amp;a} ⊦ xs map ([x] x) ≐ xs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">applyComp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,f:tm a ⟶ tm b, g: tm b ⟶ tm c, xs: tm &amp;a} ⊦ xs map f map g ≐ xs map [x] g (f x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?HOLND</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Category</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="vc">obj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">hom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">obj ⟶ obj ⟶ tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Hom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">obj ⟶ obj ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] tm (hom a b)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Hom a a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c} Hom a b ⟶ Hom b c ⟶ Hom a c</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">neutLeft</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,f:Hom a b} ⊦ (id a);f ≐ f</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutRight</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,f:Hom a b} ⊦ f;(id b) ≐ f</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,d, f:Hom a b, g:Hom b c, h:Hom c d} ⊦ f;(g;h) ≐ (f;g);h</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T View currently not total ❚</span><span class="w"></span>
<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">CategoryOfTypes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Category</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?HOLND</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">obj</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">hom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] a→b</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">id</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] λ[x]x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b,c,f,g] λ[x] g@(f@x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalEndoFunctor</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeOperator</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fmap</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm a→b ⟶ tm &amp;a→&amp;b</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">fmap</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fmapApply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm a→b ⟶ tm &amp;a ⟶ tm &amp;b</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b,f,x] (fmap f)@x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&lt;$&gt;</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fmapId</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} ⊦ fmap (id a) ≐ id (&amp;a)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fmapComp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,f:tm a→b,g:tm b→c} ⊦ fmap (f;g) ≐ (fmap f);(fmap g)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Remaining implementation is missing</span>
<span class="cm">  realize ?EndoFunctor❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// applyFun = [a,b,f:tm a ⟶ tm b,x] (fmap λ f) @ x❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoMagma</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoFunctor</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm &amp;a ⟶ tm &amp;a ⟶ tm &amp;a</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">∘</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoSemigroup</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMagma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x,y,z:tm &amp;a} ⊦ (x∘y)∘z ≐ x∘(y∘z)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">assocR</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x,y,z:tm &amp;a} ⊦ x∘(y∘z) ≐ (x∘y)∘z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,x,y,z] assoc sym</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">assoc4</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{a,w,x,y,z:tm &amp;a} ⊦ ((w∘x)∘y)∘z ≐ w∘(x∘(y∘z))</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[a,w,x,y,z] trans3 (assoc congT [u]u∘z) assoc (assoc congT [u]w∘u)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc4R</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,w,x,y,z:tm &amp;a} ⊦ w∘(x∘(y∘z)) ≐ ((w∘x)∘y)∘z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,w,x,y,z] assoc4 sym</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc5</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,v,w,x,y,z:tm &amp;a} ⊦ (((v∘w)∘x)∘y)∘z ≐ v∘(w∘(x∘(y∘z)))</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,v,w,x,y,z] trans4 (assoc4 congT [u]u∘z) assoc</span>
<span class=" -MMT_ObjectExpression">                              (assoc congT [u]v∘u) (assoc congT [u]v∘(w∘u))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMagma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x,y:tm &amp;a} ⊦ x∘y ≐ y∘x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoNeutral</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMagma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">e</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm &amp;a</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">e</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutLeft</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:tm &amp;a} ⊦ e∘x ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:tm &amp;a} ⊦ x∘e ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoIdempotent</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMagma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">idempotent</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:tm &amp;a} ⊦ x∘x ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoFirstNonNeutral</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoNeutral</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">firstNonNeutral</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x,y:tm &amp;a} (⊦ x≐e ⟶ ↯) ⟶ ⊦ x∘y ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoSemigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoNeutral</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoCommSemigroup</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoSemigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoCommutative</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoBand</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoSemigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoIdempotent</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoCommMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoMonoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoCommSemigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoSemilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoBand</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoCommSemigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EndoBoundedSemilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoSemilattice</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EndoCommMonoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">?HOLND</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Applicative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeOperator</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm a ⟶ tm &amp;a</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">pure</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">splat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm &amp;(a→b) ⟶ tm &amp;a ⟶ tm &amp;b</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&lt;*&gt;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">identity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,X:tm &amp;a} ⊦ pure (id a) &lt;*&gt; X ≐ X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">homomorphism</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,f:tm a→b,x} ⊦ pure f &lt;*&gt; pure x ≐ pure (f@x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">interchange</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,F:tm &amp;(a→b), x} ⊦ F &lt;*&gt; pure x ≐ pure (applyTo x) &lt;*&gt; F</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">composition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,F:tm &amp;(a→b),G:tm &amp;(b→c),X} ⊦ G &lt;*&gt; (F &lt;*&gt; X) ≐ pure (λ[f]λ[g]f;g) &lt;*&gt; F &lt;*&gt; G &lt;*&gt; X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// The remaining implementation is missing ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// realize ?InternalEndoFunctor❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// fmap = [a,b,f] λ[X] pure f &lt;*&gt; X❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?CategoryOfTypes</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monad</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeOperator</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Return</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm a ⟶ tm &amp;a</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">Return</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Bind</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm &amp;a ⟶ (tm a ⟶ tm &amp;b) ⟶ tm &amp;b</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&gt;&gt;=</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">identLeft</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,f:tm a ⟶ tm &amp;b,x} ⊦ Return x &gt;&gt;= f ≐ f x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">identRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,X: tm &amp;a} ⊦ X &gt;&gt;= ([x] Return x) ≐ X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,f:tm a ⟶ tm &amp;b, g:tm b ⟶ tm &amp;c,X} ⊦ X &gt;&gt;= f &gt;&gt;= g ≐ X &gt;&gt;= [x] (f x) &gt;&gt;= g</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// The remaining implementation is missing ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// realize ?EndoFunctor❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// applyFun = [a,b,f,X] X &gt;&gt;= [x] Return (f x)❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalMonad</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeOperator</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">return</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm a→&amp;a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bind</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm &amp;a→(a→&amp;b)→&amp;b</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">laws</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Monad </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeOperator</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">Return</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,x] (return a) @ x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">Return</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">Bind</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b,X,F] (bind a b) @ X @ (λ F)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&gt;&gt;=</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The remaining implementation is missing ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// realize ?Applicative❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// pure = [a,x] Return x❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// splat = [a,b,F,X] F &gt;&gt;= [f] X &gt;&gt;= [x] Return (f@x)❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// Assignments to neutrality and associativity axioms missing</span>
<span class="cm">// view KleisliCat : ?Category → ?InternalMonad =</span>
<span class="cm">  obj = tp❙</span>
<span class="cm">  hom = [a,b] a→&amp;b❙</span>
<span class="cm">  id = [a] return a❙</span>
<span class="cm">  comp = [a,b,c,f,g] λ[x] Return x &gt;&gt;= ([x]f@x) &gt;&gt;= ([y]g@y)❘# 4 &gt;=&gt; 5 prec 50❙</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">%R→</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a:tp] a → a → a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentFunctionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">depfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A ⟶ tp) ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">Π</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpfun</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] Π [x: tm A] B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftDependentFunctionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">softfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ (term ⟶ tp) ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">Π</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simplambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (tm A ⟶ tm B) ⟶ tm A → B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpapply</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A → B ⟶ tm A ⟶ tm B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpbeta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm A ⟶ tm B, X} ⊦ (λ F) @ X ≐ F X</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// should be an extra notation for simpapply❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm a→b ⟶ (tm a ⟶ tm b)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b,f] [x] f@x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">applyTo</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} tm a ⟶ tm (a→b)→b</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b,x] λ[f]f@x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">applyTo</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentFunctionTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">deplambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ({x: tm A} tm B x) ⟶ tm Π B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">depapply</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm Π B ⟶ {x: tm A} tm B x </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">depbeta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F:{x:tm A} tm B x, X} ⊦ (λ F) @ X ≐ F X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// realize ?SimpleFunctions❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// simplambda = [A,B,F] λ[x:tm A] F x❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// simpapply = [A,B,F,X] F @ X❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// simpbeta = [A,B,F,X] depbeta❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term ⟶ term) ⟶ term</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term ⟶ term</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">beta</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,X} ⊦ (λ F) @ X ≐ F X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedSimpleFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fun_typing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F} ({x} ⊦ x⦂A ⟶ ⊦ (F x)⦂B) ⟶ ⊦ λ F ⦂ A → B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedDependentFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftDependentFunctionTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fun_typing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F} ({x} ⊦ x⦂A ⟶ ⊦ (F x)⦂(B x)) ⟶ ⊦ λ F ⦂ Π A B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctionsEta</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F:tm A → B} ⊦ (λ[x] F @ x) ≐ F</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentFunctionsEta</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B, F:tm Π[x:tm A] B x} ⊦ (λ[x] F @ x) ≐ F</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedFunctionsEta</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F} ⊦ (λ[x] F @ x) ≐ F</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctionsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F,G:tm A → B} ({x} ⊦ F@x ≐ G@x) ⟶ ⊦ F≐G</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentFunctionsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B, F,G:tm Π[x:tm A] B x} ({x} ⊦ F@x ≐ G@x) ⟶ ⊦ F≐G</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SofttypedFunctionsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,G} ({x} ⊦ F@x ≐ G@x) ⟶ ⊦ F≐G</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">diagops</span><span class="w"> </span><span class="l l-URI">scala://diagops.latin2</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Declare operator constants</span>

<span class="cm">   Use an empty meta theory! E.g. if we used LF as a meta theory the notation</span>
<span class="cm">   would be parsed as LF-y.</span>
<span class="cm">❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TypeTheoryDiagramOperatorsSyntax</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">single_typeindexifier</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">SINGLE</span><span class="w"> </span><span class="ss">TYPEINDEXIFY</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">multi_typeindexifier</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">MULTI</span><span class="w"> </span><span class="ss">TYPEINDEXIFY</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypeTheoryDiagramOperatorsSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://cds.omdoc.org/urtheories?ModExp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">diagops?ComputeSingleTypeIndexed </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">diagops?ComputeMultiTypeIndexed </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypeTheoryDiagramOperators</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeTheoryDiagramOperatorsSyntax </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeTheoryDiagramOperatorsSemantics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// theory TestMagma2 : ?TestMagmaMeta2 =</span>
<span class="cm">  U: tp ❙</span>
<span class="cm">  op: tm U ⟶ tm U ⟶ tm U ❘ # 1 ∘ 2 ❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">// diagram TestEndoMagmaSingle : ?TypeTheoryDiagramOperators := SINGLE TYPEINDEXIFY ?TestMagma2 ❚</span><span class="w"></span>
<span class="cm">// diagram TestEndoMagmaMulti : ?TypeTheoryDiagramOperators := MULTI TYPEINDEXIFY ?TestMagma2 ❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/powertypes</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">rules:?MMTURILexer</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?TypedEqualityND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?EquivalenceND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">power</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">℘</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A  ⟶ tm ℘A ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">∈</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">filter</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A ⟶ prop) ⟶ tm ℘A</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">filter</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">compute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,x: tm A} ⊦ x ∈ filter P ⇔ P x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">expand</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S:tm ℘A} ⊦ S ≐ filter[x]x∈S</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">filterI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,x: tm A} ⊦ P x ⟶ ⊦ x ∈ filter P</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  				</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,x,p] compute equivEr p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">filterE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,x: tm A} ⊦ x ∈ filter P ⟶ ⊦ P x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">filterE</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">  				</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,x,p] compute equivEl p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Map</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?ConjunctionND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?TypedExistentialQuantificationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">map</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (tm A ⟶ tm B) ⟶ tm ℘A ⟶ tm ℘B</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,S] filter[b] ∃[a] a∈S ∧ (b ≐ f a)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mapI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,f:tm A ⟶ tm B,S,x} ⊦ x ∈ S ⟶ ⊦ f x ∈ S map f</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,S,x,p] filterI existsI x andI p refl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mapE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,f:tm A ⟶ tm B,S,x,C} ⊦ x ∈ S map f ⟶ ({a} ⊦ a∈S ⟶ ⊦ x ≐ f a ⟶ ⊦C) ⟶ ⊦ C</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,S,x,C,p,q] p filterE existsE [a,r] q a (r andEl) (r andEr)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Extensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?TypedUniversalQuantificationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">extensionality</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T:tm ℘A} ⊦(∀[x:tm A] x∈S ⇔ x∈T) ⟶ ⊦ S≐T</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">extensionalityI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T:tm ℘A} ({x}⊦x∈S⟶⊦x∈T) ⟶ ({x}⊦x∈T⟶⊦x∈S) ⟶ ⊦ S≐T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,f,g] extensionality (forallI [x] equivI ([p] f x p) ([q] g x q))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eq_in_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} ⊦ S≐T ⟶ ⊦ x∈S ⟶ ⊦ x∈T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p,q] p congP ([u]x∈u) q</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eq_in_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} ⊦ S≐T ⟶ ⊦ x∈T ⟶ ⊦ x∈S</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p,q] p sym congP ([u]x∈u) q</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FiniteSets</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?DisjunctionND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">singleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A ⟶ tm ℘A</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x] filter [u] u≐x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">%</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">singletonI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x: tm A} ⊦ x ∈ %x</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x] filterI refl</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">singletonE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x,y: tm A} ⊦ x ∈ %y ⟶ ⊦ x≐y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">uopair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A ⟶ tm A ⟶ tm ℘A</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y] filter [u]u≐x ∨ u≐y</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">,,</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopairI_left</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x,y: tm A} ⊦ x ∈ x,,y</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y] filterI (refl orIl)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopairI_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x,y: tm A} ⊦ y ∈ x,,y</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y] filterI (refl orIr)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">uopairE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x,y,u:tm A,C} ⊦ u ∈ x,,y ⟶ (⊦u≐x ⟶ ⊦ C) ⟶ (⊦u≐y ⟶ ⊦ C) ⟶ ⊦C</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y,u,C,p,q,r] p filterE orE q r</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Subset</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Extensionality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?ImplicationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">subset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm ℘A ⟶ tm ℘A ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="w">	</span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] ∀[x] x∈S ⇒ x∈T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⊆</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">subsetI</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T} ({x: tm A} ⊦x∈S ⟶ ⊦ x∈T) ⟶ ⊦ S⊆T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,f] forallI [x] impI [p] f x p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">subsetE</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} ⊦ S⊆T ⟶ ⊦ x∈S ⟶ ⊦ x∈T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p,q] p forallE x impE q</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S:tm ℘A} ⊦ S⊆S</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] subsetI [x,p]p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,R,S,T:tm ℘A} ⊦ R⊆S ⟶ ⊦ S⊆T ⟶ ⊦ R⊆T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">               </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,R,S,T,p,q] subsetI [x,r] subsetE q (subsetE p r)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_antisym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T:tm ℘A} ⊦ S⊆T ⟶ ⊦ T⊆S ⟶ ⊦ S≐T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,p,q] extensionalityI ([x,r] subsetE p r) ([x,r] subsetE q r)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FullSet</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?TruthND</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">full</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm ℘A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] filter [x] true</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">#</span><span class="w"> </span><span class="ss">fullset</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fullI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x} ⊦ x ∈ full A </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">  		  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x] filterI trueI</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EmptySet</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?FalsityND</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm ℘A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] filter [x] false</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">#</span><span class="w"> </span><span class="ss">∅</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">emptyE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x} ⊦ x ∈ empty A ⟶ ↯</span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">  			 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,p] p filterE falseE</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  			 </span><span class="p">#</span><span class="w"> </span><span class="ss">emptyE</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Complement</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?NegationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">compl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm ℘A ⟶ tm ℘A </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] filter [x] ¬ x∈S </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">#</span><span class="w"> </span><span class="ss">∁</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">complI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,x:tm A} (⊦x∈S ⟶ ↯) ⟶ ⊦ x∈∁S</span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">  			 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,x,p] filterI notI p</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  			 </span><span class="p">#</span><span class="w"> </span><span class="ss">complI</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">complE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,x:tm A} ⊦ x∈∁S ⟶ ⊦ x∈S ⟶ ↯</span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">  			 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,x,p,q] p filterE notE q </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">complE</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Intersection</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?ConjunctionND</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">inter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm ℘A ⟶ tm ℘A ⟶ tm ℘A</span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">  			</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] filter [x] x∈S ∧ x∈T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  			</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">∩</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">interEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} ⊦ x ∈ S∩T ⟶ ⊦ x∈S</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  				 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T, x, p] p filterE andEl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">interEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} ⊦ x ∈ S∩T ⟶ ⊦ x∈T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  				 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p] p filterE andEr</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">interI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} ⊦ x∈S ⟶ ⊦ x∈T ⟶ ⊦ x ∈ S∩T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  				 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p,q] filterI andI p q</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Union</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?DisjunctionND</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm ℘A ⟶ tm ℘A ⟶ tm ℘A </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">  				</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] filter [x] x∈S ∨ x∈T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  				</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">∪</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">unionIl</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} ⊦ x∈S ⟶ ⊦ x ∈ S∪T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p] filterI (p orIl)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">unionIr</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A} ⊦ x∈T ⟶ ⊦ x ∈ S∪T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,p] filterI (p orIr)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">unionE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,x:tm A,C} ⊦ x ∈ S∪T ⟶ (⊦x∈S⟶⊦C) ⟶ (⊦x∈T⟶⊦C) ⟶ ⊦ C</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  			 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,x,C,p,q,r] p filterE orE q r</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BigIntersection</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?ImplicationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?TypedUniversalQuantificationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">biginter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm ℘℘A ⟶ tm ℘A </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">    			 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K] filter [x] ∀[S] S∈K ⇒ x∈S </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    			 </span><span class="p">#</span><span class="w"> </span><span class="ss">⋂</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">45</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">biginterI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,x:tm A} ({S}⊦S∈K⟶⊦x∈S) ⟶ ⊦ x∈⋂K </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">  				  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,x,f] filterI (forallI [S] impI [p] f S p)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">biginterE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,x:tm A,S} ⊦ x∈⋂K ⟶ ⊦S∈K ⟶ ⊦x∈S</span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">  				  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,x,S,p,q] p filterE forallE S impE q</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BigUnion</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?ConjunctionND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?TypedExistentialQuantificationND</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">bigunion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm ℘℘A ⟶ tm ℘A </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">  				 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K] filter [x] ∃ [S] S∈K ∧ x∈S </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  				 </span><span class="p">#</span><span class="w"> </span><span class="ss">⋃</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">45</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigunionI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,S,x:tm A} ⊦ S∈K ⟶ ⊦ x∈S ⟶ ⊦ x∈⋃K </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">  				  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,S,x,p,q] filterI (existsI S (andI p q))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigunionE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,x:tm A,C} ⊦ x∈⋃K ⟶ ({S}⊦S∈K⟶⊦x∈S⟶⊦C) ⟶ ⊦ C</span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">  				  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,x,C,p,f] p filterE existsE [S,rs] f S (rs andEl) (rs andEr)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Lattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Extensionality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subset</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FullSet</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EmptySet</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Complement</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Intersection</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Union</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BigIntersection</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BigUnion</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubsetRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">subset_full</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S} ⊦ S ⊆ full A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] subsetI [x,p] fullI</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S} ⊦ empty A ⊆ S</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">               </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] subsetI [x,p] (emptyE p) inconE</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">subset_union_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T: tm ℘A} ⊦ S ⊆ S ∪ T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] subsetI [x,p] unionIl p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_union_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T: tm ℘A} ⊦ T ⊆ S ∪ T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] subsetI [x,p] unionIr p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_union_lub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,C: tm ℘A} ⊦ S ⊆ C ⟶ ⊦ T ⊆ C ⟶ ⊦ S ∪ T ⊆ C</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                   </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,C,s,t] subsetI [x,st] unionE st ([xs] subsetE s xs) ([xt] subsetE t xt)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="vc">subset_inter_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T: tm ℘A} ⊦ S ∩ T ⊆ S</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] subsetI [x,p] interEl p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_inter_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T: tm ℘A} ⊦ S ∩ T ⊆ T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] subsetI [x,p] interEr p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_inter_glb</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T,C: tm ℘A} ⊦ C ⊆ S ⟶ ⊦ C ⊆ T ⟶ ⊦ C ⊆ S ∩ T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                   </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,C,s,t] subsetI [x,xc] interI (subsetE s xc) (subsetE t xc)</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">subset_bigunion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,S: tm ℘A} ⊦ S ∈ K ⟶ ⊦ S ⊆ ⋃ K</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,S,p] subsetI [x,q] bigunionI p q</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">subset_bigunion_lub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,C: tm ℘A} ({S} ⊦ S ∈ K ⟶ ⊦ S ⊆ C) ⟶ ⊦ ⋃ K ⊆ C</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,C,f] subsetI [x,p] bigunionE p [S,q,r] subsetE (f S q) r</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">subset_biginter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,S: tm ℘A} ⊦ S ∈ K ⟶ ⊦ ⋂ K ⊆ S</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,S,p] subsetI [x,q] biginterE q p</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">subset_biginter_glb</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,K,C: tm ℘A} ({S} ⊦ S ∈ K ⟶ ⊦ C ⊆ S) ⟶ ⊦ C ⊆ ⋂ K</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,K,C,f] subsetI [x,p] biginterI [S,q] subsetE (f S q) p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">subset_compl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,T: tm ℘A} ⊦ S⊆T ⟶ ⊦ ∁T⊆∁S</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">               </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T,p] subsetI [x,q] complI [r] complE q (subsetE p r)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ComplementRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubsetRules</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">compl_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ∁(empty A) ≐ full A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] extensionalityI ([x,p] fullI) ([x,p] complI [q] emptyE q)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">compl_full</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ∁(full A) ≐ empty A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] extensionalityI ([x,p] (complE p fullI) inconE) ([x,p] (emptyE p) inconE)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">compl_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, S,T: tm ℘A} ⊦ ∁(S∪T) ≐ ∁S ∩ ∁T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] extensionalityI</span>
<span class=" -MMT_ObjectExpression">                    ([x,p] interI (complI [q] complE p (unionIl q))</span>
<span class=" -MMT_ObjectExpression">                                  (complI [q] complE p (unionIr q))</span>
<span class=" -MMT_ObjectExpression">                    )</span>
<span class=" -MMT_ObjectExpression">                    ([x,p] complI [q,C] unionE q ([r] complE (interEl p) r inconE)</span>
<span class=" -MMT_ObjectExpression">                                                 ([r] complE (interEr p) r inconE)</span>
<span class=" -MMT_ObjectExpression">                    )</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">inter_compl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S} ⊦ S ∩ ∁S ≐ empty A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] extensionalityI ([x,p] (complE (interEr p) (interEl p)) inconE)</span>
<span class=" -MMT_ObjectExpression">                                      ([x,p] (emptyE p) inconE)</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">compl_not</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,x:tm A} ⊦¬x∈S ⟶ ⊦x∈∁S</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,x,p] complI [q] p notE q</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?PLND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">union_compl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S} ⊦ S ∪ ∁S ≐ full A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] extensionalityI</span>
<span class=" -MMT_ObjectExpression">                   ([x,p] fullI)</span>
<span class=" -MMT_ObjectExpression">                   ([x,p] tnd orE ([q] unionIl q) ([q] unionIr (compl_not q)))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">compl_tnd</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,S,x: tm A} ⊦ x∈S ∨ x∈∁S</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,x] (eq_in_right union_compl fullI) filterE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">compl_inter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, S,T: tm ℘A} ⊦ ∁(S∩T) ≐ ∁S ∪ ∁T</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] extensionalityI</span>
<span class=" -MMT_ObjectExpression">                    ([x,p] compl_tnd orE ([q] compl_tnd orE ([r] complE p (interI q r) inconE) ([r] unionIr r)) ([r] unionIl r))</span>
<span class=" -MMT_ObjectExpression">                    ([x,p] unionE p ([q] subsetE (subset_compl subset_inter_left) q)</span>
<span class=" -MMT_ObjectExpression">                                    ([q] subsetE (subset_compl subset_inter_right) q)</span>
<span class=" -MMT_ObjectExpression">                    )</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">compl_compl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, S:tm ℘A} ⊦ ∁∁S ≐ S</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] extensionalityI ([x,p] compl_tnd orE ([q] q) ([q] complE p q inconE)) ([x,p] complI [q] complE q p)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerSFOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞latin:/?SFOLEQND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FiniteSets</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Map</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubsetRules</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ComplementRules</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PredicateSubtypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subtyping</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubtypeInjections</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">predsub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A ⟶ prop) ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⦃</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⦄</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10050</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P, x:tm A}  ⊦ P x ⟶ tm ⦃P⦄</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">predsub_sub</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P: tm A ⟶ prop} ⊦ ⦃P⦄ ⪽ A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">predsub_prop</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P: tm A ⟶ prop, x: tm ⦃P⦄} ⊦ P (x↑predsub_sub)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleProductTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpprod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">×</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentProductTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">depprod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A ⟶ tp) ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">Σ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?SimpleProductTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpprod</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] Σ [x: tm A] B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftDependentProductTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">softprod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ (term ⟶ tp) ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">Σ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleProducts</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleProductTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simppair</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A ⟶ tm B ⟶ tm A × B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simppi1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A × B ⟶ tm A</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">₁</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simppi2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A × B ⟶ tm B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">₂</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">compute1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,a:tm A,b:tm B} ⊦ (a,b)₁ ≐ a</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">compute2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,a:tm A,b:tm B} ⊦ (a,b)₂ ≐ b</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentProducts</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentProductTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Transport</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">deppair</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B, a: tm A} tm B a ⟶ tm Σ B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">deppi1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B: tm A ⟶ tp} tm Σ B ⟶ tm A </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">₁</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">deppi2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B, u: tm Σ [x: tm A] B x} tm B (u₁)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">₂</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">compute1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B, a: tm A, b} ⊦ ((a,b):tm Σ B)₁ ≐ a</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// compute2 : {A, B: tm A ⟶ tp, a, b} ⊦ (a,b: tm Σ B)₂↑(compute1 congTp B) ≐ b❘role Simplify❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedProducts</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pair</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term ⟶ term</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">₁</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">₂</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">compute1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} ⊦ (a,b)₁ ≐ a</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">compute2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} ⊦ (a,b)₂ ≐ b</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedSimpleProducts</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedProducts</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleProductTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fun_typing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,a,b} ⊦ a⦂A ⟶ ⊦ b⦂B ⟶ ⊦ (a,b) ⦂ A × B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedDependentProducts</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedProducts</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftDependentProductTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fun_typing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,a,b} ⊦ a⦂A ⟶ ⊦ b⦂(B a) ⟶ ⊦ (a,b) ⦂ Σ A B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleProductsExpand</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleProducts</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">expand</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,u:tm A × B} ⊦ (u₁,u₂) ≐ u</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentProductsExpand</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentProducts</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">expand</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B, u:tm Σ[x:tm A] B x} ⊦ (u₁,u₂) ≐ u</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedProductsExpand</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedProducts</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">expand</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{u} ⊦ (u₁,u₂) ≐ u</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleProductsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleProducts</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,u,v:tm A × B} ⊦ u₁≐v₁ ⟶ ⊦ u₂≐v₂ ⟶ ⊦ u≐v</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentProductsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentProducts</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,u,v:tm Σ[x:tm A] B x} {p: ⊦ u₁≐v₁} ⊦ u₂↑(p congTp B)≐v₂ ⟶ ⊦ u≐v</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedProductsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedProducts</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{u,v} ⊦ u₁ ≐ v₁ ⟶ ⊦ u₂≐v₂ ⟶ ⊦ u≐v</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">Strings</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">string</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize string rules/api/uom?StandardString</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">concat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string ⟶ string ⟶ string</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize concat rules/api/uom?StringOperations/Concat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;test&quot;</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CTTQE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Strings</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UndefinedTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">Quotation</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">ε</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize (tm Quotation) rules/api/uom?TermLiteral</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">quote</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⌈</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⌉</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10050</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">eval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm ε ⟶ {a:tp} tm a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⟦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">%</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⟧</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10050</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">const</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string ⟶ tp ⟶ tm ε</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">const</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">var</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string ⟶ tp ⟶ tm ε</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">application</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm ε ⟶ tm ε ⟶ tm ε</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">app</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">abstraction</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string ⟶ tp ⟶ tm ε ⟶ tm ε</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">abs</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">%</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">quotation</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm ε ⟶ tm ε</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">quo</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// rule ComputeApply❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Example</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CTTQE</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypeEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">tpeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EqualityND </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">term</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">equal</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≛</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w">   </span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Transport</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEqualityND</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">congTp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, X,Y} ⊦ X≐Y ⟶ {B: tm A ⟶ tp} ⊦ B X ≛ B Y</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">congTp</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">transport</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} ⊦ A ≛ B ⟶ tm A ⟶ tm B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">↑</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">70</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">transport_refl</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X: tm A} ⊦ X↑tpeq/refl ≐ X</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Doesn&#39;t typecheck:</span>
<span class="cm">  transport_trans: {A,B,C, X: tm A, p:⊦ A ≛ B, q: ⊦ B ≛ C} ⊦ X↑p↑q ≐ X↑(tpeq/eq/trans p q)❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TypeErasTerms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] term</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">TypeErasEquality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?SoftTypedEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypeErasTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y] x≐y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// View currently not total</span>
<span class="cm">view TypeErasSimpleFunctions : ?SimpleFunctions → ?SoftTypedSimpleFunctions =</span>
<span class="cm">  include ?TypeErasTerms❙</span>
<span class="cm">  include ?TypeErasEquality❙</span>
<span class="cm">  simpfun = [A,B] A → B❙</span>
<span class="cm">  simplambda = [A,B,F] λ F❙</span>
<span class="cm">  simpapply = [A,B,F,X] F @ X❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">// View currently not total</span>
<span class="cm">view TypeErasDependentFunctions : ?DependentFunctions → ?SoftTypedDependentFunctions =</span>
<span class="cm">  include ?TypeErasTerms❙ </span>
<span class="cm">  include ?TypeErasEquality❙</span>
<span class="cm">  depfun = [A,B] Π A B❙</span>
<span class="cm">  deplambda = [A,B,F] λ F❙</span>
<span class="cm">  depapply = [A,B,F,X] F @ X❙</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">latin:/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UndefinedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">defined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">↓</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">70</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">strict_equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≚</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UndefinedTypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">defined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">↓</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">70</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">strict_equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A ⟶ tm A ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≚</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UndefinedSoftTypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">defined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ tp ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">↓</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Coproducts</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://Coproducts.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">Coprod</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">⨁</span><span class="si">…</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">inl</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">↪l</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">inr</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">r↩</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">coprodmatch</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">match</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">3</span><span class="ss">|</span><span class="si">…</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">%I5</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">coprodmatch2</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">match</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">3</span><span class="ss">|</span><span class="si">…</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9001</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">FuncaddSymbol</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">Addfunc</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">⊕</span><span class="si">…</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CoprodTerm </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?inlTerm </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?inrTerm </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MatchTerm </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MatchComp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// rule rules?MatchEquality ❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CoprodSubType </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedCoproduct</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?TermsTypesKinds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">FuncaddRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?AddFuncComp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFCoprod</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FuncaddSymbol </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FuncaddRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedCoproduct </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?LF </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Datatypes</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://datatypes.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ListSymbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">ListType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">List</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-500</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">nil</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">ls</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ls</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-500</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">append</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">++</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">map</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ListRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ListTypeRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ListVariance </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ListCheckRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?AppendType </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MapType </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MapComp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFLists</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ListSymbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ListRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?LF </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LetSymbol</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">Let</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Let</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LetRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LetRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFLet</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LetSymbol </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LetRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?LF </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubSymbol</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">substitute</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">sub</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SubRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFSub</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubSymbol </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?LF </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Equality</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://Equality.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">eqtype</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≐</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">on</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-500</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">refl</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">ind</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ind</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V2</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V3</span><span class="w"> </span><span class="ss">⟹</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EqFormation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ReflIntro </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EqIndElim </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EqIndComp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?TermsTypesKinds </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?LF </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://FiniteTypes.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?LambdaPi </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">emptyType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∅</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">emptyFun</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∅f</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-900</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">UNIT</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">unite</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">★</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?Typed </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?Kinded </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EmptyTypeFormation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnitTypeFormation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnitIntro </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EmptyElim </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnitIrrelevance </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubTypedRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EmptySub </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EmptyFunComputation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EnumSymbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">ENUM</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ENUM</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">CASE</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">CASE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EnumRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?NatLiteralsOnly </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubTypedRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EnumFormation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CaseIntroduction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CaseTyping </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CaseSubtyping </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EnumCoprodRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EnumRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://gl.mathhub.info/MMT/LFX/Coproducts?TypedCoproduct </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EnumComputation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CaseComputation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DefinedUnitRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnitComputation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnitElemComputation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFFiniteBase</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EnumSymbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?LF </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DefinedUnitRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EnumRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?Ded </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?NatRels </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFFinite</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFFiniteBase </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EnumCoprodRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://gl.mathhub.info/MMT/LFX/Coproducts?LFCoprod </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/IntersectionTypes</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://LFIntersectionTypes.LFX.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lfrules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">typeintersection</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">⊓</span><span class="si">…</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9999</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?TermsTypesKinds </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntersectionTypeRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntersectionTyping </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntersectionSubtypeRuleLeft </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntersectionSubtypeRuleRight </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFIntersectionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?LambdaPi </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?PiType</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?PiTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule lfrules?ApplyTerm❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?LambdaTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Beta</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Extensionality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?PiCongruence</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?LambdaCongruence</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Solve</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?SolveType</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?TheoryTypeWithLF</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?PiIntroduction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?ForwardPiElimination</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?BackwardPiElimination</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?LFHOAS</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ApplyIntersection </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Records</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://Records.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules2</span><span class="w"> </span><span class="l l-URI">scala://LFX.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://cds.omdoc.org/urtheories?ModExp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="vc">Rectype</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">{&#39;</span><span class="w"> </span><span class="si">L1Td</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">&#39;}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Recexp</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">[&#39;</span><span class="w"> </span><span class="si">L1Dd</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">&#39;]</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-12000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Getfield</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">L2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ModelsOf</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Mod</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// ModelsOfUnary # Mod 1 prec -999 ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// AsInstance # AsInstance 1 prec -1000 ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">RecordMerge</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">⊕</span><span class="si">…</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?GetFieldComp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// rule rules?GetFieldInType ❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?GetfieldTerm </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecEquality </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecExpCongruence </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecordExpTerm </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecordTypeTerm </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecSubtype </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecTypeCheck </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecTypeCongruence </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?CanonicalSolution</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// rule rules?ModelsRule ❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ModelsInference </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ModelsChecking </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Instance </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ExtendInstance </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecordMergeInference </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MergeCheck </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedRecords</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?TermsTypesKinds </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFRecords</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?LF </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedRecords </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Sigma</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://Sigma.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">Sigma</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">Σ</span><span class="w"> </span><span class="si">V1T</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">Product</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">×</span><span class="si">…</span><span class="w">           </span><span class="k">prec</span><span class="w">  </span><span class="mi">-9990</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">Tuple</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">⟨</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">⟩</span><span class="w">				</span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">Projl</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">πl</span><span class="w"> </span><span class="si">1</span><span class="w">						</span><span class="k">prec</span><span class="w"> </span><span class="mi">-900</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">Projr</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">πr</span><span class="w"> </span><span class="si">1</span><span class="w">						</span><span class="k">prec</span><span class="w"> </span><span class="mi">-900</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SigmaTerm </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TupleTerm </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Projection1Term </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Projection2Term </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SigmaType </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SigmaEquality </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TupleEquality </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Projection1Beta </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Projection2Beta </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SigmaSubtype </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedSigma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?TermsTypesKinds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFSigma</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSigma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?LF </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Subtyping</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://Subtyping.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PiRule</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFWithVariance</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?LF </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PiRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SubSymbol</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtypeOf</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%n</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9996</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SubRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SubUniverseRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SubUniverseType </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SubtypeOfRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SubtypeOfTypeRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFPowerTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubSymbol </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SubRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFWithVariance </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">JudgmentSymbol</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtypeJudge</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9995</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">JudgmentRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SubJudgUniverseType </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// rule rules?SubJudgRule ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFSubJudgment</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?JudgmentSymbol </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?JudgmentRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFWithVariance </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PredSubSymbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">predsubtp</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⟨</span><span class="w"> </span><span class="si">V1T</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⟩</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10001</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">PredOf</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">PredOf</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">PredSubRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Predsubtype </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Predsubrule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PredsubTyping </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PredOfTerm </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFPredSub</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PredSubSymbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PredSubRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFWithVariance </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">AllSubtypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// include ?SubSymbol ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// include ?SubRules ❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?JudgmentSymbol </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?JudgmentRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PredSubSymbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PredSubRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFSubtyped</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSubtypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFWithVariance </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://TypedHierarchy.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lf</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">TypeLevel</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">𝒰</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">UnspecifiedTypeLevel</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">𝒰</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-999</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TypeLevelUniverse </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TypeLevelSubRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LevelType </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedHierarchy</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://cds.omdoc.org/urtheories?ModExp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?Typed </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?Kinded </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?NatLiteralsOnly </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LevelComputation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFHierarchy</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedHierarchy </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?PLF </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiHierarchy</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LambdaHierarchy</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Polymorphism</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PolymorphismLambda </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/WTypes</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://WTypes.LFX.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">wtype</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">W</span><span class="w"> </span><span class="si">V1T</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">sup</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sup</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">⟹</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-8000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rec</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rec</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V2</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">V3</span><span class="w"> </span><span class="ss">⟹</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">6</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-8000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">=</span><span class="w">   </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?WTypeFormation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SupIntroduction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?WEquality </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecElimination </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecComputation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// rule info.kwarc.mmt.LFX.WTypes.supEquality ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">WTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?LF </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Symbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFW</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?WTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://gl.mathhub.info/MMT/LFX/Finite?LFFinite </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Inductive</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFW </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://gl.mathhub.info/MMT/LFX/Sigma?LFSigma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InductiveTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InductiveDefs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Quote-Eval</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Symbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">Construction</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℰ</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">quoteOp</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⌜</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⌝</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">evalOp</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|⌜</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⌝|</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1100</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">unquoteOp</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⌞</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⌟</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://foswiki.cs.uu.nl/foswiki/IFIP21/Goteborg/MMT-tutorial-final</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Types</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Logic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Equality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A ⟶ tm A ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X:tm A} ⊦ X = X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X,Y:tm A} ⊦ X = Y ⟶ ⊦ Y = X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X,Y,Z:tm A} ⊦ X = Y ⟶ ⊦ Y = Z ⟶ ⊦ X = Z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,X,Y,F:tm A ⟶ tm B} ⊦ X = Y ⟶ ⊦ (F X) = (F Y)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">STT</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⇒</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">abstract</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (tm A ⟶ tm B) ⟶ tm (A ⇒ B)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">  </span><span class="vc">apply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm (A ⇒ B) ⟶ tm A ⟶ tm B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">beta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm A ⟶ tm B,X} ⊦ (λ F) @ X = (F X)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Eta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?STT</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm (A ⇒ B)} ⊦ (λ [x: tm A] (F @ x)) = F</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Extensionality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?STT</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ext</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F,G: tm (A ⇒ B)} ({x: tm A} ⊦ F @ x = G @ x) ⟶ ⊦ F = G</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">ext</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//  view EtaExt : ?Eta -&gt; ?Extensionality =</span>
<span class="cm">  // include mmtid ?STT❙</span>
<span class="cm">  eta = [A,B,F] ext [x] beta❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">List</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?STT</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">list</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">nilOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm &lt;A&gt;</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">nil</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: tp} tm A ⟶ tm &lt;A&gt; ⟶ tm &lt;A&gt;</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fold</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm B ⟶ (tm A ⟶ tm B ⟶ tm B) ⟶ tm &lt;A&gt; ⟶ tm B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fold_nil</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,N,C} ⊦ fold A B N C nil = N</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fold_cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,N,C,X,L} ⊦ fold A B N C (X+L) = C X (fold A B N C L)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span>
<span class="w">  </span><span class="vc">map</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm (A ⇒ B) ⟶ tm &lt;A&gt; ⟶ tm &lt;B&gt;</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f] fold A &lt;B&gt; nil ([a,bs] (f@a)+bs)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">append</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm &lt;A&gt; ⟶ tm &lt;A&gt; ⇒ &lt;A&gt;</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] fold A (&lt;A&gt; ⇒ &lt;A&gt;) (λ[x]x) ([a,f] λ[l]a+(f@l))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">flatten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm &lt; &lt;A&gt; &gt; ⟶ tm &lt;A&gt;</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] fold &lt;A&gt; &lt;A&gt; nil ([l,r] (append A l) @ r)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monad</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?STT</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">operator</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">M</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A ⟶ tm M A</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">return</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bind</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm M A ⟶ tm (A ⇒ M B) ⟶ tm M B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="vc">neutral_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm (A ⇒ M B)}{X: tm A} ⊦ (return X) &gt; F = F @ X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutral_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,m: tm M A} ⊦ m &gt; (λ [x] return x) = m</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C, F: tm (A ⇒ M B), G: tm (B ⇒ M C),m: tm M A} ⊦ (m &gt; F) &gt; G = m &gt; (λ[x]F @ x &gt; G)</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">ListMonad</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Monad</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?List</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="vc">operator</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">unit</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] [x] x+nil</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bind</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B][l,f] (flatten B) (map f l)</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// neutral_left = ...❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// neutral_right = ...❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// assoc = ...❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MonadPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?STT</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monad</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// more stuff here❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/ijcar</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">../urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat⟶nat </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize nat  rules/api/uom?StandardNat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize zero rules/api/uom?Arithmetic/Zero</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize succ rules/api/uom?Arithmetic/Succ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Bool</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">../urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">proof</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool ⟶ type </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DHOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">../urtheories?LF</span><span class="w">  </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?ShallowPolymorphism</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} a ⟶ a ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Double</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">double</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">double_zero</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ double 0 = 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">double_succ</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ double(x&#39;) = (double x)&#39;&#39;</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TopologicalArgumentationTheory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">K</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">B</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">box</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop  ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">□</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">world</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">argument</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">attacks</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">argument ⟶ argument ⟶ type </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">←</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">in</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">world ⟶ argument ⟶ type </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">‍∈</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">holds</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">world ⟶ prop ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⊧</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Fix</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">argument ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">holds_conj</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,F,G} w ⊧ F ⟶ w ⊧ G ⟶ w ⊧ F ∧ G</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">holds_disj1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,F,G} w ⊧ F ⟶ w ⊧ F ∨ G</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">holds_disj2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,F,G} w ⊧ G ⟶ w ⊧ F ∨ G</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">holds_K</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,F} ({v} v ⊧ F) ⟶ w ⊧ K F</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">holds_box</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,F,T} w ‍∈ T ⟶ ({v} v ‍∈ T ⟶ v ⊧ F) ⟶ w ⊧ □ F</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">holds_B</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,F,T} w ‍∈ T ⟶ Fix T ⟶ ({v} v ‍∈ T ⟶ v ⊧ F) ⟶ w ⊧ B F</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   An abstraction over the rational numbers and the arithmetic operations.❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Numbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">sort</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort ⟶ type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">prop</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} tm S ⟶ tm S ⟶ prop     </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="ss">_</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w">  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} (tm S ⟶ prop) ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class="w">  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="ss">_</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">ded</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ type  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ded</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w">  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">rat</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tmrat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm rat </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℚ</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ     </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_</span><span class="si">0</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">%D</span><span class="si">0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">170</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">one</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ     </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_</span><span class="si">1</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">_0 &#39;</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">%D</span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">two</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ     </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_</span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">_1 &#39;</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">%D</span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">add</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ ℚ  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">150</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">sub</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ ℚ  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">150</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neg</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ      </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">170</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ ℚ  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">·</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">155</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">div</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ ℚ  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">155</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">exp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ ℚ  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">160</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">power_example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded ∀x.∀y.∀z.x^(y+z)=x^y·x^z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rules</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Simplification rules for the rational numbers. ❙</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Numbers</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// addition ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">add_zero_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded _0 + x = x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">add_zero_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded x + _0 = x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">add_succ_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded x &#39; + y = (x+y)&#39;</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">add_succ_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded x + y&#39; = (x+y)&#39;</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// subtraction ❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">sub_add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded x-(y+z) = x-y-z  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">sub_zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded x - _0 = x  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// negation  ❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">neg_neg</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded -(-x) = x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neg_add</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded -(x+y) = -x + (-y) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">neg_zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded - _0 = _0 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// multiplication ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_zero_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded _0 · x = _0</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_zero_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded x · _0 = _0</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_one_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded _1 · x = x</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_one_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded x · _1 = x</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_succ_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded x&#39;·y = x + x · y</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_succ_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded x·y&#39; = x·y+y</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_add_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded (x+y)·z = x·z+y·z</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_add_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded x·(y+z) = x·y+x·z</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_sub_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded (x-y)·z = x·y-y·z</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_sub_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded x·(y-z) = x·y-x·z</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_neg_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded (-x)·y = -(x·y)</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mult_neg_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ded x·(-y) = -(x·y)</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// exponentiation ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exp_zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded x ^ _0 = _1</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exp_one</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded x ^ _1 = x</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exp_add</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded x^(y+z) = x^y·x^z  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exp_exp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded x^(y^z) = x^(y·z)  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">one_exp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ded _1 ^ x = _1 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exp_mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ded (x·y)^z = x^z·y^z  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   A sort of natural numbers and a big sum operator with notations for parsing and presentation.❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Sums</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Numbers</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">nat</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tmnat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm nat </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℕ</span><span class="w">  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">incl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">170</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100000000</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">sum</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ (ℕ ⟶ ℚ) ⟶ ℚ  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">       </span><span class="p">#</span><span class="w"> </span><span class="ss">Σ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">155</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">##</span><span class="w"> </span><span class="ss">Σ</span><span class="w"> </span><span class="ss">__</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">155</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">sum_example</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ded ∀m.∀n. Σ m to n ([i]$i)=($m·($m+ _1)-$n·($n+ _1))/ _2 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T regular bands and views between them</span>
<span class="cm">mostly following the wikipedia page on Bands</span>

<span class="cm">Notes: </span>
<span class="cm">- some names that were not given on Wikipedia are made up</span>
<span class="cm">- most views do not actually use (all of) the Band properties</span>
<span class="cm">- LeftX and RightX are stronger than X, not weaker</span>
<span class="cm">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Regular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">regular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ z∘x∘z∘y∘z ≐ z∘x∘y∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ z∘x∘z∘y ≐ z∘x∘y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,z} ⊦ z∘x∘z ≐ z∘x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightregular1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ x∘z∘y∘z ≐ x∘y∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightregular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{y,z} ⊦ z∘y∘z ≐ y∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T views for the three stages of regular band theories ❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Regular2LeftNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] congT leftregular1 [u]u∘z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2LeftRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] congT leftregular [u]u∘y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Regular2RightNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc5 (congT (trans3 assoc4R rightregular1 assoc) [u]z∘u) assoc4R</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2RightRegular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightRegular</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc4 (congT (trans assocR rightregular) [u] x∘u) assocR</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T normal bands ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">normal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ z∘(x∘y)∘z ≐ z∘(y∘x)∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftnormal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ z∘(x∘y) ≐ z∘(y∘x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightnormal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ (x∘y)∘z ≐ (y∘x)∘z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T views for the diamond of normal band theories (with semilattices at the bottom) ❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Normal2RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] congT leftnormal [u]u∘z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Normal2LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">normal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 assoc (congT rightnormal [u]z∘u) assocR</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">RightCommutative2Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] congT comm [u]z∘u</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftCommutative2Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] congT comm [u]u∘z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T views from regular to normal band theories ❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// zxzy = zxzyzxzy = zx yz zxzy = zxy zx zy = zxy xz zy = zxy zxy = zxy❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 (sym idempotent) _ idempotent</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftRegular2RightCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftRegular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">leftregular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,z] trans4 assoc leftnormal assocR (congT idempotent [u]u∘x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// xzyz = xzyz xzyz = x yz zxzyz = xy zxzyz = xyz zx yz = xyz xyz = xyz❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] trans3 (sym idempotent) _ idempotent</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightRegular2LeftCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightRegular</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftCommutative</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rightregular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[y,z] trans3 rightnormal assoc (congT idempotent [u]y∘u)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T rectangular bands (the axioms here already imply idempotency)❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Rectangular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rectangular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x∘y∘x ≐ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// provable ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rectangularAny</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ x∘y∘z ≐ x∘z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftsingular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x∘y ≐ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightsingular</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x∘y ≐ y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   binary arithmetic ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Binary</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">num</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// the number 0❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">num</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">b</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// double, i.e., append the digit 0❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">db</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">num ⟶ num</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">₀</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// double and increment, i.e., append the digit 1❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dbI</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">num ⟶ num</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">₁</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">num ⟶ num ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} n = n</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// successor and its rules❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">num ⟶ num</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ_zero</span><span class="p">:</span><span class="w">      </span><span class=" -MMT_ObjectExpression">b &#39; = b ₁ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ_db</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{n} n ₀ &#39; = n ₁ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ_dbI</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} n ₁ &#39; = n&#39;₀</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">b₁₁&#39; = b₁₀₀ </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">refl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// addition and its rules❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">num ⟶ num ⟶ num</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_zero_right</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} n + b = n               </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_zero_left</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{n} b + n = n               </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// these rules cannot be picked up by the SimplificationRuleGenerator yet❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_db_db</span><span class="p">:</span><span class="w">    </span><span class=" -MMT_ObjectExpression">{m,n} m ₀ + n ₀ = (m + n) ₀   </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// role Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_db_dbI</span><span class="p">:</span><span class="w">   </span><span class=" -MMT_ObjectExpression">{m,n} m ₀ + n ₁ = (m + n) ₁   </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// role Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_dbI_db</span><span class="p">:</span><span class="w">   </span><span class=" -MMT_ObjectExpression">{m,n} m ₁ + n ₀ = (m + n) ₁   </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// role Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_dbI_dbI</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{m,n} m ₁ + n ₁ = ((m + n) &#39;)₀</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// role Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/epa</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// --------------------------- base languages --------------------------- ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Propositions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Proofs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_OD">❘</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Terms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">term</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Types</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedTerms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">of</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ tp ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⦂</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Kinds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">kd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">KindedTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Kinds</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kd ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">tf</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tpk</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kd</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UntypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedLogic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w">         </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalPropositions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Proofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InternalTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∈</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">typesAsObjects</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SoftTypedTerms </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">of</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">in</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="k">total</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">typesAsPredicates</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SoftTypedTerms </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Propositions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">tp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">of</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,A] A X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// --------------------------- equality --------------------------- ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Equality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UntypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≐</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">congP</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x ≐ y ⟶ {P: term ⟶ prop} ⊦ P x ⟶ ⊦ P y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedEquality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedLogic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A ⟶ tm A ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≐</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">refl</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,x: tm A} ⊦ x ≐ x  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">%I2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">congP</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,  x,y} ⊦ x ≐ y ⟶ {P: tm A ⟶ prop} ⊦ P x ⟶ ⊦ P y</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">congP</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">congT</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,x,y} ⊦ x ≐ y ⟶ {T: tm A ⟶ tm B} ⊦ T x  ≐  T y </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">congT</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,x,y,p,T] p congP ([u] T x ≐ T u) refl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">sym</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, x,y: tm A} ⊦ x ≐ y ⟶ ⊦ y ≐ x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">sym</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y,p] p congP ([u]u≐x) refl</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, x,y,z: tm A} ⊦ x ≐ y ⟶ ⊦ y ≐ z ⟶ ⊦ x ≐ z</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">trans</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y,z,p,q] q congP ([u]x≐u) p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// --------------------------- function types --------------------------- ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">%R→</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">simplambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (tm A ⟶ tm B) ⟶ tm A → B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpapply</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A → B ⟶ tm A ⟶ tm B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpbeta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm A ⟶ tm B, X} ⊦ (λ F) @ X ≐ F X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentFunctionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">depfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A ⟶ tp) ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">Π</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="k">realize</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">simpfun</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] Π [x: tm A] B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DependentFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DependentFunctionTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">deplambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ({x: tm A} tm B x) ⟶ tm Π B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">depapply</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm Π B ⟶ {x: tm A} tm B x </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">depbeta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F:{x:tm A} tm B x, X} ⊦ (λ F) @ X ≐ F X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedEquality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term ⟶ term) ⟶ term</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term ⟶ term</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">beta</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F,X} ⊦ (λ F) @ X ≐ F X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedSimpleFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctionTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">fun_typing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F} ({x} ⊦ x⦂A ⟶ ⊦ (F x)⦂B) ⟶ ⊦ λ F ⦂ A → B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftDependentFunctionTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">softfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ (term ⟶ tp) ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">Π</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SoftTypedDependentFunctions</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftTypedFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SoftDependentFunctionTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fun_typing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F} ({x} ⊦ x⦂A ⟶ ⊦ (F x)⦂(B x)) ⟶ ⊦ λ F ⦂ Π A B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctionsEta</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F:tm A → B} ⊦ (λ[x] F @ x) ≐ F</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctionsExtensionality</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exten</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F,G:tm A → B} ({x} ⊦ F@x ≐ G@x) ⟶ ⊦ F≐G</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   A representation of homotopy type theory (HOTT) in MMT instantiated with LF-modulo.</span>
<span class="cm">     This is a Martin-Löf-style type theory with the univalence axiom.</span>
<span class="cm">     Simplification rules are used to offset artefacts produced by the representation.</span>
<span class="cm">     The representation follows the HOTT book (The Univalent Foundations Program, Institute for Advanced Study, Princeton, April 2013).❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HOTT</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">// The levels of the universe hierarchy (essentially the natural numbers). ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">level</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">first</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">level </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">next</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">level ⟶ level </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// The syntactic categories: LF-types for the HOTT types and terms at each level. ❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// tp L represents the types at level L. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">level ⟶ type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// univ L is the universe containing the types at level L. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">univ</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp (next L) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// if A:tp L, then tm A represents the terms of type A ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Equality judgments for types (at the same level) and terms (of the same type).</span>
<span class="cm">     These are registered as equality judgements by &quot;role Eq&quot;, which permits registering equality rules later. ❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">tp_equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L ⟶ tp L ⟶ type                  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L} tm A ⟶ tm A ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">≡</span><span class="w"> </span><span class="si">4</span><span class="w">  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The above encoding is not quite adequate</span>
<span class="cm">     (a) the cumulativity of the type hierarchy is not represented</span>
<span class="cm">     (b) the fact that every type at level L is also a term of type univ L is not captured. ❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Up and up take care of (a): they move types and terms up in the hierarchy. ❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">Up</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L ⟶ tp (next L) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Up</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">up</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L,A:tp L} tm A ⟶ tm (Up A) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">up</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// shift and unshift take care of (b): they convert between types and terms. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">shift</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L ⟶ tm (univ L) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">shift</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">unshift</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tm (univ L) ⟶ tp L </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">unshift</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Two equality axioms that make shift and unshift bijections.</span>
<span class="cm">     By registering them as simplification rules, the type checker becomes aware of the bijection. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">shift_unshift</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L,A: tp L} tp_equal L (unshift (shift A)) A  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">unshift_shift</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L,A: tm univ L} (shift (unshift A)) ≡ A      </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// The usual rules for equality. Some rules are omitted (congruence and equality of types) ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, X:tm A} X ≡ X                             </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, X:tm A, Y: tm A} X ≡ Y ⟶ Y ≡ X            </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, X:tm A, Y: tm A, Z: tm A} X ≡ Y ⟶ Y ≡ Z ⟶ X ≡ Z  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The development of HOTT type theory is now straightforward.</span>
<span class="cm">     The following follows A.2 in the HOTT book.</span>
<span class="cm">     Only the constructors and rules needed to state the univalence axiom are given.❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">Pi</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L} (tm A ⟶ tp L) ⟶ tp L                                 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Π</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lambda</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tm A ⟶ tp L} ({x:tm A} tm (B x)) ⟶ tm Π [x] B x   </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tm A ⟶ tp L} tm (Π [x: tm A] B x) ⟶ {x} tm (B x)  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">arrow</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L ⟶ tp L ⟶ tp L </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B] Π [x: tm A] B  </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⇒</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">id</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L} tm A ⇒ A  </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A] λ [x] x  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="ss">id</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comp</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tp L, C: tp L} tm A ⇒ B ⟶ tm B ⇒ C ⟶ tm A ⇒ C  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B,C] [f,g] λ [x:tm A] g @ (f @ x)  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="ss">∘</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Registering beta as a simplification rule has the effect that computation in HOTT is automated by MMT. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">beta</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tm A ⟶ tp L, F: {x: tm A} tm (B x), X: tm A} (λ F) @ X ≡ (F X) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">0</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w">  </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eta</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tm A ⟶ tp L, F: tm (Π [x: tm A] B x)} F ≡ λ [x: tm A] F @ x  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="vc">Sigma</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L} (tm A ⟶ tp L) ⟶ tp L                                    </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Σ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pair</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tm A ⟶ tp L} {x:tm A} tm (B x) ⟶ tm Σ [x] B x        </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pair</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi1</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tm A ⟶ tp L} tm (Σ [x: tm A] B x) ⟶ tm A             </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pi</span><span class="si">1</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi2</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tm A ⟶ tp L} {u:tm (Σ [x: tm A] B x)} tm (B (pi1 u)) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pi</span><span class="si">2</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prod</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L ⟶ tp L ⟶ tp L </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B] Σ [x: tm A] B  </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">×</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">conv_pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tm A ⟶ tp L, u: tm Σ [x] B x} u ≡ pair (pi1 u) (pi2 u) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">            </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// conv_pi1 and conv_pi2 are registered as simplification rules in the same way as beta. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">conv_pi1</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tm A ⟶ tp L, X: tm A, Y: tm (B X)} pi1 (pair L A B X Y) ≡ X  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">            </span><span class="cm">//  We have to give the implicit arguments of pair here to aid type reconstruction. </span>
<span class="cm">                (A better solution might be Twelf&#39;s abstraction behavior that adds the {B} binder.)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">            </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">0</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Note that conv_pi2 only type-checks because conv_pi1 is used as a simplification rule. ❙</span><span class="w">  </span>
<span class="w">  </span><span class="vc">conv_pi2</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tm A ⟶ tp L, X: tm A, Y: tm (B X)} pi2 (pair L A B X Y) ≡ Y  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">            </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">0</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// We omit the type constructors +, empty, unit, and nat. ❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">ident</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L} tm A ⟶ tm A ⟶ tp L  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">7</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">idrefl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, x:tm A, y: tm A} x ≡ y ⟶ tm x = y  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">idrefl</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">         </span><span class="cm">// The assumption x ≡ y is omitted in the HOTT book - derivable from congruence?</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">idelim</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L}</span>
<span class=" -MMT_ObjectExpression">           {C: {x: tm A, y: tm A, p: tm x = y} tp L}</span>
<span class=" -MMT_ObjectExpression">           {c: {z: tm A} tm (C z z (idrefl (refl z)))}</span>
<span class=" -MMT_ObjectExpression">           {a: tm A} {b: tm A} {p: tm a = b}</span>
<span class=" -MMT_ObjectExpression">           tm (C a b p) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="ss">idelim</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="si">7</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">idcomp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L}</span>
<span class=" -MMT_ObjectExpression">           {C: {x: tm A, y: tm A, p: tm x = y} tp L} </span>
<span class=" -MMT_ObjectExpression">           {c: {z: tm A} tm (C z z (idrefl (refl z)))}</span>
<span class=" -MMT_ObjectExpression">           {a: tm A}</span>
<span class=" -MMT_ObjectExpression">           tm (idelim C c a a (idrefl (refl a))) = (c a) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// An abbreviation for the identity type of two types (which requires converting the types to terms first). ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tident</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A:tp L, B: tp L} tp (next L)  </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B] (shift A) = (shift B) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">==</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Now the definitions of homotopy that lead to the univalence axiom. ❙</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="cm">// Definition 2.4.1 ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">homotopy</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B} tm A ⇒ B ⟶ tm A ⇒ B ⟶ tp L</span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B,f,g] Π [x: tm A] f @ x = g @ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">              </span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">∼</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">              </span>
<span class="w">  </span><span class="cm">// 2.4.10❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">isequiv</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tp L} tm A ⇒ B ⟶ tp L </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B,f] (Σ [g: tm B ⇒ A] f ∘ g ∼ id B) × (Σ [h: tm B ⇒ A] h ∘ f ∼ id A) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">#</span><span class="w"> </span><span class="ss">isequiv</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">              </span>
<span class="w">  </span><span class="cm">// 2.4.11❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivalence</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L} tp L ⟶ tp L ⟶ tp L  </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B] Σ [f: tm A ⇒ B] isequiv f  </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">              </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≃</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// We will need the reflexivity of homotopy below. ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Note that without beta as a simplification rule, this proof would have to use a complex subterm</span>
<span class="cm">     instead of (refl x).❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">≃_refl_aux</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L} tm (id A) ∘ (id A) ∼ (id A)  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A] λ [x: tm A] idrefl (refl x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">≃_refl</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L} tm A ≃ A  </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A] pair (id A) (pair  </span>
<span class=" -MMT_ObjectExpression">                   (pair (id A) (≃_refl_aux L A))</span>
<span class=" -MMT_ObjectExpression">                   (pair (id A) (≃_refl_aux L A))</span>
<span class=" -MMT_ObjectExpression">                 )</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Lemma 2.10.1 ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// This only type-checks because unshift_shift is used as a simplification rule. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">idtoeqv</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, A: tp L, B: tp L} tm A == B ⇒ (Up (A ≃ B)) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[L,A,B] λ [P] idelim</span>
<span class=" -MMT_ObjectExpression">                  ([a: tm univ L, b: tm univ L, p: tm a = b] Up ((unshift a) ≃ (unshift b)))</span>
<span class=" -MMT_ObjectExpression">                  ([z: tm univ L] up (≃_refl L (unshift z)))</span>
<span class=" -MMT_ObjectExpression">                  (shift A) (shift B) P</span>
<span class=" -MMT_ObjectExpression">                  </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Axiom 2.10.3 (univalence) ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Intuitively, this says (A == B) ≃ (A ≃ B) ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">univalence</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L,A: tp L, B} tm (isequiv (idtoeqv L A B)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// This is a consequence of univalence; proof to be added. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">≃_cong</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{L, M, P: tp L ⟶ tp M, A: tp L, B: tp L} tm (A ≃ B) ⟶ tm ((P A) ≃ (P B)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">finite</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://structuralfeatures.lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InductivelyDefinedTypes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LFXI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatExample </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">list_decls</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> a : type ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">nil</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a ⟶ list ⟶ list </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">reflect</span><span class="w"> </span><span class="nc">list1</span><span class="p">(</span><span class="nv">a: type</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">☞?InductivelyDefinedTypes/list_decls(a:type) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kd">inductive</span><span class="w"> </span><span class="nc">list1_unreflected</span><span class="p">(</span><span class="nv">a: type</span><span class="p">)</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">nil</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a ⟶ list ⟶ list </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">concat</span><span class="p">(</span><span class="nv">a:type</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">list1(a: type) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">list</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list1/list a⟶ list1/list a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">nil</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[l] l </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: a, f: list, l: list1/list a} list1/list a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, f, l] (list1/cons a x (f l)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="vc">single</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a : type} a ⟶ list1/list a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, x] list1/cons a x (list1/nil a) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">reverse</span><span class="p">(</span><span class="nv">a: type</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">list1(a:type) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">list</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list1/list a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">nil</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list1/nil a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: a, xs: list} list </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, xs] concat/list a xs (single a x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">length</span><span class="p">(</span><span class="nv">a: type</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">list1(a:type) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nats/n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">nil</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nats/z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: a, l:list} list </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, l] nats/s l </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// length: {a : type} list1/list a ⟶ nat/n ❘ = [a, l] (list1/induct/list a ([tp:type] nat/n) ([tp:type] nat/z) ([tp:type, x:tp, xs:nat/n] nat/s xs)) l ❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">record</span><span class="w"> </span><span class="nc">pair</span><span class="p">(</span><span class="nv">A: type, B: type</span><span class="p">)</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">		</span><span class="vc">a</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">A </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">b</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">B </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_type</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b] pair/Type a b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">record_term</span><span class="w"> </span><span class="nc">pairs</span><span class="p">(</span><span class="nv">A: type, B: type, x: A, y: B</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">pair(A, B) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">		</span><span class="vc">a</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">b</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">pair_term</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type, b: type} a ⟶ b ⟶ a * b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, x, y] pairs/Make a b x y </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">inductive</span><span class="w"> </span><span class="nc">vector</span><span class="p">(</span><span class="nv">a: type</span><span class="p">)</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">vec</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n: nat/n} type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">empty</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vec nat/z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">add</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n: nat/n} vec n ⟶ a ⟶ vec (nat/s n) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="cm">// ind_vec: {a: type, vecP: {a:type}{n: nat/n} type, emptyP: {a: type} (vecP a) nat/z, addP: {a: type}{n: nat/n}(vecP a) n ⟶ (a ⟶ (vecP a) (nat/s n)), n: nat/n} (vector/vec a) n ⟶ (vecP a) n ❘ = [a, vecP, emptyP, addP, n, l] ([ys] (vector/induct/vec a vecP emptyP addP n l) ys) ❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">zip</span><span class="p">(</span><span class="nv">a: type, b: type</span><span class="p">)</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">vector(a) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">vec</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n: nat/n} type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] vector/vec b n  ⟶ vector/vec (a*b) n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">empty</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vec nat/z </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[l] vector/empty (a*b) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">add</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n: nat/n} vec n ⟶ a ⟶ vec (nat/s n) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n, xs, x] vector/induct/vec b ([t, p] vector/vec (a*t) p) ([t] vector/empty (a*t)) ([t, p, ys, y] vector/add (a*t) p ys (pair_term a t x y)) (nat/s n) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">inductive</span><span class="w"> </span><span class="nc">list2</span><span class="p">()</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">nil</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type} list a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type} a ⟶ list a ⟶ list a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">length2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} list a ⟶ nat/n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">length2_nil</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type} DED (length2 a (nil a) EQ nat/z) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">length2_cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type, hd: a, tl: list a} DED length2 a (cons a hd tl) EQ nat/s (length2 a tl) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">inductive</span><span class="w"> </span><span class="nc">list3</span><span class="p">(</span><span class="nv">a : type</span><span class="p">)</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">nil</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{hd: a, tl:list} list  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∷</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">head</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{l:list, P:DED (l NEQ nil)} a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">head_cons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{hd: a, tl: list, P: DED (cons hd tl NEQ nil)} DED ((head (cons hd tl) P) EQ hd) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="vc">cons_nonempty</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type, hd:a, tl:list3/list a} DED (hd ∷ tl) NEQ list3/nil a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, hd, tl] list3/no_conf_cons_nil a hd tl </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// seems to be an universe issue</span>
<span class="cm">	head_cons: {a : type, hd: a, tl:list3/list a} DED (list3/head a (list3/cons a hd tl) (list3/no_conf_cons_nil a hd tl)) EQ hd ❘ = [a, hd, tl] list3/head_cons a hd tl (list3/no_conf_cons_nil a hd tl) ❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">inductive</span><span class="w"> </span><span class="nc">FM</span><span class="p">(</span><span class="nv">a: type</span><span class="p">)</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">fm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">gen</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a ⟶ fm </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">unit</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">fm </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">comp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">fm ⟶ fm ⟶ fm </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: fm, y: fm, z: fm} DED comp (comp x y) z EQ comp x (comp y z) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">unit_r</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: fm} DED comp x unit EQ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">unit_l</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: fm} DED comp unit x EQ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">finite</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://structuralfeatures.lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Hofstadter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?InductivelyDefinedTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kd">inductive</span><span class="w"> </span><span class="nc">hofstadter</span><span class="p">()</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">F</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">M</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">f</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n ⟶ F </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">m</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n ⟶ M </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">fToNat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">F ⟶ nat/n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">mToNat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">M ⟶ nat/n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="vc">minus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n ⟶ nat/n ⟶ nat/n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T A nice example demonstrating why this feature doesn&#39;t allow for mutually inductive definitions over a (non-mutually) inductively-defined type </span>
<span class="cm">		 This shouldn&#39;t be (and isn&#39;t) accepted by the feature, as the definition f_h refers to hofstadter/f (self or forward-reverences) are not (and can&#39;t be) expanded ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// inductive_definition hofstadter_mf_sequences() : hofstadter() ❘ =</span>
<span class="cm">	// 	F: type ❘ = nat/n  ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// 	M: type ❘ = nat/n  ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// 	fToNat: nat/n ⟶ nat/n ❘ = [u] u ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// 	mToNat: nat/n ⟶ nat/n ❘ = [u] u ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// 	f_h: nat/n ⟶ nat/n*nat/n ❘ = [u] (nat/induct/n (nat/n * nat/n) (pair_term nat/n nat/n (nat/s nat/z) (nat/s nat/z)) ([x] </span>
<span class="cm">	// 		(pair_term nat/n nat/n (pair/a nat/n nat/n x) ((nat/s (pair/a nat/n nat/n x)) - (hofstadter/mToNat (hofstadter/m (pair/b nat/n nat/n x))))))) u ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// 	f: nat/n ⟶ nat/n ❘ = [u] (nat/induct/n nat/n (nat/s nat/z) ([v] (pair/b nat/n nat/n (f_h v)))) u ❙</span><span class="w"></span>
<span class="w"> 	</span><span class="cm">// 	m_h: nat/n ⟶ nat/n*nat/n ❘ = [u] (nat/induct/n (nat/n * nat/n) (pair_term nat/n nat/n nat/z nat/z) ([x] </span>
<span class="cm">	// 		(pair_term nat/n nat/n (pair/a nat/n nat/n x) ((nat/s (pair/a nat/n nat/n x)) - (f (pair/b nat/n nat/n x)))))) u ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// 	m: nat/n ⟶ nat/n ❘ = [u] (nat/induct/n nat/n nat/z ([v] (pair/b nat/n nat/n (m_h v)))) u ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// ❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">finite</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://structuralfeatures.lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ur</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info?MMTURILexer</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFXI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?DHOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞lfx:?LFHierarchy</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InductiveTypes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InductiveDefinitions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InductiveMatch</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InductiveProofDefinitions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Reflections</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Records</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RecordDefinitions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">finite</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://structuralfeatures.lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ur</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">NatManually</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?DHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">induct_n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{N:type,Z:N,S:N⟶N} n ⟶ N </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">induct_z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{N:type,Z:N,S:N⟶N} DED (induct_n N Z S) z EQ Z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">induct_s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{N:type,Z:N,S:N⟶N,X:n} DED (induct_n N Z S) (s X) EQ S ((induct_n N Z S) X) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">induct_s</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">p_n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">p_z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">p_n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">p_s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">p_n ⟶ p_n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f][x] s (f x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">p_induct_n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ p_n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">induct_n p_n p_z p_s </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">p_induct_z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DED (induct_n p_n p_z p_s z) EQ p_z </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">induct_z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">p_induct_s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X:n} DED (induct_n p_n p_z p_s (s X)) EQ p_s (induct_n p_n p_z p_s X) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">            </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X] induct_s X </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">N_n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] DED p_induct_n x z EQ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">N_z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">N_n z</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">p_induct_z CONG [f:p_n] f z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">N_s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X:n,hX: N_n X} N_n (s X) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X:n][hX:N_n X] ((induct_s X) CONG [f] f z) TRANS (hX CONG s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatExample</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LFXI</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">nat_decls_long</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">		</span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">reflect</span><span class="w"> </span><span class="nc">nat_long</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">NatExample/nat_decls_long() </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">plusn_long</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat_long() </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_long/n ⟶ nat_long/n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] nat_long/s (u x)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">unital_type</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">nat_decls</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatExample/unital_type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="kd">reflect</span><span class="w"> </span><span class="nc">nat</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">NatExample/nat_decls() </span><span class=" -MMT_DD">❙</span><span class="w"></span>


<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">plusn</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n ⟶ nat/n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] nat/s (u x)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n ⟶ nat/n ⟶ nat/n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plusn/n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">z_left_neutral</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m] DED (nat/z + m) EQ m </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plusn/z/Applied nat/z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:nat/n} n x ⟶ n (nat/s x) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, px] plusn/z/Applied (nat/s x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">z_right_neutral</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m] DED m EQ (m + nat/z) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">SYM (plusn/z/Applied nat/z) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:nat/n} n x ⟶ n (nat/s x) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x, px] (px CONG nat/s) TRANS (SYM (plusn/s/Applied x nat/z)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">suc_comm</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"></span>
<span class="w">	 	</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a:nat/n, b:nat/n] DED (nat/s a) + b EQ a + (nat/s b) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 	</span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b:nat/n} n nat/z b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b] ((plusn/s/Applied nat/z b) TRANS ((plusn/z/Applied b) CONG nat/s)) TRANS (SYM (plusn/z/Applied (nat/s b))) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 	</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n, b: nat/n} n a b ⟶ n (nat/s a) b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a: nat/n, b: nat/n, pa: n a b] ((plusn/s/Applied (nat/s a) b) TRANS (pa CONG nat/s)) TRANS (SYM (plusn/s/Applied a (nat/s b))) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">plus_comm</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a:nat/n, b:nat/n] DED a + b EQ b + a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b: nat/n} n nat/z b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b] (z_left_neutral/n b) TRANS (z_right_neutral/n b) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n, b: nat/n, pa: n a b} n (nat/s a) b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, pa] ((plusn/s/Applied a b) TRANS (pa CONG nat/s))</span>
<span class=" -MMT_ObjectExpression">			 TRANS ((SYM (plusn/s/Applied b a)) TRANS (suc_comm/n b a)) </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">plus_assoc</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b:nat/n, a:nat/n, c:nat/n} type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b, a, c] DED a + (b + c) EQ (a + b) + c </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, c} n nat/z a c </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, c]  (z_left_neutral/n c CONG ([x] a + x)) TRANS (z_right_neutral/n a CONG ([x] x + c)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b, a, c, pb: n b a c} n (nat/s b) a c </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b, a, c, pb] ((((plusn/s/Applied b c) CONG ([x] a + x)) TRANS (SYM (suc_comm/n a (b+c)))) TRANS (plusn/s/Applied a (b+c)))</span>
<span class=" -MMT_ObjectExpression">			TRANS ((pb CONG nat/s) TRANS (SYM ((((SYM (suc_comm/n a b)) TRANS (plusn/s/Applied a b)) CONG ([x] x + c)) TRANS (plusn/s/Applied (a+b) c)))) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">times</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(nat/n ⟶ nat/n) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] nat/z) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] (x + (u x))) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="vc">timesn</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n ⟶ nat/n ⟶ nat/n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b] times/n a b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">times_z</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n} type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] DED a * nat/z EQ nat/z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n nat/z </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">times/z/Applied nat/z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n, pa: n a} n (nat/s a) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, pa] (times/s/Applied a nat/z) TRANS (plusn/z/Applied (a * nat/z)) TRANS pa  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">times_right</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b:nat/n, a:nat/n} type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b, a] DED b + b * a EQ b * (nat/s a) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: nat/n} n nat/z a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] ((plusn/z/Applied (nat/z * a)) TRANS (times/z/Applied a)) TRANS SYM (times/z/Applied (nat/s a)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b:nat/n, a:nat/n, pb: n b a} n (nat/s b) a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b, a, pb] </span>
<span class=" -MMT_ObjectExpression">						(((plusn/s/Applied b ((nat/s b)*a)) TRANS ((times/s/Applied b a) CONG ([x] nat/s (b + x))))</span>
<span class=" -MMT_ObjectExpression">			TRANS (((plus_assoc/n a b (b*a)) CONG nat/s) TRANS ((plus_comm/n b a) CONG ([x] nat/s (x + (b*a))))))</span>
<span class=" -MMT_ObjectExpression">			TRANS (((SYM (plusn/s/Applied (a+b) (b*a))) TRANS ((SYM (plusn/s/Applied a b)) CONG ([x] x + (b*a))))</span>
<span class=" -MMT_ObjectExpression">			TRANS ((SYM (plus_assoc/n b (nat/s a) (b*a))) TRANS ((pb  CONG ([x] (nat/s a) + x)) TRANS (SYM (times/s/Applied b (nat/s a))))))  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">distrib_left</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n, b:nat/n, c:nat/n} type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, c] DED (a + b) * c EQ a*c + b*c </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{b:nat/n, c:nat/n} n nat/z b c </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b, c] ((plusn/z/Applied b) CONG ([x] x * c)) TRANS (SYM ((times/z/Applied c) CONG ([x] x+ (b*c)) TRANS (plusn/z/Applied (b*c)))) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, c, pa] ((((plusn/s/Applied a b) CONG ([x] x * c)) TRANS (times/s/Applied (a+b) c)) TRANS (pa CONG ([x] c + x))) TRANS ((plus_assoc/n (a*c) c (b*c)) TRANS (SYM ((times/s/Applied a c) CONG ([x] x + b*c)))) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">times_comm</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b] DED a * b EQ b * a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] times_z/n x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	  </span><span class="vc">s</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, pa:n a b] ((times/s/Applied a b) TRANS (pa CONG ([x] b + x))) TRANS (times_right/n b a) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="vc">left_distrib</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n, b:nat/n, c:nat/n} DED (a + b) * c EQ a*c + b*c </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, c] distrib_left/n a b c </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">right_distrib</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:nat/n, b:nat/n, c:nat/n} DED a * (b + c) EQ a*b + a*c </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, c] ((times_comm/n a (b+c)) TRANS (distrib_left/n b c a)) TRANS (((times_comm/n b a) CONG ([x] x + (c*a))) TRANS (times_comm/n c a CONG ([x] (a*b) + x))) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">ind_proof</span><span class="w"> </span><span class="nc">times_assoc</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, c] DED a * (b * c) EQ (a * b) * c </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b, c] (times/z/Applied (b*c)) TRANS (SYM (((times/z/Applied b) CONG ([x] x * c)) TRANS (times/z/Applied c))) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, b, c, pa] ((times/s/Applied a (b*c)) TRANS (pa CONG ([x] (b*c) + x))) TRANS (SYM (((times/s/Applied a b) CONG ([x] x * c)) TRANS (distrib_left/n b (a*b) c)))  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">predec</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat/z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u] u) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="kd">inductive_definition</span><span class="w"> </span><span class="nc">monus</span><span class="p">()</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">nat() </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">n</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(nat/n ⟶ nat/n) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">z</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x] x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">n ⟶ n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([u,x] predec/n (u x)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">finite</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://structuralfeatures.lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InductiveTests</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?InductivelyDefinedTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">lst</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] list1/list a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">cns</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} a ⟶ lst a ⟶ lst a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a, hd, tl] list1/cons a hd tl </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">contraposition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type, b: type, x_a: a, x_b: b, y_a: a, y_b: b} (DED x_a NEQ y_a ⟶ DED x_b NEQ y_b) ⟶ (DED x_b EQ y_b ⟶ DED x_a EQ y_a) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">contra</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="si">7</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">trans_equal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type, w: a, x: a, y: a, z: a} DED w EQ x ⟶ DED z EQ y ⟶ DED x EQ y ⟶ DED w EQ z </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">trans_eq</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="si">7</span><span class="w"> </span><span class="si">8</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">cns_functionhood</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type, hd_0: a, tl_0: lst a, hd_1, tl_1} DED (hd_0 EQ hd_1) ⟶ DED tl_0 EQ tl_1 ⟶ DED (cns a hd_0 tl_0) EQ (cns a hd_1 tl_1) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">cns_funct</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="si">7</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="cm">//cons_inj_0: {a:type, hd_0:a, tl_0: lst a, hd_1:a, tl_1: lst a} DED (cns a hd_0 tl_0) EQ (cns a hd_1 tl_1) ⟶ DED hd_0 EQ hd_1 ❘ = [a, hd_0, tl_0, hd_1,tl_1] contra hd_0 (cns a hd_0 tl_0) hd_1 (cns a hd_1 tl_1) (list1/injective_cons_0 a hd_0 tl_0 hd_1 tl_1) ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">//cons_inj_1: {a:type, hd_0:a, tl_0: lst a, hd_1:a, tl_1: lst a} DED (cns a hd_0 tl_0) EQ (cns a hd_1 tl_1) ⟶ DED tl_0 EQ tl_1 ❘ = [a, hd_0, tl_0, hd_1,tl_1] contra tl_0 (cns a hd_0 tl_0) tl_1 (cns a hd_1 tl_1) (list1/injective_cons_1 a hd_0 tl_0 hd_1 tl_1) ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">//consArgs: {a: type} type ❘ = [a] a * (lst a) ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">//consP: {a: type} consArgs a ⟶ lst a ❘ = [a, args] cns a (pair/a a (lst a) args) (pair/b a (lst a) args) ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// This should work:❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// test: {a: type, hd_0: a, tl_0: lst a, hd_1:a, tl_1: lst a} DED (cns a hd_0 tl_0) EQ (cns a hd_1 tl_1) ⟶ DED hd_0 EQ hd_1 ❘ = [a, hd_0, tl_0, hd_1, tl_1] (cons_inj_0 a hd_0 tl_0 hd_1 tl_1) ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// inj_cons: {a: type, hd_0: a, tl_0: lst a, hd_1:a, tl_1: lst a} DED (cns a hd_0 tl_0) EQ (cns a hd_1 tl_1) ⟶ DED pair/make a (lst a) hd_0 tl_0 EQ pair/make a (lst a) hd_1 tl_1 ❘ </span>
<span class="cm">	= [a, hd_0, tl_0, hd_1, tl_1, P] pair/equiv a (lst a) hd_0 tl_0 hd_1 tl_1 (cons_inj_0 a hd_0 tl_0 hd_1 tl_1 P) (cons_inj_1 a hd_0 tl_0 hd_1 tl_1 P) ❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">// This is correct, but not accepted by the typechecker</span>
<span class="cm">	// For the typechecker to see this a (typelevel) definition expansion of consP is required ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// inj_consP_weak: {a: type, args_0: consArgs a, args_1: consArgs a} DED (consP a args_0) EQ (consP a args_1) ⟶ </span>
<span class="cm">		DED pair/make a (lst a) (pair/a a (lst a) args_0) (pair/b a (lst a) args_0) EQ pair/make a (lst a) (pair/a a (lst a) args_1) (pair/b a (lst a) args_1) </span>
<span class="cm">	❘ = [a, args_0, args_1, P] (inj_cons a (pair/a a (lst a) args_0) (pair/b a (lst a) args_0) (pair/b a (lst a) args_1) (pair/b a (lst a) args_1)) P ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// inj_consP: {a: type, args_0: consArgs a, args_1: consArgs a, P: DED (consP a args_0) EQ (consP a args_1)} DED args_0 EQ args_1 ❘ = [a, args_0, args_1, P] </span>
<span class="cm">		trans_equal (a*(lst a)) args_0 (pair/make a (lst a) (pair/a a (lst a) args_0) (pair/b a (lst a) args_0)) (pair/make a (lst a) (pair/a a (lst a) args_1) (pair/b a (lst a) args_1)) args_1</span>
<span class="cm">	 (pair/repr a (lst a) (pair/a a (lst a) args_0) (pair/b a (lst a) args_0) args_0)</span>
<span class="cm">	 (pair/repr a (lst a) (pair/a a (lst a) args_1) (pair/b a (lst a) args_1) args_1)</span>
<span class="cm">	 (inj_consP_weak a args_0 args_1 P) ❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] list3/list a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">//inj_cons_1: {a:type, hd_0:a, tl_0: list a, hd_1:a, tl_1: list a} DED hd_0 NEQ hd_1 ⟶ DED (hd_0 ∷ tl_0) NEQ (hd_1 ∷ tl_1) ❘ = [a, hd_0, tl_0, hd_1, tl_1] list3/injective_cons_0 a hd_0  tl_0 hd_1 tl_1 ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">//inj_cons_2: {a:type, hd_0:a, tl_0: list a, hd_1:a, tl_1: list a} DED tl_0 NEQ tl_1 ⟶ DED (hd_0 ∷ tl_0) NEQ (hd_1 ∷ tl_1) ❘ = [a, hd_0, tl_0, hd_1, tl_1] list3/injective_cons_1 a hd_0  tl_0 hd_1 tl_1 ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">//weak_inj_cons_1: {a:type, hd_0:a, hd_1:a, tl:list3/list a} DED hd_0 NEQ hd_1 ⟶ DED (hd_0 ∷ tl) NEQ (hd_1 ∷ tl) ❘ = [a, hd_0, hd_1, tl] list3/injective_cons_0 a hd_0 tl hd_1 tl ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">//weak_inj_cons_2: {a:type, hd:a, tl_0:list3/list a, tl_1:list3/list a} DED tl_0 NEQ tl_1 ⟶ DED (hd ∷ tl_0) NEQ (hd ∷ tl_1) ❘ = [a, hd, tl_0, tl_1] list3/injective_cons_1 a hd tl_0 hd tl_1 ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// theory UniversalPropertyFreeMonoid : ?InductivelyDefinedTypes =</span>
<span class="cm">// 	inductive unitType() ❘ =</span>
<span class="cm">// 		tp: type ❙</span>
<span class="cm">// 		tm: unitType ❙</span>
<span class="cm">// 	❚</span><span class="w"></span>
<span class="cm">// 	unit: type ❘ = unitType/tp ❙</span>
<span class="cm">// 	plus_assoc: {x: nat/n, y: nat/n, z: nat/n} DED nat/plus/n (nat/plus/n x y) z EQ nat/plus/n x (nat/plus/n y z) ❙</span>
<span class="cm">// 	zero_plus: {x: nat/n} DED nat/plus/n nat/z x EQ nat/z ❙</span>
<span class="cm">// 	plus_zero: {x: nat/n} DED nat/z EQ nat/plus/n x nat/z ❙</span>

<span class="cm">// 	inductive_definition Nat(): freeMonoid(unit) ❘ =</span>
<span class="cm">// 		fm: type ❘ = nat/n ❙</span>
<span class="cm">// 		gen: a ⟶ fm ❘ = unitType/induct/tm nat/n (nat/s nat/z) ❙</span>
<span class="cm">// 		unit: fm ❘ = nat/z ❙</span>
<span class="cm">// 		comp: fm ⟶ fm ⟶ fm ❘ = [a, b] nat/plus/n a b ❙</span>
<span class="cm">// 		assoc: {x: fm, y: fm, z: fm} DED comp (comp x y) z EQ comp x (comp y z) ❘ = [x, y, z] plus_assoc x y z ❙</span>
<span class="cm">// 		unit_r: {x: fm} DED comp x unit EQ x ❘ = [x] zero_plus x ❙</span>
<span class="cm">// 		unit_l: {x: fm} DED comp unit x EQ x ❘ = [x] plus_zero x ❙</span>
<span class="cm">// 	❚</span><span class="w"></span>
<span class="cm">// ❚</span><span class="w"></span>

<span class="cm">/T The following definition of surreal numbers won&#39;t typecheck (as expected), but is a nice pathological example ❙</span>
<span class="cm">// theory SurrealNumbers : ?LFXI =</span>
<span class="cm">	linear_order: {A: type} A ⟶ type ❙</span>
<span class="cm">//	ordBddAboveSet: {A: type, ord: linear_order A} A ⟶ kind ❙</span>
<span class="cm">//	ordBddBelowSet: {A: type, ord: linear_order A} A ⟶ kind ❙</span>
<span class="cm">	</span>
<span class="cm">//	inductive surreal() ❘ =</span>
<span class="cm">//		sur: type ❙</span>
<span class="cm">//		ord: linear_order sur ❙</span>
<span class="cm">//		makeSurreal: {a: sur} (ordBddAboveSet sur ord a) (ordBddBelowSet sur ord a) sur ❙</span>
<span class="cm">//	</span>
<span class="cm">// ❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   theory ObjectLevelInstances : http://cds.omdoc.org/urtheories?LF =</span>
<span class="cm">  tp    : type❙</span>
<span class="cm">  tm    : type❙</span>
<span class="cm">  equal : tm ⟶ tm ⟶ tm  ❘# 1 = 2❙</span>
<span class="cm">  of    : tm ⟶ tp ⟶ type❘# 1 # 2❙</span>

<span class="cm">  const : tp ⟶ THY❘ = [a] {|</span>
<span class="cm">    c  : tm,</span>
<span class="cm">    of : c # a</span>
<span class="cm">  |}❙</span>
<span class="cm">  </span>
<span class="cm">  nat  : tp❙</span>
<span class="cm">  zero : const nat❙</span>
<span class="cm">  </span>
<span class="cm">  // alsozero : const nat ❘= [|c : zero/c, of : zero/of|]❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">//  theory MetaLevelInstances : http://cds.omdoc.org/urtheories?LF =</span>
<span class="cm">  tp    : type❙</span>
<span class="cm">  tm    : type❙</span>
<span class="cm">  equal : tm ⟶ tm ⟶ tm  ❘# 1 = 2❙</span>
<span class="cm">  of    : tm ⟶ tp ⟶ type❘# 1 # 2❙</span>

<span class="cm">  theory const &gt; {|a: tp|}❘ =</span>
<span class="cm">    c  : tm❙</span>
<span class="cm">    of : c # a❙</span>
<span class="cm">  ❚</span><span class="w"></span>

<span class="cm">//  nat : tp❙</span>
<span class="cm">  // structure zero : const nat❙</span>
<span class="cm">  </span>
<span class="cm">  // alsozero : const nat ❘= [|c : zero/c, of : zero/of|]❙</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Int</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">int</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pred</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ nat       </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pred</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">uminus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ nat       </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ nat ⟶ nat </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IntRules</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Int </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">times_mono</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X:nat,Y:nat,Z:nat} ⊦ O ≤ Z ⟶ ⊦ X ≤ Y ⟶ ⊦ X * Z ≤ Y * Z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_invmono</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} ⊦ O ≤ Z ⟶ ⊦ X * Z ≤ Y * Z ⟶ ⊦ X ≤ Y  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">succ_invert</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} ⊦ pred (X&#39;) = X</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_invert_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} ⊦ (X + Y) - Y = X</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_invert_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} ⊦ (X + Y) - X = Y</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Equality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">eq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type} a ⟶ a ⟶ type </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">reflexive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:a} x = x </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">List</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">list</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">nil</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} list a</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">nil</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} a ⟶ list a ⟶ list a</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">%R,</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">embed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} a ⟶ list a </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,x] x , (nil a)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// the simplification rule generator does not allow fold to have implicit arguments yet❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fold</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b:type} list a ⟶ b ⟶ (a ⟶ b ⟶ b) ⟶ b</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fold_nil</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type,b,n:b,c: a ⟶ b ⟶ b} (fold a b (nil a) n c) = n</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fold_cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,x,l,n,c:a ⟶ b ⟶ b} (fold a b (x,l) n c) = (c x (fold a b l n c))</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">concat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} list a ⟶ list a ⟶ list a</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,l,m] fold a (list a) l m [x,xs] x,xs </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?List</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">a</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">c</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">f</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a ⟶ a</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(c,c|)+(c,c|) = c,c,c,c|</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">refl</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">real</span><span class="w"> </span><span class="l l-URI">scala://real.omdoc.org/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info?MMTURILexer</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatLiterals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞real:?Bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞real:?StandardNat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// this only type-checks because ⊦ 1+1 = 2 unifies with ⊦ true ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ 1+1 = 2</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">trueI</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">IntLiterals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IntRules</span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// this should include NatRules, but the last test only works with the rule IntRules?succ_invert/Solve❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞real:?Bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞real:?StandardInt</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ 1-3 = -2 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">trueI</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Vectors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatLiterals</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">a</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">c</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">a_equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a ⟶ a ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">vec</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">vec</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vec 0 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∅</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cons</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} vec n ⟶ a ⟶ vec n&#39; </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">vec_equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} vec n ⟶ vec n ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">==</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">append</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n} vec m ⟶ vec n ⟶ vec (m + n) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// this only type-checks because vec n+0 and vec n are recognized as equal ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">appendempty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n, v: vec n} v @ ∅ == v</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// this only type-checks because vec m + (n&#39;) and vec (m + n)&#39; are recognized as being equal ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">appendcons</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m,n, x, v: vec m, w: vec n} v @ (w,x) == (v @ w, x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">last</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} vec n&#39; ⟶ a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">last</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lastcons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n, x, v: vec n} last (v,x) = x </span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// this only type-checks because vec 3 and vec 0&#39;&#39;&#39; are recognized as equal ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vec 3 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">∅,c,c,c</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// this only type-checks because vec 6 and vec (3+3) are recognized as equal ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vec 6 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">test1 @ test1 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// this only type-checks because vec n&#39; unifies with vec 3❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">last test1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   intuitionistic first-order logic with natural deduction rules and a few example proofs ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">term</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="p">##</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∃</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="p">##</span><span class="w"> </span><span class="ss">∃</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLNatDed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLNatDed  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ({x} ⊦ (A x)) ⟶ ⊦ ∀ A </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ (∀ A) ⟶ {x} ⊦ (A x)</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">existsI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} {c} ⊦ (A c) ⟶ ⊦ ∃ [x] (A x) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">existsI</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,C} ⊦ (∃ [x] A x) ⟶ ({x} ⊦ (A x) ⟶ ⊦ C) ⟶ ⊦ C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLEQ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≐</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLEQNatDed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLNatDed  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">congT</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x ≐ y ⟶ {T: term ⟶ term} ⊦ (T x) ≐ (T y) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">congT</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">congF</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x ≐ y ⟶ {F: term ⟶ prop} ⊦ (F x) ⟶ ⊦ (F y)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">congF</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x ≐ y ⟶ ⊦ y ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ x ≐ y ⟶ ⊦ y ≐ z ⟶ ⊦ x ≐ z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">trans3</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,x,y,z} ⊦ w ≐ x ⟶ ⊦ x ≐ y ⟶ ⊦ y ≐ z ⟶ ⊦ w ≐ z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w,x,y,z,p,q,r] trans (trans p q) r</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans4</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v,w,x,y,z} ⊦ v ≐ w ⟶⊦ w ≐ x ⟶ ⊦ x ≐ y ⟶ ⊦ y ≐ z ⟶ ⊦ v ≐ z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w,x,y,z,p,q,r,s] trans3 (trans p q) r s</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   higher-order logic❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Bool</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Bool ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">→</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lambda</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (tm A ⟶ tm B) ⟶ tm A → B </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A → B ⟶ tm A ⟶ tm B </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">equalConstant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A → (A → bool)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,y:tm A] (equalConstant A) @ x @ y</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, X: tm A} ⊦ X = X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,X,Y:tm A} ⊦ X = Y ⟶ {F: tm A ⟶ tm B} ⊦ F X = F Y</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">cong</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"> </span>

<span class="w">  </span><span class="vc">beta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm A ⟶ tm B, X} ⊦ (λ F) @ X = F X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(λ[x:Bool]x) = λ[x]x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(λ[x]x) = λ[x]true</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">λ[x]x=false</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,p: tm A ⟶ Bool] (λ p) = λ[x]true</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ITP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">proof</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">proof</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fix</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">fix</span><span class="w"> </span><span class="si">L1T</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assume</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">assume</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">hence</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">hence</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">by</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">use</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">use</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">localref</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">`</span><span class="w"> </span><span class="si">L1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?ITP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">//  test : {p: term ⟶ o} ⊦ ∀ [x] p x ⇒ p x❘</span>
<span class="cm">       = [p] proof (fix x assume p x; hence p x)❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/linear</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://examples.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// Linear logic</span>
<span class="cm">   Syntax: intuitionistic linear logic</span>
<span class="cm">   Proof theory: resource semantics based on Frank Pfenning&#39;s lecture notes</span>
<span class="cm">   (http://www.cs.cmu.edu/~fp/courses/15816-s10/schedule.html, Lecture 23-24) resource semantics</span>
<span class="cm">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Syntax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">o</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">⊗</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o ⟶ o ⟶ o </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⊗</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">&amp;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o ⟶ o ⟶ o </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&amp;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">⊤</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">⊕</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o ⟶ o ⟶ o </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⊕</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">⊸</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o ⟶ o ⟶ o </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⊸</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">80</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">!</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o ⟶ o      </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">!</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">110</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">⇒</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o ⟶ o ⟶ o </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⇒</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">80</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] !x ⊸ y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// We use untyped first-order logic with equality to define the sematnics.</span>
<span class="cm">   The values of the first-order universe are the worlds, and propositions may hold at different worlds.❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Worlds</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/examples?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Syntax</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// worlds contain resources ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">world</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// composition of worlds, corresponds to multiset union of resources ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">world ⟶ world ⟶ world </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// empty world with no resources ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">world</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">ε</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">// * is a monoid❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">neutL</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ⊦ ε*P ≐ P</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">neutR</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ⊦ P*ε ≐ P</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">assoc</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,Q,R} ⊦ (P*Q)*R ≐ P*(Q*R)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// A @ P: A can be produced by using all resources available in world P❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">at</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o ⟶ world ⟶ prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">At</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o ⟶ world ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p,w] ⊦ at p w</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// a formula is valid if it holds in the empty world❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">valid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o ⟶ type </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] A @ ε</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">valid</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">   </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// Apart from the monoid/multiset structure, there is no way to introduce worlds.</span>
<span class="cm">   The set of worlds is the freely-generated T over the bound world variables.</span>
<span class="cm">   Here T is the theory imposed on worlds, T is an extension of the monoid theory.</span>

<span class="cm">   Different extensions allow modeling different structural rules.</span>
<span class="cm">   The following gives three extensions, but only Exchange is used later on.❚</span><span class="w"></span>

<span class="cm">// Exchange corresponds to commutativity.❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Exchange</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/examples?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">comm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,Q} ⊦ P*Q ≐ Q*P</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">// We add two special type-checking rules that mechanize the monoid+commutativity axiom.</span>
<span class="cm">      Their implementations are given in the folder scala (sibling of source).❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// A simplification rule for *-terms: it normalizes bracketing of *, drops ε, and reorders the arguments❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?NormalizeWorlds</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p,q,r} ⊦ r*(p*q)*ε*r ≐ r*(r*(q*p)) </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p,q,r] refl</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">// An equality-checking rule for equations involving *: it normalizes both sides and solves meta-variables of type world.</span>
<span class="cm">      For example, it can reduce v*w=v*w&#39; to w=w&#39;.</span>
<span class="cm">      Situations like this came up in several of the examples below.</span>
<span class="cm">      This rule is admissible for solving meta-variables but not derivable from the monoid+commutativity axioms.</span>
<span class="cm">      Effectively, it works in the freely-generated commutative monoid.</span>
<span class="cm">      Because it is only admissible, it breaks modularity: e.g., it cannot be easily combined with a corresponding rule for idempotence.❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EquateWorlds</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// Contraction corresponds to idempotence.❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Contraction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/examples?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">idem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ⊦ P*P ≐ P</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// Weakening corresponds to the empty world being the least element.❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Weakening</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/examples?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// ordering with monotonicity❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">weaker</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">world ⟶ world ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">80</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">≤_refl</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ⊦ P ≤ P</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">≤_antisym</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,Q} ⊦ P ≤ Q ⟶ ⊦ Q ≤ P ⟶ ⊦ P≐Q</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">≤_trans</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,Q,R} ⊦ P≤Q ⟶ ⊦ Q≤R ⟶ ⊦ P≤R </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">≤_monotone</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,d} ⊦ a ≤ b ⟶ ⊦ c ≤ d ⟶ ⊦ a*c ≤ b*d</span><span class=" -MMT_DD">❙</span><span class="w"> </span>

<span class="w">   </span><span class="cm">// least world (without this, the order is trivial, i.e., there is no weakening)❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">≤_least</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P} ⊦ ε ≤ P</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">// TODO: This should be a subtyping rule so that it does not occur in proofs.❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">weaken</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,v,w} A @ v ⟶ ⊦v≤w ⟶ A @ w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">divisibility</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,Q} ⊦ P ≤ P*Q </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">               </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,Q] congF neutR ([u]u≤P*Q) (≤_monotone ≤_refl ≤_least)</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// Now proofs of the linear sequent A1, ..., An |- A are represented as terms of type</span>
<span class="cm">   (A1 ⊗ ... ⊗ An) ⊸ A  @  ε, where @ is the binary holds-at relation between propositions and worlds.❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ResourceSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/examples?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Worlds</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Exchange</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">⊗_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,a,b} A @ a ⟶ B @ b ⟶ A ⊗ B @ a*b</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">⊗_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,u,v} A ⊗ B @ u ⟶ ({a}{b} A @ a ⟶ B @ b ⟶ C @ a*b*v) ⟶ C @ u*v</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">⊗_L</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="si">7</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">1_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">1 @ ε</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">1_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{C,u,v} 1 @ u ⟶ C @ v ⟶ C @ u*v</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">&amp;_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,w} A @ w ⟶ B @ w ⟶ A &amp; B @ w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">&amp;_Ll</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,u,v} A &amp; B @ u ⟶ ({a} A @ a ⟶ C @ a*v) ⟶ C @ u*v</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">&amp;_Lr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,u,v} A &amp; B @ u ⟶ ({b} B @ b ⟶ C @ b*v) ⟶ C @ u*v</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">⊤_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w} ⊤ @ w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">⊕_Rl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,w} A @ w ⟶ A ⊕ B @ w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">⊕_Rr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,w} B @ w ⟶ A ⊕ B @ w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">⊕_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,u,v} A ⊕ B @ u ⟶ ({a} A @ a ⟶ C @ a*v) ⟶ ({b} B @ b ⟶ C @ b*v) ⟶ C @ u*v</span><span class=" -MMT_DD">❙</span><span class="w">  </span>

<span class="w">   </span><span class="vc">0_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{C,u,v} 0 @ u ⟶ C @ u*v</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">⊸_R</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,w} ({a} A @ a ⟶ B @ a*w) ⟶ A ⊸ B @ w</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">⊸_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,u,a,v} A ⊸ B @ u ⟶ A @ a ⟶ ({b} B @ b ⟶ C @ b*v) ⟶ C @ u*a*v</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// alternatively</span>
<span class="cm">   ⊸_E  : A ⊸ B @ P ⟶ A @ Q ⟶ B @ P*Q</span>
<span class="cm">   ⊸_L : A ⊸ B @ H ⟶ A @ P ⟶ ({b} B @ b ⟶ C @ b*Q) ⟶ C @ H*P*Q</span>
<span class="cm">      = [p][q][f] f (H*P) (⊸E p q)</span>
<span class="cm">   ❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">!_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A @ ε ⟶ ! A @ ε</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">!_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,C,u,v} ! A @ u ⟶ (A @ ε ⟶ C @ v) ⟶ C @ u*v</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// In the remainder, we prove some derivable rules to exercise the calculus.❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">⊗_commute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} valid A⊗B ⊸ B⊗A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] ⊸_R [ab,h] ⊗_L h [a,b,p,q] ⊗_R q p</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">// needs to solve abc * X = abc and ab * Y * X = ab * c, solution: X = epsilon, Y = c❙</span><span class="w"> </span>
<span class="w">   </span><span class="vc">⊗_assoc1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} valid (A⊗B)⊗C ⊸ A⊗(B⊗C)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C] ⊸_R [abc,h] ⊗_L h </span>
<span class=" -MMT_ObjectExpression">              [ab,c,pq,r] ⊗_L pq</span>
<span class=" -MMT_ObjectExpression">                 ([a,b,p,q] ⊗_R p (⊗_R q r))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span>
<span class="w">   </span><span class="vc">⊗_assoc2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} valid A⊗(B⊗C) ⊸ (A⊗B)⊗C</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C] ⊸_R [abc,h] ⊗_L h </span>
<span class=" -MMT_ObjectExpression">              [a,bc,p,qr] ⊗_L qr</span>
<span class=" -MMT_ObjectExpression">                 ([b,c,q,r] ⊗_R (⊗_R p q) r)</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">⊗_neutral1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid A⊗1 ⊸ A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] ⊸_R [ao,h] ⊗_L h [a,b,p,q] 1_L q p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">⊗_neutral2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid A ⊸ A⊗1</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] ⊸_R [a,h] ⊗_R h 1_R</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span>
<span class="w">   </span><span class="vc">⊕_commute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} valid A⊕B ⊸ B⊕A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] ⊸_R [ab,h] ⊕_L h ([a,p] ⊕_Rr p) ([b,q] ⊕_Rl q)</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">⊕_neutral1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid A⊕0 ⊸ A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] ⊸_R [az,h] ⊕_L h ([a,p] p) ([z,q] 0_L q)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">⊕_neutral2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid A ⊸ A⊕0</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] ⊸_R [a,h] ⊕_Rl h</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">      </span>
<span class="w">   </span><span class="vc">!_over_⊕</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} valid (!A⊕!B) ⊸ !(A⊕B)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">            </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] ⊸_R [ab,h] ⊕_L h ([a,p] !_L p ([pE] !_R (⊕_Rl pE)))</span>
<span class=" -MMT_ObjectExpression">                                     ([b,q] !_L q ([qE] !_R (⊕_Rr qE)))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">!_over_&amp;</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} valid !(A&amp;B) ⊸ (!A&amp;!B)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">          </span><span class="cm">// TODO: This proof unexpectedly does not type-check, eventually failing at a=ε and b=ε.</span>
<span class="cm">             Further investigation is needed to determine if the proof is in fact wrong or</span>
<span class="cm">             if the type-checker is led astray by the EquateWorlds rule.</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">          </span><span class="cm">//  = [A,B] ⊸_R [ab,h] &amp;_R (!_L h [pqE] &amp;_Ll pqE ([a,p] !_R p))</span>
<span class="cm">                                   (!_L h [pqE] &amp;_Lr pqE ([b,q] !_R q))❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">!_idempotent1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid !!A ⊸ !A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] ⊸_R [a,h] !_L h [k] !_L k [l] !_R l</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">   </span><span class="vc">!_idempotent2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid !A ⊸ !!A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] ⊸_R [a,h] !_L h [k] !_R (!_R k)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">!_weaken</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} valid !A ⊸ A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">            </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] ⊸_R [a,h] !_L h [k] k</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// @_title Propositional Logic in MMT❙</span>
<span class="cm">// @_author Florian Rabe❙</span>

<span class="cm">/T   </span>
<span class="cm">Intuitionistic propositional logic with natural deduction rules and a few example proofs ❚</span><span class="w"></span>

<span class="cm">/T We use LF as the meta-theory for all theories in this file.❚</span><span class="w"></span>
<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T    </span>
<span class="cm">We start with the syntax of propositional logic.❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">  </span><span class="sd"># :types The Basic Concepts</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T the type of propositions ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T Given [F:prop], the type $⊦ F$ holds the proofs of $F$.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ type         </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="sd">## Abbreviations</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T The type $contra$ abbreviates the judgment of inconsistency.</span>
<span class="cm">     If we can give an element of the type, then every proposition has a proof.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">contra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} ⊦ a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">↯</span><span class="w">            </span><span class=" -MMT_DD">❙</span><span class="w"> </span>

<span class="w">  </span><span class="sd"># Constructors</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T The constructors provide the expressions of the types above.❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">true</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop                                   </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop                                   </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∧</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∨</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⇒</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop         </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">¬</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Equivalence is taken as a non-primitive here and defined such that for [F:prop,G:prop] we define $F⇔G$ as $(F ⇒ G) ∧ (G ⇒ F)$.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⇔</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] (x ⇒ y) ∧ (y ⇒ x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   Now we describe the proof theory.❚</span><span class="w">        </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PLNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T We use natural ⊦uction proof rules that construct expressions of type $⊦ F$ for some [F:prop].</span>
<span class="cm">  {For example, assume two propositions [F: prop, G: prop].</span>
<span class="cm">    {If [p:⊦ F, q: ⊦ G], then $andI p q$ is a proof of $F∧G$.}</span>
<span class="cm">    {If [p:⊦ F∧G], then $andEl p$ is a proof of $F$.}</span>
<span class="cm">  }</span>
<span class="cm">  ❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ true</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">falseE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ false ⟶ ↯</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">andI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ⟶ ⊦ B ⟶ ⊦ A ∧ B   </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ∧ B ⟶ ⊦ A           </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ∧ B ⟶ ⊦ B           </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">orIl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ⟶ ⊦ A ∨ B           </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">orIr</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ B ⟶ ⊦ A ∨ B           </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">orE</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} ⊦ A ∨ B ⟶ (⊦ A ⟶ ⊦ C) ⟶ (⊦ B ⟶ ⊦ C) ⟶ ⊦ C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">impI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (⊦ A ⟶ ⊦ B) ⟶ ⊦ A ⇒ B </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">impE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ⇒ B ⟶ ⊦ A ⟶ ⊦ B   </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">notI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (⊦ A ⟶ ↯) ⟶ ⊦ ¬ A</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">notI</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">notE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ¬ A ⟶ ⊦ A ⟶ ↯  </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">notE</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">equivI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (⊦ A ⟶ ⊦ B) ⟶ (⊦ B ⟶ ⊦ A) ⟶ ⊦ A ⇔ B  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,q] andI (impI [x] p x) (impI [x] q x)  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="vc">equivEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ⇔ B ⟶ ⊦ A ⟶ ⊦ B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,a] impE (andEl p) a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ⇔ B ⟶ ⊦ B ⟶ ⊦ A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,b] impE (andEr p) b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span>
<span class="w">  </span><span class="vc">imp2I</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} (⊦ A ⟶ (⊦ B ⟶ ⊦ C)) ⟶ ⊦ A ⇒ (B ⇒ C) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C] [f] impI [p] (impI ([q] f p q))            </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">imp2E</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} ⊦ A ⇒ (B ⇒ C) ⟶ ⊦ A ⟶ ⊦ B ⟶ ⊦ C    </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C] [p,q,r] impE (impE p q) r                  </span><span class=" -MMT_DD">❙</span><span class="w"> </span>

<span class="w">  </span><span class="vc">example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ A ⇒ (A ∧ A)  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A]impI [p]andI p p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DeclarativeProofs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">cut</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦A ⟶ (⊦A ⟶ ⊦B) ⟶ ⊦B</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,q] q p</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">PROVE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">BY</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">have</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦A ⟶ ⊦A</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,p] p</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">HAVE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">BY</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Declarative_PL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLNatDed</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DeclarativeProofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">decl_trueI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">trueI</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">TRIVIAL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">decl_falseE</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">falseE</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">EXFALSO</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">decl_andE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} ⊦ A∧B ⟶ (⊦A ⟶ ⊦B ⟶ ⊦C) ⟶ ⊦C</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">            </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C,p,q] q (andEl p) (andEr p)</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">FROM</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">OBTAIN</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w">   </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">decl_orE</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">orE</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">SPLIT</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">CASE</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">CASE</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10050</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">decl_impI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">impI </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">SUPPOSE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">500</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">example</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} ⊦ A∧B ⇒ ((B⇒C)∨C ⇒ C) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C]</span>
<span class=" -MMT_ObjectExpression">    SUPPOSE (A∧B) [ab]▪</span>
<span class=" -MMT_ObjectExpression">    SUPPOSE ((B⇒C)∨C) [bc]▪</span>
<span class=" -MMT_ObjectExpression">    PROVE B BY (</span>
<span class=" -MMT_ObjectExpression">      FROM ab OBTAIN [a,b]▪</span>
<span class=" -MMT_ObjectExpression">      HAVE B BY b</span>
<span class=" -MMT_ObjectExpression">    )[b]▪</span>
<span class=" -MMT_ObjectExpression">    SPLIT bc</span>
<span class=" -MMT_ObjectExpression">      CASE [r] HAVE C BY ≪⊦C≫</span>
<span class=" -MMT_ObjectExpression">      CASE [r] HAVE C BY r</span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">example2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} ⊦ A∧B ⇒ ((B⇒C)∨C ⇒ C)</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C] impI[p]impI[q]orE q ([r] impE r (andEr p)) ([r]r)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ProofIrrelevance</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T a rule that makes all terms of type ded F equal❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TermIrrelevanceRule ded</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ProverTest</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">  </span><span class="vc">a</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">b</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">c</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">d</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">k</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">r</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a ⟶ b</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">s</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a ⟶ b ⟶ c</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">t</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a ⟶ b ⟶ c ⟶ d</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">q</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">d ⟶ d</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a ⟶ a ⟶ d </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">≪a ⟶ a ⟶ d ≫</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PLProofs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLNatDed</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ProofIrrelevance</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T Not all of the automated proofs work at the moment. ❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">test</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} ⊦ (a ∧ b) ⇒ (b ∧ a)</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">_</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} ⊦ (a ∨ b) ⇒ (b ∨ a)</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">_</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">interactive_example</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ A ⇒ (A ∧ A)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">≪{A:prop}⊦A⇒A∧A≫ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLProofs</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOLNatDed</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f} ⊦ (forall [x] forall [y] f x y) ⇒ (forall [y] forall [x] f x y) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  </span><span class="cm">// = _</span><span class=" -MMT_OD">❘</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f} ⊦ (exists [x] exists [y] f x y) ⇒ (exists [y] exists [x] f x y) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  </span><span class="cm">// = _</span><span class=" -MMT_OD">❘</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// like fol.mmt but for sorted first-order logic ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedTerms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedTerms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} (tm S ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w">                           </span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} (tm S ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∃</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLEQ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S} tm S ⟶ tm S ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≐</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLNatDed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLNatDed  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,A} ({x: tm S} ⊦ (A x)) ⟶ ⊦ ∀ A </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,A} ⊦ (∀ A) ⟶ {x: tm S} ⊦ (A x)</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">existsI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,A} {c} ⊦ (A c) ⟶ ⊦ ∃ [x: tm S] (A x) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">existsI</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,A,C} ⊦ (∃ [x: tm S] A x) ⟶ ({x} ⊦ (A x) ⟶ ⊦ C) ⟶ ⊦ C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Declarative_SFOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLNatDed</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DeclarativeProofs</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">decl_forallI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">forallI</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ASSUME</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">decl_existsI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">existsI</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">TAKE</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SFOLEQNatDed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLEQ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SFOLNatDed  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,x: tm S} ⊦ x ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">congT</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S, T, x,y} ⊦ x ≐ y ⟶ {F: tm S ⟶ tm T} ⊦ (F x) ≐ (F y) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">congT</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">congF</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S, x,y: tm S} ⊦ x ≐ y ⟶ {F: tm S ⟶ prop} ⊦ (F x) ⟶ ⊦ (F y)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">congF</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S, x,y: tm S} ⊦ x ≐ y ⟶ ⊦ y ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S, x,y,z: tm S} ⊦ x ≐ y ⟶ ⊦ y ≐ z ⟶ ⊦ x ≐ z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">trans3</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S, w,x,y,z: tm S} ⊦ w ≐ x ⟶ ⊦ x ≐ y ⟶ ⊦ y ≐ z ⟶ ⊦ w ≐ z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S, w,x,y,z,p,q,r] trans (trans p q) r</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans4</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S, v,w,x,y,z: tm S} ⊦ v ≐ w ⟶⊦ w ≐ x ⟶ ⊦ x ≐ y ⟶ ⊦ y ≐ z ⟶ ⊦ v ≐ z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S, v,w,x,y,z,p,q,r,s] trans3 (trans p q) r s</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Magma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term ⟶ term </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∘</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semigroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ (x∘y)∘z ≐ x∘(y∘z)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">assocR</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊦ x∘(y∘z) ≐ (x∘y)∘z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] sym assoc</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">assoc4</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{w,x,y,z} ⊦ ((w∘x)∘y)∘z ≐ w∘(x∘(y∘z))</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[w,x,y,z] trans3 (congT assoc [u]u∘z) assoc (congT assoc [u]w∘u)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc4R</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,x,y,z} ⊦ w∘(x∘(y∘z)) ≐ ((w∘x)∘y)∘z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w,x,y,z] sym assoc4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assoc5</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v,w,x,y,z} ⊦ (((v∘w)∘x)∘y)∘z ≐ v∘(w∘(x∘(y∘z)))</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w,x,y,z] trans4 (congT assoc4 [u]u∘z) assoc</span>
<span class=" -MMT_ObjectExpression">                              (congT assoc [u]v∘u) (congT assoc [u]v∘(w∘u))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">comm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x∘y ≐ y∘x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Neutral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">e</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term </span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">  </span><span class="vc">neutLeft</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x∘e ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neutRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x∘e ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Idempotent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">idempotent</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x∘x ≐ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Neutral</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Band</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Idempotent</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semilattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLEQNatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Commutative</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Multi-adjunctive meta-language (MAM), following the paper &quot;On the Expressive Power of user-defined effects&quot;.</span>
<span class="cm">   Formalized during Florian Rabe&#39;s visit to Matija Pretnar in June 2019❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MAM</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="sd"># Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">vtp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ctp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">eff ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vtp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">vprod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vtp ⟶ vtp ⟶ vtp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">×</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">sum</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vtp ⟶ vtp ⟶ vtp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Thunk</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} ctp e ⟶ vtp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">Ret</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} vtp ⟶ ctp e</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">F</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} vtp ⟶ ctp e ⟶ ctp e</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">→</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cprod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} ctp e ⟶ ctp e ⟶ ctp e</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&amp;</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="sd"># Terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">vtm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vtp ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">vtm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ctm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} ctp e ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">ctm</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">eff</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∅</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">unitterm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vtm unit</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">O</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} vtm A ⟶ vtm B ⟶ vtm A × B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pcase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,e,C: ctp e} vtm A×B ⟶ (vtm A ⟶ vtm B ⟶ ctm C) ⟶ ctm C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inj1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} vtm A ⟶ vtm A + B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inj2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} vtm B ⟶ vtm A + B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">scase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,e,C: ctp e} vtm A+B ⟶ (vtm A ⟶ ctm C) ⟶ (vtm B ⟶ ctm C) ⟶ ctm C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">thunk</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e, C: ctp e} ctm C ⟶ vtm U C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">T{</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">force</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e, C: ctp e} vtm U C ⟶ ctm C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">!</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ret</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, e} vtm A ⟶ ctm F e A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">bind</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, e, C: ctp e} ctm F e A ⟶ (vtm A ⟶ ctm C) ⟶ ctm C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">lambda</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,e,C: ctp e} (vtm A ⟶ ctm C) ⟶ ctm A → C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,e,C: ctp e} ctm A → C ⟶ vtm A ⟶ ctm C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">cpair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e,C,D: ctp e} ctm C ⟶ ctm D ⟶ ctm C &amp; D</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">,,</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prj1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e,C,D:ctp e} ctm C &amp; D ⟶ ctm C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prj2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e,C,D:ctp e} ctm C &amp; D ⟶ ctm D</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EFF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MAM</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">Op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Opeff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">opeff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Op ⟶ vtp ⟶ vtp ⟶ Opeff</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⇒</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">opcons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Opeff ⟶ eff ⟶ eff</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⊎</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">handler</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vtp ⟶ eff ⟶ {e:eff} ctp e ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⟹</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">  </span><span class="vc">rethandler</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,e,C: ctp e} (vtm A ⟶ ctm C) ⟶ A ∅ ⟹ C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">hret</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ophandler</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{o,A1,A2,B,e,f,C: ctp f}</span>
<span class=" -MMT_ObjectExpression">               B e ⟹ C ⟶</span>
<span class=" -MMT_ObjectExpression">               (vtm A1 ⟶ vtm U (A2 → C) ⟶ ctm C) ⟶</span>
<span class=" -MMT_ObjectExpression">               B ((o A1 ⇒ A2) ⊎ e) ⟹ C</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">               </span><span class="p">#</span><span class="w"> </span><span class="ss">hop</span><span class="w"> </span><span class="si">8</span><span class="w"> </span><span class="si">9</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">subsumed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Opeff ⟶ eff ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∈</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{o, A, B, e} (o A ⇒ B) ∈ e ⟶ vtm A ⟶ ctm F e B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">op</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">handle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, e, f, C: ctp f} ctm F e A ⟶ A e ⟹ C ⟶ ctm C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">handle</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">with</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monads</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MAM</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Monad</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} (vtp ⟶ ctp e) ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">monad</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e, C: vtp ⟶ ctp e}</span>
<span class=" -MMT_ObjectExpression">              ({a:vtp} vtm a ⟶ ctm C a) ⟶</span>
<span class=" -MMT_ObjectExpression">              ({a,b} vtm U (C a) ⟶ vtm U (a → C b) ⟶ ctm C b) ⟶</span>
<span class=" -MMT_ObjectExpression">              Monad e C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">where</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">moncons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e,C} Monad e C ⟶ eff</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≺</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, e, C, M: Monad e C}</span>
<span class=" -MMT_ObjectExpression">         ctm (C A) ⟶</span>
<span class=" -MMT_ObjectExpression">         ctm F (e ≺ M) A</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">μ</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">reify</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,e,C,M: Monad e C} ctm F (e ≺ M) A ⟶ ctm (C A)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">reify</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DelimitedContinuations</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MAM</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dccons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e} ctp e ⟶ eff</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">shift</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, e, C: ctp e} (vtm U (A → C) ⟶ ctm C) ⟶</span>
<span class=" -MMT_ObjectExpression">                           ctm F (dccons e C) A</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">S</span><span class="si">0</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">  </span><span class="vc">reset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, e, C: ctp e} ctm F e A ⟶ (vtm A ⟶ ctm C) ⟶ ctm C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ContinuationMonad</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monads</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cont</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e, C: ctp e} vtp ⟶ ctp e</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[e,C,a] (U (a → C)) → C</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">cont</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">contmon</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{e, C: ctp e} Monad e [a] cont C a</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[e,C] where ([a,x] λ[c] c! @ x) ;</span>
<span class=" -MMT_ObjectExpression">               [a,b,m,f] λ[c] m! @ T{λ[y] f! @ y @ c}</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">contmon</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">delMon</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DelimitedContinuations</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?ContinuationMonad</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MAM</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dccons</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[e,C] e ≺ contmon C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">shift</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,e,C,p] μ λ p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T The next declarations has a typing error:</span>
<span class="cm">     We have p: ctm F e A, but we need</span>
<span class="cm">     ctm F (e ≺ contmon C) A.</span>
<span class="cm">     (Here ≪T≫ denotes a missing term of type T.)</span>
<span class="cm">  ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">reset</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,e,C,p: ctm F e A,r]</span>
<span class=" -MMT_ObjectExpression">    (reify (contmon C) ≪ctm F (e ≺ contmon C) A≫) @ T{λ r}</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/naproche-sad</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// NaprocheSad is based on the Sad system, which uses the ForTheL language. </span>
<span class="cm">   See http://nevidal.org/sad.en.html, in particular for the full grammar.</span>
<span class="cm">   This is a preliminary formalization made live while listening to a talk by Peter Koepke, the main developer.</span>
<span class="cm">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NaprocheSad</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">set</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// sets may be undefined❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// binary connectives assume the (negation of the) first argument to show definedness of the second one❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">equality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">elementof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ prop</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">notion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">is_a</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ notion ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">is</span><span class="w"> </span><span class="ss">a</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">Elem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">notion ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">Elem</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// unclear ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">function</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ notion</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">→</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Dom</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} Elem a → b ⟶ set</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} Elem a → b ⟶ set</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// unclear:❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// special expressions: no N, every N for notions N❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// syntax of linguistic predicates:</span>
<span class="cm">     is, e.g., x is less than y</span>
<span class="cm">     is a: x is an element of y</span>
<span class="cm">     does: x converges to y</span>
<span class="cm">     has:  x has unit y❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// declarations:</span>
<span class="cm">     * signature extension: function, predicate, notion</span>
<span class="cm">     * definition: function, predicate, notion</span>
<span class="cm">     * axiom</span>
<span class="cm">     * theorem</span>
<span class="cm">     Every declaration has an internal structure of low-level declarations: assumptions, affirmations, selection (exists-elimination), case distinction (or-elimination), local definition.</span>
<span class="cm">     Every theorem has exactly one affirmation, which occurs at the end.❙</span><span class="w"> </span>
<span class="w">     </span>
<span class="w">  </span><span class="cm">// declarations are elaborated into untyped first-order logic (signature declarations are implicit)❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// ontological correctness: all terms are defined (part of verification)❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// after elaboration, verification generates proof oblibations for ontological correctness and  proof steps (one task per low-level declaration)❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// A proof step may change the proof goal:</span>
<span class="cm">     * if a proof of A∧B is expected and a proof of A is provided, the proof goal changes to B</span>
<span class="cm">     * also for proofs of negation-inverted implication</span>
<span class="cm">     * also for case distinction (old thesis is relativized by disjunction of cases)</span>
<span class="cm">     * also for user-defined symbols like subset (unclear how the system knows about that)</span>
<span class="cm"> ❙</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="cm">// combination of internal and external reasoning and the generated proof obligations (back and forth)</span>
<span class="cm">    * external provers do not see all ZFC axioms, e.g., only relevant instantiations of extensionality</span>
<span class="cm">     ❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Bool</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">true</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Logic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ true</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">nat</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat             </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">O</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ nat      </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">one</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat             </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">zero&#39;           </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">I</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ nat ⟶ nat </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">times</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ nat ⟶ nat </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ nat ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ nat ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatRules</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Nat </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} ⊦ X = X  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} ⊦ X = Y ⟶ ⊦ Y = X </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} ⊦ X = Y ⟶ ⊦ Y = Z ⟶ ⊦ X = Z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eq_leq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} ⊦ X = Y ⟶ ⊦ Y ≤ Z ⟶ ⊦ X ≤ Z  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_eq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} ⊦ X ≤ Y ⟶ ⊦ Y = Z ⟶ ⊦ X ≤ Z  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">plus_comm</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} ⊦ X + Y = Y + X  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} ⊦ (X + Y) + Z = X + (Y + Z) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_neut_Ex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} ⊦ X + O = X </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">0</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_neut_L</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} ⊦ O + X = X</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X] trans plus_comm (plus_neut_Ex X)</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_neut</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} ⊦ X + O = X </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X] plus_neut_Ex X </span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">plus_succ_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} ⊦ X + Y&#39; = (X+Y)&#39;</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_succ_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} ⊦ X&#39; + Y = (X+Y)&#39;</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">times_comm</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} ⊦ X * Y = Y * X  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} ⊦ (X * Y) * Z = X * (Y * Z)  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_neut</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} ⊦ X * I = X</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">times_zero</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} ⊦ X * O = O</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_succ_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} ⊦ X * Y&#39; = (X*Y) + X</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_succ_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} ⊦ X&#39; * Y = (X*Y) + X</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">distrib</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} ⊦ X * (Y + Z) = X * Y + X * Z</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">leq_refl</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} ⊦ X≤X  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_trans</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} ⊦ X≤Y ⟶ ⊦ Y≤Z ⟶ ⊦ X≤Z    </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_antisym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} ⊦ X≤Y ⟶ ⊦ Y≤X ⟶ ⊦ X=Y      </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">plus_mono</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} ⊦ X≤Y ⟶ ⊦ X+Z ≤ Y+Z  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_mono_L</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} ⊦ X≤Y ⟶ ⊦ Z+X ≤ Z+Y  </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">                </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,Y,Z,p] leq_eq (eq_leq plus_comm (plus_mono p)) plus_comm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_invmono</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} ⊦ X+Z≤Y+Z ⟶ ⊦ X≤Y  </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">NatOnly</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">least</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} ⊦ O ≤ X </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">plus_larger_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} ⊦ X≤X+Y  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X][Y] eq_leq (sym plus_neut) (plus_mono_L least)  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">plus_larger_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} ⊦ Y≤X+Y  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X][Y] leq_eq plus_larger_L plus_comm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">times_mono</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} ⊦ X ≤ Y ⟶ ⊦ X * Z ≤ Y * Z  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">times_invmono</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} ⊦ X * Z ≤ Y * Z ⟶ ⊦ X ≤ Y  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NatMinus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules/NatOnly</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="cm">// A partial subtraction operation that takes a proof of definedness as a 3rd argument. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} ⊦ Y≤X ⟶ nat  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">!</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class="w">  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus_pi</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,P,Q} ⊦ X-Y!P = X-Y!Q                  </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">minus_intro_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} {p: ⊦ X+Y=Z} ⊦ Z-Y!(leq_eq plus_larger_R p) = X  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus_intro_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} {p: ⊦ X+Y=Z} ⊦ Z-X!(leq_eq plus_larger_L p) = Y  </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">                </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,Y,Z] [p] trans minus_pi (minus_intro_L (trans plus_comm p))</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus_elim</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z,P} ⊦ Z-Y!P = X  ⟶  ⊦ X+Y = Z                      </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span>
<span class="w">  </span><span class="cm">// minus_inverse : {X} ⊦ X-X!leq_refl = O  ❘</span>
<span class="cm">                = [X] trans minus_pi (minus_intro_R (plus_neut_Ex X)) ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// minus_neut    : {X} ⊦ X-O!least = X ❘</span>
<span class="cm">                = [X] trans minus_pi (minus_intro_L (plus_neut_Ex X))  ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// also provable: associativity +- (maybe X-(Y+Z)=(X-Y)-Z must be axiom) and distributivity *- ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FOLPatterns</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LFS</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">pattern</span><span class="w"> </span><span class="nc">fun</span><span class="p">(</span><span class="nv">n:NAT</span><span class="p">)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">:</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">f</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term^n ⟶ term</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Monoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?FOLPatterns</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">fun</span><span class="w"> </span><span class="nc">comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">real</span><span class="w"> </span><span class="l l-URI">scala://real.omdoc.org/</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info?MMTURILexer</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   A first test case for writing imperative programs as MMT theories. ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ProgLang</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?CF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞real:?Bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞real:?StandardNat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">print</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type} a ⟶ None</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">print</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/cf?Print</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Counter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?ProgLang</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">counter</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">add</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ None</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] counter = counter + n</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w">  </span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Program</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?ProgLang</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">main</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">print 1</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// This one is still experimental.❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// main2 =</span>
<span class="cm">    var c = new examples?Counter in</span>
<span class="cm">    c.add 3;</span>
<span class="cm">    print c.add</span>
<span class="cm">  ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/programs</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Machine</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">obj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">loc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">command</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">add</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">obj ⟶ loc ⟶ command</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">get</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loc ⟶ obj ⟶ command</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">update</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loc ⟶ obj ⟶ command</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">delete</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loc ⟶ obj ⟶ command</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">chan</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">stdio</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">chan</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">chan ⟶ obj ⟶ command</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">out</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">chan ⟶ obj ⟶ command</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">execute</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">command ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/programs</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Syntax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Unit</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">prog</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat ⟶ prog Nat</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">succ</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">one</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">succ zero</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a ⟶ prog a ⟶ prog Bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool ⟶ prog Bool           </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">¬</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat ⟶ prog Nat ⟶ prog Nat  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat ⟶ prog Nat ⟶ prog Nat  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">seq</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} prog a ⟶ prog b ⟶ prog b          </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ifte</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog Bool ⟶ prog a ⟶ prog a ⟶ prog a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">if</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">then</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">else</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ifte2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool ⟶ prog Unit ⟶ prog Unit</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b,c] if b then c else unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">while</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool ⟶ prog Unit ⟶ prog Unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">print</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a ⟶ prog Unit</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">print</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">read</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">val</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} prog a ⟶ (prog a ⟶ prog b) ⟶ prog b</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">val</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">Var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} prog a ⟶ (Var a ⟶ prog b) ⟶ prog b</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">var</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">varref</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a ⟶ prog a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assign</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a ⟶ prog a ⟶ prog Unit</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">←</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Syntax</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">main</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">val (read Nat) [x]</span>
<span class=" -MMT_ObjectExpression">         var zero [y]</span>
<span class=" -MMT_ObjectExpression">         while (¬ x = y&#39;) (</span>
<span class=" -MMT_ObjectExpression">           print x;</span>
<span class=" -MMT_ObjectExpression">           y ← succ y&#39;</span>
<span class=" -MMT_ObjectExpression">         )</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">Machine</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">obj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">loc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">command</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">add</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">obj ⟶ loc ⟶ command</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">get</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loc ⟶ obj ⟶ command</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">update</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loc ⟶ obj ⟶ command</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">delete</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loc ⟶ obj ⟶ command</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">chan</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">stdio</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">chan</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">chan ⟶ obj ⟶ command</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">out</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">chan ⟶ obj ⟶ command</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">execute</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">command ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OperationalSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Syntax</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Machine</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="vc">objectify</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a ⟶ obj  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">objectify</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">varloc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a ⟶ loc ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a ⟶ prog a ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⟿</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">eval_seq</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b, p:prog a, q: prog b, x,y} p⟿x ⟶ q⟿y ⟶ p;q ⟿ y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_if_true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, c, t,e: prog a, x} c⟿true ⟶ t⟿x ⟶ if c then t else e ⟿ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eval_if_false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, c, t,e: prog a, x} c⟿false ⟶ e⟿x ⟶ if c then t else e ⟿ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_while_true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{c, b, x, y} c⟿true ⟶ b⟿x ⟶ while c b ⟿ y ⟶ while c b ⟿ y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eval_while_false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{c, b} c⟿false ⟶ while c b ⟿ unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_var</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b, p: prog a, cont: Var a ⟶ prog b, l, x, y}</span>
<span class=" -MMT_ObjectExpression">                p⟿x ⟶ execute (add (objectify x) l) ⟶ ({v} v@l ⟶ cont v ⟿ y)</span>
<span class=" -MMT_ObjectExpression">              ⟶ (var p cont)⟿y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">             </span>
<span class="w">  </span><span class="vc">eval_varref</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,v:Var a,l,x}</span>
<span class=" -MMT_ObjectExpression">                v@l ⟶ execute (get l (objectify x))</span>
<span class=" -MMT_ObjectExpression">              ⟶ v&#39; ⟿ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">              </span>
<span class="w">  </span><span class="vc">eval_assign</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, v: Var a,p,l,x}</span>
<span class=" -MMT_ObjectExpression">                p⟿x ⟶ v@l ⟶ execute (update l (objectify x))</span>
<span class=" -MMT_ObjectExpression">              ⟶ v←p ⟿ unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_print</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, p: prog a, x}</span>
<span class=" -MMT_ObjectExpression">                p⟿x ⟶ execute (out stdio (objectify x))</span>
<span class=" -MMT_ObjectExpression">              ⟶ (print p) ⟿ unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_read</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, x: prog a}</span>
<span class=" -MMT_ObjectExpression">                execute (in stdio (objectify x))</span>
<span class=" -MMT_ObjectExpression">              ⟶ (read a) ⟿ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/programs</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OperationalSemantics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Syntax</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Machine</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="vc">objectify</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a ⟶ obj  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">objectify</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">varloc</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a ⟶ loc ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a ⟶ prog a ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⟿</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">eval_seq</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b, p:prog a, q: prog b, x,y} p⟿x ⟶ q⟿y ⟶ p;q ⟿ y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_if_true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, c, t,e: prog a, x} c⟿true ⟶ t⟿x ⟶ if c then t else e ⟿ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eval_if_false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, c, t,e: prog a, x} c⟿false ⟶ e⟿x ⟶ if c then t else e ⟿ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_while_true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{c, b, x, y} c⟿true ⟶ b⟿x ⟶ while c b ⟿ y ⟶ while c b ⟿ y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eval_while_false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{c, b} c⟿false ⟶ while c b ⟿ unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_var</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b, p: prog a, cont: Var a ⟶ prog b, l, x, y}</span>
<span class=" -MMT_ObjectExpression">                p⟿x ⟶ execute (add (objectify x) l) ⟶ ({v} v@l ⟶ cont v ⟿ y)</span>
<span class=" -MMT_ObjectExpression">              ⟶ (var p cont)⟿y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">             </span>
<span class="w">  </span><span class="vc">eval_varref</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,v:Var a,l,x}</span>
<span class=" -MMT_ObjectExpression">                v@l ⟶ execute (get l (objectify x))</span>
<span class=" -MMT_ObjectExpression">              ⟶ v&#39; ⟿ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">              </span>
<span class="w">  </span><span class="vc">eval_assign</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, v: Var a,p,l,x}</span>
<span class=" -MMT_ObjectExpression">                p⟿x ⟶ v@l ⟶ execute (update l (objectify x))</span>
<span class=" -MMT_ObjectExpression">              ⟶ v←p ⟿ unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_print</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, p: prog a, x}</span>
<span class=" -MMT_ObjectExpression">                p⟿x ⟶ execute (out stdio (objectify x))</span>
<span class=" -MMT_ObjectExpression">              ⟶ (print p) ⟿ unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">eval_read</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, x: prog a}</span>
<span class=" -MMT_ObjectExpression">                execute (in stdio (objectify x))</span>
<span class=" -MMT_ObjectExpression">              ⟶ (read a) ⟿ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/programs</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Syntax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Unit</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">prog</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat ⟶ prog Nat</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">succ</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">one</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">succ zero</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a ⟶ prog a ⟶ prog Bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool ⟶ prog Bool           </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">¬</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat ⟶ prog Nat ⟶ prog Nat  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Nat ⟶ prog Nat ⟶ prog Nat  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">seq</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} prog a ⟶ prog b ⟶ prog b          </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ifte</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog Bool ⟶ prog a ⟶ prog a ⟶ prog a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">if</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">then</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">else</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ifte2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool ⟶ prog Unit ⟶ prog Unit</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b,c] if b then c else unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">while</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prog Bool ⟶ prog Unit ⟶ prog Unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">print</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a ⟶ prog Unit</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">print</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">read</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} prog a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">val</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} prog a ⟶ (prog a ⟶ prog b) ⟶ prog b</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">val</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">Var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} prog a ⟶ (Var a ⟶ prog b) ⟶ prog b</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">var</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">varref</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a ⟶ prog a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">assign</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a ⟶ prog a ⟶ prog Unit</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">←</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Syntax</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">main</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">val (read Nat) [x]</span>
<span class=" -MMT_ObjectExpression">         var zero [y]</span>
<span class=" -MMT_ObjectExpression">         while (¬ x = y&#39;) (</span>
<span class=" -MMT_ObjectExpression">           print x;</span>
<span class=" -MMT_ObjectExpression">           y ← succ y&#39;</span>
<span class=" -MMT_ObjectExpression">         )</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/physics</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Quantities</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">examples?Real</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">// the type of dimensions, e.g., time, length ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">dim</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">scalar</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_dim</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim ⟶ dim ⟶ dim             </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">inv_dim</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim ⟶ dim                   </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⁻</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">div_dim</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim ⟶ dim ⟶ dim </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,e] d*e⁻ </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">square_dim</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim ⟶ dim</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d] d*d        </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">²</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">cube_dim</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim ⟶ dim</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d] d*d*d      </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">³</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">eq_dim</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim ⟶ dim ⟶ type               </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">assoc</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d:dim,e:dim,f:dim} d*(e*f)=(d*e)*f</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">comm</span><span class="w">       </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d:dim,e:dim} d*e=e*d</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_scalar_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} d*scalar = d        </span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_scalar_left</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} scalar*d = d        </span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_inv_right</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d:dim} d*d⁻ = scalar   </span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_inv_left</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d:dim} d⁻*d = scalar   </span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">inv_mult</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d:dim,e:dim} (d*e)⁻ = d⁻*e⁻   </span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">inv_inv</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} d⁻⁻ = d                    </span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>

<span class="w">   </span><span class="cm">// the type of quantities of a certain dimension, e.g., 10 s, 100 m ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">quantity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">eq_quant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} $d ⟶ $d ⟶ type               </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">==</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// the type of units of a dimension, e.g., second, meter</span>
<span class="cm">      units are functions that map real numbers to quantities ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d] real ⟶ $d</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// takes a real number and a unit and makes the quantity</span>
<span class="cm">      e.g., 10&#39;meter❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">makeQuantity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} real ⟶ unit d ⟶ $ d</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,r,u] u r</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// addition and subtraction quantities ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">add_quant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} $d ⟶ $d ⟶ $d  </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">++</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">sub_quant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} $d ⟶ $d ⟶ $d  </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">--</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">add_quant_same_unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d,u: unit d, p, q} p&#39;u ++ q&#39;u == (p + q)&#39;u</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// role Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">sub_quant_same_unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d,u: unit d, p, q} p&#39;u -- q&#39;u == (p - q)&#39;u</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// role Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">// multiplication and division of dimensions, quantities, and units (should be imported from elsewhere) ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_quant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d,e} $d ⟶ $e ⟶ $(d * e)  </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">**</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">div_quant</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d,e} $d ⟶ $e ⟶ $(d / e)  </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">//</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">mult_unit</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d,e} unit d ⟶ unit e ⟶ unit(d * e)  </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">**</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,e,u,v] [r] (r&#39;u) ** (r&#39;v)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">div_unit</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d,e} unit d ⟶ unit e ⟶ unit(d / e)  </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">//</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">              </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,e,u,v] [r] (r&#39;u) // (r&#39;v)</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">mult_scalar</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} real ⟶ $ d ⟶ $ d</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">multiples_of</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} $ d ⟶ unit d </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,q] [r] r @ q</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">multiples_of</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Dimensions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Quantities</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">length</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">time</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">mass</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">temperature</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">area</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">length ²</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">volume</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">length ³</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">velocity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">length / time</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">acceleration</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">length * time⁻²</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">force</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mass * acceleration</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">pressure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dim</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">force * length⁻²</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Prefixes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Dimensions</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// TODO ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">milli</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} unit d ⟶ unit d</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [d,u] [r] (r / 1000) &#39; u</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">milli</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">centi</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} unit d ⟶ unit d</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [d,u] [r] (r / 100) &#39; u</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">centi</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">deci</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} unit d ⟶ unit d</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [d,u] [r] (r / 10) &#39; u</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">deci</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Units</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Dimensions</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">meter</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ length</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">second</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ time</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">gramm</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ mass</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">meters</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit length</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of meter</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">seconds</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit time</span><span class=" -MMT_OD">❘</span><span class="w">   </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of second</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">gramms</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit mass</span><span class=" -MMT_OD">❘</span><span class="w">   </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of gramm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">kelvin</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$temperature</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">kelvins</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit temperature</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of kelvin</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DerivedUnits</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Prefixes</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Units</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">litre</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ volume</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = (1 &#39; deci meters) ** (1 &#39; deci meters) ** (1 &#39; deci meters)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">litres</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit volume</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of litre</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CookingUnit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DerivedUnits</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">tablespoon</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ volume</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">teaspoon</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ volume</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">cup</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">$ volume</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">tablespoons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit volume</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of (15 &#39; milli litres)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">teaspoons</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit volume</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of (5 &#39; milli litres)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">cups</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit volume</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of (250 &#39; milli litres)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TimeUnits</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Units</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">minutes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit time</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of (60 &#39; seconds)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">hours</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit time</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">multiples_of (60 &#39; minutes)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TemperatureUnits</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Units</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">celsius</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit temperature</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">//  = [r] (r+273+(15/100)) &#39; kelvins </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">°C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">fahrenheit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit temperature</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">//  = [r] (r-32)*5/9 °C  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">°F</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfrules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info/</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">stdlit</span><span class="w"> </span><span class="l l-URI">scala://uom.api.mmt.kwarc.info/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   a quick, minimal definition of fractional numbers for use in quantities.mmt ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Real</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">real</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">plus</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real ⟶ real ⟶ real</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">minus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real ⟶ real ⟶ real </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">times</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real ⟶ real ⟶ real</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">div</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real ⟶ real ⟶ real</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Realize real stdlit?StandardRat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://hku.hk/PL</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T The SEDEL type theory (simple type theory with distributive intersection types).</span>
<span class="cm">   Formalized with Bruno Oliveira&#39;s students during Florian Rabe&#39;s March 2019 visit at Hongkong University.</span>
<span class="cm">   </span>
<span class="cm">   See also https://i.cs.hku.hk/~bruno/papers/nested.pdf and https://i.cs.hku.hk/~bruno/papers/traits.pdf</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">// define some namespace prefixes❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Subtyping</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lfrules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info/</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">stdlit</span><span class="w"> </span><span class="l l-URI">scala://uom.api.mmt.kwarc.info/</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SEDEL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">lfx:?LFSubtyped</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="sd"># Syntactic Categories</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T types and terms of simple type theory❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="sd"># Judgments</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="sd">## Equality of terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A ⟶ tm A ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≡</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X: tm A} X ≡ A X</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="cm">// admissible rule (admissibility proof by logical relation)❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,X,Y: tm A, F: tm A ⟶ tm B} X ≡ A Y ⟶ (F X) ≡ B (F Y)</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="sd">## Subtyping</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">sbt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">spt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] B &lt; A</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T proof irrelevance for subtyping proofs❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?TermIrrelevanceRule sbt</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">st_refl</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A &lt; A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">st_trans</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} A &lt; B ⟶ B &lt; C ⟶ A &lt; C</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T embed SEDEL subtyping into LF subtyping❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">st_shallow</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A &lt; B ⟶ tm A &lt;* tm B</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="sd">## Relationship between Equality and Subtyping</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T equality depends on the type at which terms are compared.</span>
<span class="cm">     Equality is preserved when going to larger types.</span>
<span class="cm">     But not necessarily the other way round, e.g., all terms are equal at unit type.❙</span><span class="w"> </span>
<span class="w">  </span><span class="cm">// TODO: this should type-check❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// equal_st : {A,B,s:tm A, t: tm A} A &lt; B ⟶ s ≡ A t ⟶ s ≡ B t❙</span><span class="w">  </span>
<span class="w">  </span>
<span class="w">  </span><span class="sd"># Syntax</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="sd">## Function Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">→</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fun_st</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C,D} A &gt; C ⟶ B &lt; D ⟶ A → B &lt; C → D</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lambda</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (tm A ⟶ tm B) ⟶ tm (A → B)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">apply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm (A → B) ⟶ tm A ⟶ tm B </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">beta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B, F: tm A ⟶ tm B, a} (λ [x] F x) @ a ≡ B (F a)</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">beta</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong_apply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm (A → B), G, X, Y}</span>
<span class=" -MMT_ObjectExpression">                 (F ≡ (A → B) G) ⟶ X ≡ A Y ⟶ (F @ X) ≡ B (G@Y)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong_lambda</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,F: tm A ⟶ tm B,G} ({x} (F x) ≡ B (G x)) ⟶ (λ F) ≡ (A → B) (λ G)</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="sd">## Top type</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T The top type can be seen as the common supertype of all types, the unit type, and the neutral element of intersection.❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">top</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⊤</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm ⊤</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">st_top</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A &lt; ⊤</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eq_top</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: tm ⊤} x ≡ ⊤ unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="sd">## Bottom type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">bottom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⊥</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">st_bottom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊥ &lt; A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="sd">## Intersection types</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">inter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&amp;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter_st_left</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A &amp; B &lt; A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter_st_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A &amp; B &lt; B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter_glb</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} C &lt; A ⟶ C &lt; B ⟶ C &lt; A &amp; B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">disjoint</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?TermIrrelevanceRule disjoint</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">disjointIntro</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ({C} C &gt; A ⟶ C &gt; B ⟶ C &gt; ⊤) ⟶ A * B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">disjointElim</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} A * B ⟶ {C} C &gt; A ⟶ C &gt; B ⟶ C &gt; ⊤</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// TODO: these definitions should type-check❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter_left</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A &amp; B ⟶ tm A</span><span class=" -MMT_OD">❘</span><span class="cm">// = [A,B,x] x</span><span class=" -MMT_OD">❘</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} tm A &amp; B ⟶ tm B</span><span class=" -MMT_OD">❘</span><span class="cm">// = [A,B,x] x</span><span class=" -MMT_OD">❘</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter_in</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} {a:tm A} {b: tm B} A * B ⟶ tm A &amp; B</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">,,</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">%I5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// TODO: this must solve the proof term (which is in the context) as an implicit argument❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// cong_inter_in : {A,B} A * B ⟶ {a1,a2: tm A, b1,b2: tm B}</span>
<span class="cm">                  a1 ≡ A a2 ⟶ b1 ≡ B b2 ⟶ (a1 ,,h b1) ≡ (A &amp; B) (a2 ,, b2)❙</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T Distributivity is natural but makes it harder to devise algorithms for subtyping.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">st_distrib</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} (A → B) &amp; (A → C) &lt; A → (B &amp; C)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">st_distrib_0</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊤ &lt; (A → ⊤)</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">top_arrow</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊤ &lt; (⊤ → ⊤)</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">st_distrib_0 ⊤</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="sd">## Literals</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">nat</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm nat ⟶ tm nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T import lexing and computation rules for literals❙</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Realize (tm nat) stdlit?StandardNat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Realize zero stdlit?Arithmetic/Zero</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?Realize succ stdlit?Arithmetic/Succ</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="sd"># Testing</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">identity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A → A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] λ [x] x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">id</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">compose</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} tm A → B ⟶ tm B → C ⟶ tm A → C</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">           </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C,f,g] λ[x] g @ (f @ x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span>
<span class="w">  </span><span class="vc">test</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(id nat) @ (succ 1) ≡ nat 2</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">beta ([x] x) 2</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="w">  </span>
<span class="w">  </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FlexaryConnectives</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LFS</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">flexand</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} prop^n ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⋀</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexandI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} {a: prop^n} ⟨&#39; ⊦ a..i | i:n &#39;⟩ ⟶ ⊦ ⋀ a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexandE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} {a: prop^n} ⊦ ⋀ a ⟶ {i} DED (succ i) LEQ n ⟶ ⊦ a..i</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">flexor</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} prop^n ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⋁</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexorI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} {a: prop^n} {i} DED (succ i) LEQ n ⟶ ⊦ a..i ⟶ ⊦ ⋁ a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexorE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} {a: prop^n} {C} ⊦ ⋁ a ⟶ ⟨&#39; ⊦ a..i ⟶ ⊦ C |i:n &#39;⟩ ⟶ ⊦ C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fleximp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} prop^n ⟶ prop ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⇒*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fleximpI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} {a: prop^n, b} (⟨&#39; ⊦ a..i|i:n &#39;⟩ ⟶ ⊦ b) ⟶ ⊦ a ⇒* b</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fleximpE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} {a: prop^n, b} ⊦ a ⇒* b ⟶ ⟨&#39; ⊦ a..i|i:n &#39;⟩ ⟶ ⊦ b</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FlexaryQuantifiers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LFS</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">flexforall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} (term^n ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∀*</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexforallI</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n, F: term^n ⟶ prop} ({x:term^n} ⊦ F x) ⟶ ⊦ ∀* [x] F x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexforallE</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n, F: term^n ⟶ prop} {x:term^n} ⊦ (∀* [x] F x) ⟶ ⊦ F x</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">flexexists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} (term^n ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∃*</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexexistsI</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n, F: term^n ⟶ prop} {x:term^n} ⊦ F x ⟶ ⊦ ∃* [x] F x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">flexexistsE</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n, F: term^n ⟶ prop,C} ({x:term^n} ⊦ (∃* [x] F x) ⟶ ⊦ C) ⟶ ⊦ C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   a simple language for set theory</span>
<span class="cm">     This primarily exemplifies advanced notations for parsing and presentation. ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Sets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">set</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">in</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∈</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">75</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  </span><span class="cm">// No printable characters are reserved. Here = is used as a delimiter. </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ type     </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ded</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Elem A yields a for elements of the set A.</span>
<span class="cm">     Its notation is chosen such that variable attributions can be parsed and presented as x ‍∈ A instead of x : Elem A.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Elem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ type       </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">Elem</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">70</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The following declaration lifts equal to the types Elem A.</span>
<span class="cm">     For parsing (#) it needs a different notation (==); for presentation (##) we can reuse =.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">elemequal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} Elem A ⟶ Elem A ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">==</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">                                          </span><span class="cm">//  This notation for presentation is 2-dimensional: _ yields a subscript and %I marks an implicit (hidable) argument. </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                                          </span><span class="p">##</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="ss">_</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// A universal quantifier over all elements of a given set.</span>
<span class="cm">     Using Elem A, the relativization can be expressed in the type system.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (Elem A ⟶ prop) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="cm">//  The notation uses V2T for an attributed variable (x ‍∈ A) and -3 for the scope.</span>
<span class="cm">             Thus, forall is a binder as far as the MMT notation system is concerned.</span>
<span class="cm">             The type system considers it as a higher-order constant of LF. The LF plugin for MMT configures the conversion between the two. </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">empty</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set       </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∅</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="cm">// Several set operators use {}-based notations and are binders.</span>
<span class="cm">     MMT can handle that.</span>
<span class="cm">     However, we have to use ; instead of : for replacement because the delimiter scheme { : } is already used for the Pi symbol of LF.</span>
<span class="cm">     Because the notations are left- and right-closed, we can give them very low precedences, which has the effect that they act like brackets.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">compr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (Elem A ⟶ prop) ⟶ set      </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100004</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">repl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{B} (Elem A ⟶ Elem B) ⟶ set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="ss">-</span><span class="si">4</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">V3T</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100006</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">union</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ set          </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∪</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">120</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inter</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ set          </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∩</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">120</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// The big operators for union and intersection are binders with 2-dimensional notations.</span>
<span class="cm">     In the __ produces underscripts.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bigunion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (Elem A ⟶ set) ⟶ set </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⋃</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class="w">  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">⋃</span><span class="w"> </span><span class="ss">__</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">biginter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (Elem A ⟶ set) ⟶ set </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⋂</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">60</span><span class="w">  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">⋂</span><span class="w"> </span><span class="ss">__</span><span class="w"> </span><span class="si">V2T</span><span class="w"> </span><span class="ss">-</span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fun</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ set</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⇒</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">120</span><span class=" -MMT_OD">❘</span><span class="w">  </span><span class="cm">//  ^ produces superscripts. </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lam</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{B} (Elem A ⟶ Elem B) ⟶ Elem (fun A B)       </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">app</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{B} Elem (fun A B) ⟶ Elem A ⟶ Elem B         </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">120</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">prod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ set</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">×</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">120</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{B} Elem A ⟶ Elem B ⟶ Elem (A × B)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">       </span><span class="cm">//  We can use () in notations as well. But the precedence has to below the precedence of the built-in notation for bracketed expressions. </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">       </span><span class="p">#</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000000001</span><span class=" -MMT_OD">❘</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// The two projection use, e.g., ._1 for parsing and subscripts for presentation. %D1 yields 1 as a delimiter (instead of an argument marker). ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi1</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{B} Elem (A × B) ⟶ Elem A</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">._</span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">_</span><span class="w"> </span><span class="ss">%D</span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">200</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi2</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{B} Elem (A × B) ⟶ Elem B</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">._</span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">201</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">_</span><span class="w"> </span><span class="ss">%D</span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">200</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">cardinality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100000</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Some example expressions that use the notations. ❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{F: Elem A ⟶ set} ded A ∩ ⋃ x ∈ A. (F x) = ⋃ x. A ∩ (F x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pairs</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ded {x ∈ A × A | x._1 == x._2} = {(x,x) ; x ∈ A} </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">sizes</span><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (ded |{f∈A⇒A|∀x∈A.f@x==x}|=|∅⇒∅|)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   polymorphic equality (essentially identity types) ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Equality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} a ⟶ a ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:a} x = x   </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,x,y} x = y ⟶ {f: a ⟶ b} (f x) = (f y)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">cong</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cast</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type, A: a ⟶ type, x:a, y:a} x = y ⟶ A x ⟶ A y</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">sym</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:a,y} x = y ⟶ y = x</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,x,y][p] cast a ([u] u = x) x y p (refl x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,x:a,y,z} x = y ⟶ y = z ⟶ x = z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,x,y,z,p,q] cast a ([u] x = u) y z q p</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   polymorphic lists ❚</span><span class="w"></span>
<span class="w"> </span><span class="kd">theory</span><span class="w"> </span><span class="nc">Lists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Equality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">list</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">nil</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} list a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">nil</span><span class="w"> </span><span class="si">%I1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cons</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} a ⟶ list a ⟶ list a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">75</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">append</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} list a ⟶ list a ⟶ list a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">75</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">append_nil</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, m: list a} nil + m = m</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">append_cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, x: a, l: list a, m: list a} (x, l) + m = x , (l + m)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DepSumChurch</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tm</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} tm A ⟶ tm A ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w">  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">Sigma</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (tm A ⟶ tp) ⟶ tp                                      </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Σ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pair</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: tm A ⟶ tp} {x} tm (B x) ⟶ tm Σ [x] B x             </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pair</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi1</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: tm A ⟶ tp} tm (Σ [x] B x) ⟶ tm A                   </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pi</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">pi2</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: tm A ⟶ tp} {u:tm (Σ [x] B x)} tm (B (pi1 u))       </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pi</span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prod</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp ⟶ tp </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] Σ [x: tm A] B  </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">         </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">×</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">conv_pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: tm A ⟶ tp, u: tm Σ [x] B x} u = pair (pi1 u) (pi2 u)     </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">conv_pi1</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: tm A ⟶ tp, X, Y: tm (B X)} pi1 (pair A B X Y) = X        </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Note that conv_pi2 only type-checks because conv_pi1 is used as a simplification rule. ❙</span><span class="w">  </span>
<span class="w">  </span><span class="vc">conv_pi2</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: tm A ⟶ tp, X, Y: tm (B X)} pi2 (pair A B X Y) = Y        </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DepSumLF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?DHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">Sigma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} (A ⟶ type) ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Σ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B: A ⟶ type, a : A } B a ⟶ Σ B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pair</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">pi1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B: A ⟶ type} Σ B ⟶ A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pi</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">pi2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B: A ⟶ type} {p : Σ B} B (pi1 p) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pi</span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">conv_pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type, B: A ⟶ type, u: Σ B} DED u EQ (pair (pi1 u) (pi2 u)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">conv_pi1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B: A ⟶ type}{a : A, b: B a} DED (pi1 (pair A B a b)) EQ a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Note that conv_pi2 only type-checks because conv_pi1 is used as a simplification rule. ❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">conv_pi2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B: A ⟶ type}{a : A, b: B a} DED (pi2 (pair A B a b)) EQ b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="cm">/T   This file contains the general structure of the MMT tutorial given at CICM 2016.❚</span><span class="w"></span>


<span class="cm">/T   A namespace declaration defines the root URI of the following content.❚</span><span class="w"></span>
<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/tutorial</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">document</span><span class="w"> </span><span class="nn">SFOL</span><span class="w"> </span>

<span class="cm">/T   A theory defines a language. It may optionally use a meta-theory, which is given by its URI.❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?FOL</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   We can already use our logic as the meta-theory of a theory.</span>
<span class="cm">     To refer to FOL, we use its URI, which is of the form NAMESPACE?THEORYNAME.</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">/T   A Semigroup consists of ...❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span>
<span class="cm">/T   Now we define the proof theory of LF using natural ⊢uction proof rules.</span>
<span class="cm">     It is practical to do this in a separate theory that includes the syntax above.</span>
<span class="cm">❚</span><span class="w">        </span>
<span class="w">     </span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   The rules declared so far only yield intuitionistic first-order logic. To get to classical logic,</span>
<span class="cm">we can use the modular approach and extend NatDed by the law of excluded middle: ❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?ClassicalSFOL</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w"></span>

<span class="kd">document</span><span class="w"> </span><span class="nn">AlgebraicHierarchy</span><span class="w"> </span>

<span class="cm">/T   Exemplary, we can now built the usual hierarchy of algebraic theories in a modualar way, starting again with</span>
<span class="cm">	semigroups: ❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Semigroup</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   Monoids just extend Semigroups: ❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   A Monoid happens to be a preorder - a fact, that we can express using Views. A view is a morphism</span>
<span class="cm">		between two theories, that maps each declaration of the domain to a valid expression</span>
<span class="cm">		over the symbols in the codomain such, that typing judgments are preserved. ❚</span><span class="w"></span>
<span class="w">		</span>
<span class="cm">/T   First, a theory of preorders: ❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?PreOrder</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   To show that monoids are preorders, we have to map each axiom of a preorder to a provable</span>
<span class="cm">			statement in the theory of monoids, i.e. we need a view preorder ⟶ monoid, like so: ❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?MonoidAsPreorder</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   Next, on to groups: ❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Group</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   For Rings we will need abelian groups in particular, so let&#39;s create a theory for &quot;abelian&quot;: ❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Abelian</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   ...and one for abelian groups: ❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?AbelianGroup</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   Now for Rings. Obviously, if we want to implement a theory of rings modularly, we</span>
<span class="cm">			want to make use of the fact, that a ring is an additive abelian group with a multiplicative monoid.</span>
<span class="cm">			Both theories already exist, but we need them with respect to two different operations - includes</span>
<span class="cm">			will not get us there. Instead, we will use MMT structures. Structures behave like includes,</span>
<span class="cm">			except that they allow us to slightly modify the imported declarations; in particular we are allowed</span>
<span class="cm">			to provide new definitions and notations for the imported symbols: ❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Ring</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w"></span>

<span class="kd">document</span><span class="w"> </span><span class="nn">LiteralsAndRules</span><span class="w"> </span>
<span class="cm">/T   Next, we will look at different ways to implement RULES by writing a theory for </span>
<span class="cm">			natural numbers ❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?Nat</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   And of course, natural numbers form a monoid, which we can express with a view: ❚</span><span class="w"></span>
<span class="cp">ref</span><span class="w"> </span><span class="l l-URI">?NatAsMonoid</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="cm">//   Comments begin with // and end with the delimiter of the current level.</span>
<span class="cm">     </span>
<span class="cm">     Comments starting with /T count as content themselves and are, e.g., preserved in the HTML  rendering of a file.</span>
<span class="cm">     Therefore, all comments in this file start with /T❚</span><span class="w"></span>


<span class="cm">/T   This file contains a definition of first-order logic in MMT as used in the MMT tutorial given at CICM 2016.❚</span><span class="w"></span>


<span class="cm">/T   A namespace declaration defines the root URI of the following content.❚</span><span class="w"></span>
<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/tutorial</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   A theory defines a language. It may optionally use a meta-theory, which is given by its URI.❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">FOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T The simplest declaration in an MMT theory introduces a named symbol.</span>
<span class="cm">     Every declaration can have multiple attributes following the name.</span>
<span class="cm">     Each attribute is introduced by a special keywork:</span>
<span class="cm">       the type      - introduced by &#39;:&#39;.</span>
<span class="cm">       the definiens - introduced by &#39;=&#39;</span>
<span class="cm">       the notation  - introduced by &#39;#&#39;</span>
<span class="cm">     If multiple attributes are present, they must be ended with the object delimiter. </span>
<span class="cm">  ❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T The following declaration introduces the type of FOL propositions.</span>
<span class="cm">     Its type is the object &#39;type&#39;, which is defined by LF.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T All symbols occuring in an MMT object are cross-linked to their declaration.</span>
<span class="cm">     Try hovering or control-clicking on &#39;type&#39; above❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T The following declarations introduce the constructors of propositional logic and their notations.❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T ⟶ is used for simple functions. It is part of the notations defined by LF.</span>
<span class="cm">     It is right-associative. By double-clicking on ⟶, you can see its arguments.❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">true</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop                                 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">false</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop                                 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">and</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∧</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∨</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">impl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⇒</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop         </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">¬</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T Note that multiple attributes (here: type and notation) must be separated by ❘.</span>
<span class="cm">     Among other things, that allows using :, =, and # as ordinary characters anywhere else.❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Notations consist of numbers refering to argument positions and arbitrary Unicode strings defining delimiters.</span>
<span class="cm">     Optionally, a notation may end in &#39;prec NUMBER&#39; to define a precedence. Higher precedences bind stronger.</span>
<span class="cm">     For example, &#39;1 ∧ 2 prec 15&#39; makes conjunction an infix operator with precedence 15.</span>
<span class="cm">  ❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T As an example for a defined symbol, let us consider the equivalence connective.</span>
<span class="cm">     We define it in terms of conjunction and implication.</span>
<span class="cm">     The definiens uses [x:prop,y:prop], which is the notation defined for lambda-abstraction in LF.</span>
<span class="cm">     The types of the bound variables are infered by MMT - try hovering over them to see the types.</span>
<span class="cm">  ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ prop ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⇔</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] (x ⇒ y) ∧ (y ⇒ x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T Here three attributes (type, notation, and definition) are present. The order does not matter.❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T Now for the first-order aspects.</span>
<span class="cm">     We opt for sorted (also called typed) first-order logic, e.g., there may be multiple sorts that we can quantify over separately.❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T The following declarations introduce the LF-type of sorts and the LF type of terms of a given sort.❙</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="vc">sort</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">term</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort ⟶ type </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T The point of the latter is as follows: If, e.g., &#39;s:sort&#39; is a sort, then &#39;tm s&#39; is the type of all terms of sort s❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T The following declaration introduces a symbol for sorted equality.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s: sort} tm s ⟶ tm s ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">30</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T Here {s: sort} is the Pi-binder of LF for dependent function spaces.</span>
<span class="cm">       Thus, equal takes a sort as its first argument and then 2 terms of that sort.❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T In the notation for equal, the first argument - the sort - is not mentioned.</span>
<span class="cm">     That makes the sort an implicit argument that is infered by MMT.</span>
<span class="cm">  ❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T The types of the quantifiers use LF&#39;s higher-order abstract syntax:</span>
<span class="cm">     &#39;tm s ⟶ prop&#39; can be used as the type of proposition with a free variables of type &#39;tm s&#39;.</span>
<span class="cm">     The sort is an implicit argument again, and the type of sort is infered by MMT.</span>
<span class="cm">  ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s} (tm s ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s} (tm s ⟶ prop) ⟶ prop</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∃</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T Finally, we need to be able to talk about the truth of propositions.</span>
<span class="cm">     For that, we introduce a Curry-Howard style judgment: The LF-type &#39;⊢ P&#39; is the type of proofs of the proposition &#39;P&#39;.</span>
<span class="cm">  ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">proof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⊢</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class="w"></span>
<span class="w">        </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T It&#39;s practical to give ⊢ a very low precedence to avoid brackets later on.❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T The &#39;role Judgment&#39; is an attribute introduced by the LF plugin (which tells MMT to be loaded automatically whenever LF is used).</span>
<span class="cm">     By annotation the symbol &#39;proof&#39; in this way, the plugin can add some LF-specific language support, in particular, it can generate appropriate default notations.</span>
<span class="cm">  ❙</span><span class="w"></span>
<span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span>
<span class="cm">/T   Now we define the proof theory of LF using natural deduction proof rules.</span>
<span class="cm">     It is practical to do this in a separate theory that includes the syntax above.</span>
<span class="cm">❚</span><span class="w">        </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NatDed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T &#39;include THEORY&#39; includes another theory.</span>
<span class="cm">     When refering to a theory, we do not actually have to give the absolute URI.</span>
<span class="cm">     Below the relative URI &#39;?FOL&#39; is resolved relative to the current namespace and yields http://cds.omdoc.org/examples/tutorial?FOL.</span>
<span class="cm">  ❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FOL </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Some FOL proof rules talk about contradictioins.</span>
<span class="cm">     A FOL theory is contradictory if we can derive any formula. That can be captured by the LF type &#39;{a: prop} ⊢ a&#39;. If this type is non-empty, a theory is inconsistent.</span>
<span class="cm">     We introduce an abbreviation for it:❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">contra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} ⊢ a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">↯</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊢ true</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">falseE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊢ false ⟶ ↯</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">andI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊢ A ⟶ ⊢ B ⟶ ⊢ A ∧ B   </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊢ A ∧ B ⟶ ⊢ A         </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">andEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊢ A ∧ B ⟶ ⊢ B         </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">orIl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊢ A ⟶ ⊢ A ∨ B         </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">orIr</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊢ B ⟶ ⊢ A ∨ B         </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">orE</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} ⊢ A ∨ B ⟶ (⊢ A ⟶ ⊢ C) ⟶ (⊢ B ⟶ ⊢ C) ⟶ ⊢ C</span>
<span class=" -MMT_ObjectExpression">                                      </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">impI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (⊢ A ⟶ ⊢ B) ⟶ ⊢ A ⇒ B </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">impE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊢ A ⇒ B ⟶ ⊢ A ⟶ ⊢ B   </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">notI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (⊢ A ⟶ ↯) ⟶ ⊢ ¬ A</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">notI</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">notE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊢ ¬ A ⟶ ⊢ A ⟶ ↯  </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">notE</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Because equivalence is defined, we can derive its rules.</span>
<span class="cm">     As usual for Curry-Howard style representations, a derived rule is simply a rule with a definiens.</span>
<span class="cm">  ❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">equivI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (⊢ A ⟶ ⊢ B) ⟶ (⊢ B ⟶ ⊢ A) ⟶ ⊢ A ⇔ B  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,q] andI (impI [x] p x) (impI [x] q x)  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="vc">equivEl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊢ A ⇔ B ⟶ ⊢ A ⟶ ⊢ B</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,a] impE (andEl p) a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equivEr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊢ A ⇔ B ⟶ ⊢ B ⟶ ⊢ A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">          </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,p,b] impE (andEr p) b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">          </span>
<span class="w">  </span><span class="vc">forallI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s, A: tm s ⟶ prop} ({x} ⊢ (A x)) ⟶ ⊢ ∀ A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">allI</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s, A: tm s ⟶ prop} ⊢ (∀ A) ⟶ {x} ⊢ (A x) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">allE</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">existsI</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s, A: tm s ⟶ prop} {c} ⊢ (A c) ⟶ ⊢ ∃ [x] (A x) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">exI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">existsE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s, A: tm s ⟶ prop, C} ⊢ (∃ A) ⟶ ({x} ⊢ (A x) ⟶ ⊢ C) ⟶ ⊢ C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">exE</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T The rules for equality consist of the equivalence rules at every sort ...❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,x: tm s} ⊢ x = x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">sym</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,x: tm s,y} ⊢ x = y ⟶ ⊢ y = x</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">sym</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,x: tm s,y,z} ⊢ x = y ⟶ ⊢ y = z ⟶ ⊢ x = z</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">trans</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T ... and congruence rules for substituting a subterm x with y in any term T or formula F.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">congTerm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t, T: tm s ⟶ tm t}{x,y} ⊢ x = y ⟶ ⊢ (T x) = (T y)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">congTerm</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">congForm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,   F: tm s ⟶ prop}{x,y} ⊢ x = y ⟶ ⊢ (F x) ⟶ ⊢ (F y)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">congForm</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   The rules declared so far only yield intuitionistic first-order logic. To get to classical logic,</span>
<span class="cm">we can use the modular approach and extend NatDed by the law of excluded middle: ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ClassicalSFOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatDed </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">TND</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊢ A ∨ ¬ A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">TND</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/tutorial</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   A Semigroup consists of ...❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Semigroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T ... a sort for the universe ...❙</span><span class="w">   </span>
<span class="w">   </span><span class="vc">u</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T ... a binary function on the universe, written as infix ∘ ...❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm u ⟶ tm u ⟶ tm u</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∘</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T ...such that ∘ is associative.❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊢  ∀[x]∀[y]∀[z] (x ∘ y) ∘ z = x ∘ (y ∘ z)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T We prove a few abbreviations that come in handy when doing proofs:❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">assocLeftToRight</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊢ (x ∘ y) ∘ z = x ∘ (y ∘ z)</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] allE (allE (allE assoc x) y) z</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">assocLR</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="si">%I3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">assocRightToLeft</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊢ x ∘ (y ∘ z) = (x ∘ y) ∘ z</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] sym assocLR</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">assocRL</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="si">%I3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Monoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="cm">// metadata can be attributed both to a theory ... ❙</span><span class="w"></span>
<span class="w">  </span><span class="k">@_description</span><span class="w"> </span><span class="s">s</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// ... and to constants ... ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm u </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">e</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">@_description</span><span class="w"> </span><span class="s"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// ... any symbol can be used as a metadata key, several @_XXX keys are predefined❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">unit_axiom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊢ ∀[x] x ∘ e = x</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">@_description</span><span class="w"> </span><span class="s"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	                                   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">PreOrder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">o</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm o ⟶ tm o ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">reflexivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊢ x ≤ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">transitivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊢ x ≤ y ⟶ ⊢ y ≤ z ⟶ ⊢ x ≤ z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// We prove the ternary case of transitivity by chaining transitivity twice.❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">transitivity3</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{w,x,y,z} ⊢ w ≤ x ⟶ ⊢ x ≤ y ⟶ ⊢ y ≤ z ⟶ ⊢ w ≤ z</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	      </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[w,x,y,z,p,q,r] transitivity (transitivity p q) r</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">view</span><span class="w"> </span><span class="nc">MonoidAsPreorder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PreOrder</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Assignments in views are of the form NAME = EXPRESSION. First, the universes: ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">o</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">u </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Now for the order itself, which is defined by a ≤ b ⇔ ∃x a∘x=b. Thus: ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">order</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] (∃[z] x ∘ z = y) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T The target statement for reflexivity translates as ${x} ⊢ ∃[z] x ∘ z = x$, which</span>
<span class="cm">		we now need to prove for monoids: ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">reflexivity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] exI e (allE unit_axiom x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T The target statement for transitivity is ${x,y,z} ⊢ (∃[a] x ∘ a = y) ⟶ ⊢ (∃[b] y ∘ b = z) ⟶ ⊢ ∃[c] x ∘ c = z$ where the proof has to extract witness a with proof pa from p and b and qb from q and then supply the witness c as a∘b along with its proof:❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">transitivity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z,p,q] exE p [a,pa] exE q [b,qb] exI (a ∘ b) trans assocRL trans (congTerm ([k]k∘b) pa) qb</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Abelian</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semigroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊢ ∀[x] ∀[y] x ∘ y = y ∘ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Group</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm u ⟶ tm u </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⁻¹</span><span class="w">  </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="cm">/T jsuperminus jsuper1	❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">inverse_axiom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊢ ∀[x] x ∘ (x ⁻¹ ) = e </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AbelianGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Group </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Abelian </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Ring</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T We will add two structures, one for addition and one for multiplication. ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Addition forms an abelian group, hence we will use that theory for our structure. ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T In the structure, we first give the universe u a new ALIAS R. This way, we don&#39;t</span>
<span class="cm">		have to refer to the universe of our Ring with add/u all the time. ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Afterwards, we provide new notations for the other symbols. Note, that none of the symbols</span>
<span class="cm">			we &quot;modify&quot; are declared directly in the theory we&#39;re including (i.e. AbelianGroup).</span>
<span class="cm">			Structures can modify along includes without problems. ❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">structure</span><span class="w"> </span><span class="nc">add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?AbelianGroup </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">u</span><span class="w"> </span><span class="p">@</span><span class="no"> R </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">comp</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">unit</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">O</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">inverse</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T We can now add a DEFINITION to Multiplication/u, making it equal to R=Addition/u. </span>
<span class="cm">		That way, both + and ⋅ are defined on the SAME</span>
<span class="cm">		universe (i.e. R), while being two separate operations nonetheless (as opposed to when</span>
<span class="cm">		using plain includes): ❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">structure</span><span class="w"> </span><span class="nc">mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Monoid </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">u</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">R </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">comp</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⋅</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">45</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">unit</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">I</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Alternatively we could have defined mult/u directly as add/u</span>
<span class="cm">		</span>
<span class="cm">	/T Finally, we can use the symbols in our structures jointly in distributivity: ❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊢ ∀[a]∀[b]∀[c] a ⋅ (b + c) = a ⋅ b + a ⋅ c </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples/tutorial</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://tutorial.examples.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?NatDed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T We start with a sort for the natural numbers and an abbreviation ℕ for the terms</span>
<span class="cm">		of that sort - i.e. the type of actual numbers, which we will populate with literals: ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sort </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">ℕ</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm Nat </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T The literals are provided by a RealizedType rule written in Scala in </span>
<span class="cm">		scala_realizations/info/kwarc/mmt/examples/tutorial/Literals.scala</span>
<span class="cm">	  These rules are special constants declared by the &quot;rule&quot; keyword followed by the classname: ❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?NatLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T The MMT build system includes a target for building these Scala files - the command is &quot;build MMT/examples scala-bin&quot; ❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T The rule NatLiterals introduces MMT literals for all natural numbers as well as a lexing rule for them.</span>
<span class="cm">	   To see whether it works, let&#39;s define the constant &quot;zero&quot; as the literal 0: ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">zero</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">0 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T In addition to RealizedType rules, there are also RealizedOperator rules, which allow us</span>
<span class="cm">		to associate a function on literals declared in MMT with a corresponding implementation </span>
<span class="cm">		in Scala. We can use this to implement the successor function: ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">S</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Succ </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Succ is implemented in such a way that it can be inverted, which MMT will use for unification, when working with terms that contain both literals and variables: ❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T MMT will now simplify every instance of S being applied to literals to the actual</span>
<span class="cm">		computation result. We can test this, by proving that the successor</span>
<span class="cm">		of 17 is 18 by reflexivity of equality alone: ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">succ_test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊢ S 17 = 18 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">refl 18 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Now for the same thing with addition: ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Plus </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T We can again test, whether this works by proving an equality with refl: ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊢ 5 + 5 = 10 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">refl 10 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T We use Scala to implement computations on literals.</span>
<span class="cm">	   Additionally, we need symbolic rewrite rules for working with other expressions.</span>
<span class="cm">	   The LF plugin includes a ChangeListener that automatically generates rewrite rules from certain constants.</span>
<span class="cm">	   To do so, we add the role Simplify to the constants.</span>
<span class="cm">	   We must have previously added roles Judgment and Eq to ⊢ and =, respectively.❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_def1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊢ x + zero = x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">plus_def</span><span class="si">1</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_def1b</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊢ zero + x = x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_def2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊢ S x + y = S (x + y) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_def2b</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊢ x + S y = S (x + y) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T The generate rules will make MMT rewrite the left to the right side of the equality during type-checking. ❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T We also add associativity (omitting the proof), which we need in the view below.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y,z} ⊢ (x + y) + z = x + (y + z) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">plus_assoc</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">view</span><span class="w"> </span><span class="nc">NatAsMonoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Monoid</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?Nat</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">u</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Nat </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">comp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plus </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">unit</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">zero </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">assoc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">allI ([x] allI ([y] allI (plus_assoc x y))) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">unit_axiom</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">allI ([x] plus_def1 x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://cf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="kd">constant</span><span class="w"> </span><span class="vc">instance</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">instance</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">new</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">new</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?NewInstance</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">field</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span>
<span class="w">   </span><span class="vc">sequence</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">var</span><span class="w"> </span><span class="si">V1</span><span class="ss">;</span><span class="si">…</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">2</span><span class="ss">;</span><span class="si">…</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Sequence</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">None</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">none</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">None</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">   </span><span class="vc">assign</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Assignment</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?AssignmentTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">meta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Dedukti</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">rewriteType</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">---&gt;</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">rewriteTerm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type} a ⟶ a ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">--&gt;</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w">                                   </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://quotation.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   higher-order logic with quotation and evaluation, mostly following Bill Farmer&#39;s work ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">HOLQE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="sd"># Higher-order logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">   </span><span class="sd">## Types</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T the LF-type representing HOL types ❙</span><span class="w"> </span>
<span class="w">   </span><span class="vc">tp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T function types ❙</span><span class="w"> </span>
<span class="w">   </span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ tp ⟶ tp</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⇒</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T Normally we represent object language variables using LF variables, in which case the following is redundant.</span>
<span class="cm">      But Farmer&#39;s language follows the traditional style of assuming an infinite supply of variables at every type.</span>
<span class="cm">      It is critical to capture this in the representation because he allows quoting terms with free variables.❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the type of variables at a given HOL type❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">Var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the constructor for concrete variables %x:a at a given HOL type where x is any identifier that is parsed as a closed term</span>
<span class="cm">      Most of the time, we do not need this because we can use LF-variables v:Var a as meta-variables that range over HOL variables at type a.❙</span><span class="w"> </span>
<span class="w">   </span><span class="vc">var</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%</span><span class="w"> </span><span class="si">L1T</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">200</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the typing rule (%x:a):Var a for concrete variables cannot be expressed in LF, so we implement an MMT rule❙</span><span class="w"> </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ConcreteVariable</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="sd">## Terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T the LF-type representing HOL terms of a given HOL type ❙</span><span class="w">  </span>
<span class="w">   </span><span class="vc">tm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">tm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T all variables are terms of their respective type ❙</span><span class="w"> </span>
<span class="w">   </span><span class="vc">tvar</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a ⟶ tm a</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">tvar</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_OD">❘</span><span class="p">##</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T λ-abstraction (contrary to typical LF-encodings, we bind explicit variables that have to be injected into terms using tvar ❙</span><span class="w"> </span>
<span class="w">   </span><span class="vc">lam</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b} (Var a ⟶ tm b) ⟶ tm a ⇒ b</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T application ❙</span><span class="w"> </span>
<span class="w">   </span><span class="vc">app</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b} tm a ⇒ b ⟶ tm a ⟶ tm b</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T undefined terms (not needed here, but probably needed later on when evaluating quotations of ill-typed terms❙</span><span class="w"> </span>
<span class="w">   </span><span class="vc">undefined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm a</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⊥</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T booleans, connectives, and proofs❙</span><span class="w"> </span>
<span class="w">   </span><span class="vc">bool</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm a ⟶ tm a ⟶ tm bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">ded</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="sd"># Quotation</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T We add HOL types that reify HOL concepts❙</span><span class="w"> </span>

<span class="w">   </span><span class="sd">## Quoting Terms</span><span class=" -MMT_DD">❙</span><span class="w"> </span>

<span class="w">   </span><span class="cm">/T We add a type holding quotations of HOL terms. All terms may be quoted, including ill-typed ones.</span>
<span class="cm">      Effectively, this amounts to having a type that represents the untype λ-calculus inside a typed λ-calculus.❙</span><span class="w"> </span>

<span class="w">   </span><span class="sd">### Syntax</span><span class=" -MMT_DD">❙</span><span class="w">    </span>
<span class="w">      </span>
<span class="w">   </span><span class="cm">/T the type of quoted terms❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">qtp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ε</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T quoted variables❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">qvar</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a ⟶ tm ε</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">qvar</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_OD">❘</span><span class="p">##</span><span class="w"> </span><span class="ss">qvar</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T quoted λ-abstractions❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">qlam</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a ⟶ tm ε ⟶ tm ε </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">qlam</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">150</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T quoted applications❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">qapp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm ε ⟶ tm ε ⟶ tm ε </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">qapp</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T quoted quotations❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">qquote</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm ε ⟶ tm ε</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T Finally, we add a meta-level operation that turns a term into the corresponding quotation.</span>
<span class="cm">      We may think of it as having type ${a}tm a ⟶ tm ε$ except. However, quotation may not be subject to congruence and therefore cannot have an LF type.❙</span><span class="w">   </span>
<span class="w">   </span><span class="vc">quote</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⌜</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⌝</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the rule that eliminates occurrences of quote by constructing the corresponding term of type $tm ε$</span>
<span class="cm">      HOL variables in the argument are quoted using $qvar$, LF variables remain, which gives rise to quasi-quotation.❙</span><span class="w"> </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?QuoteTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="sd">### Semantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T the predicate expressing that a term is the quotation of a term of a given types.❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">oftype</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm ε ⟶ tp ⟶ tm bool</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T typing rule for quoted variables❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">oftype_var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,v: Var a} ⊦ qvar v $ a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T typing rule for quoted λ-abstractions❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">oftype_lam</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,v:Var a,E} ⊦ E $ b ⟶ ⊦ qlam v.E $ a ⇒ b</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T typing rule for quoted applications❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">oftype_app</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,F,E} ⊦ F $ a ⇒ b ⟶ ⊦ E $ a ⟶ ⊦ qapp F E $ a ⇒ b</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T typing rule for quoted quotations❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">oftype_quote</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{E,a} ⊦ E $ a ⟶ ⊦ qquote E $ ε</span><span class=" -MMT_DD">❙</span><span class="w">   </span>

<span class="w">   </span><span class="sd">## Quoting Substitutions</span><span class=" -MMT_DD">❙</span><span class="w"> </span>

<span class="w">   </span><span class="cm">/T Expanding on Farmer&#39;s work, we also add a type holding HOL substitutions.</span>
<span class="cm">      Effectively, this amounts to a language with explicit substitutions.</span>
<span class="cm">      Because all variables are always in scope, every substitution maps all variables to terms.❙</span><span class="w"> </span>

<span class="w">   </span><span class="sd">### Syntax</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T the type of substitutions❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">stp</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sub</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the identity substitutions❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">idsub</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm sub</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the substitution that modifies a given substitution in one place❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">update</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm sub ⟶ Var a ⟶ tm a ⟶ tm sub </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">↦</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T abbreviation for the substitution that maps one variable❙</span><span class="w">   </span>
<span class="w">   </span><span class="vc">singlesub</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} Var a ⟶ tm a ⟶ tm sub </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">↦</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">51</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">            </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,v,t] idsub + v ↦ t</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T Finally, we add a meta-level operation that turns a substitution into the corresponding quotation.❙</span><span class="w">   </span>
<span class="w">   </span><span class="vc">subs</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">`</span><span class="w"> </span><span class="si">L1T</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">´</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the rule that eliminates occurrences of subs by constructing the corresponding term of type $tm sub$❙</span><span class="w"> </span>
<span class="w">   </span><span class="cm">// rule rules?QuoteSubs❙</span><span class="w"></span>

<span class="w">   </span><span class="sd">### Semantics</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T an auxiliary predicate to reason about inequality of variables❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">diff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} Var a ⟶ Var b ⟶ tm bool </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">≠</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// notation parsing errors not reported correctly? ❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T the function that retrieves the map of a variable by a substitution❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">lookup</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm sub ⟶ Var a ⟶ tm a </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the lookup rule for the identity substitution❙</span><span class="w">   </span>
<span class="w">   </span><span class="vc">subst_id</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,v: Var a} ⊦ v&#39;idsub = (tvar v)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the lookup rule for an update to the needed variables❙</span><span class="w">   </span>
<span class="w">   </span><span class="vc">subst_update_same</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,a, v: Var a, E} ⊦ v&#39;(s+v↦E) = E</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the lookup rule for an update to some other variable❙</span><span class="w">   </span>
<span class="w">   </span><span class="vc">subst_update_diff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,a,b, v: Var a, w: Var b, E} ⊦ v ≠ w ⟶ ⊦ v&#39;(s+w↦E) = v&#39;s</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="sd"># Evaluation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T Evaluation internalizes the model-theoretical semantics: evaluation takes a term and a substitution (which provides the assignment to the free variables) and returns its interpretation in the model.</span>
<span class="cm">   </span>
<span class="cm">   Evaluation is only defined for quotations of well-typed terms. Because the type of a quotation is not stored in the quotation,</span>
<span class="cm">   * evaluation takes a HOL-type as an additional argument,</span>
<span class="cm">   * evaluation rules take typing assumptions.❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T the evaluation operator❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">eval</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a} tm ε ⟶ tm sub ⟶ tm a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⟦</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⟧</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="ss">⟦</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">$</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⟧</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the evaluation rule for variables: apply the assignment❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">eval_var</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, v: Var a, s} ⊦ (⟦qvar v $ a⟧s) = v&#39;s</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the evaluation rule for λ-abstractions qlam v.E: build the function that maps x to the evaluation of E under the assignment of v to x❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">eval_fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b, v: Var a, E, s} ⊦ E $ b ⟶ ⊦ (⟦qlam v.E $ a ⇒ b⟧s) = λ[x](⟦E $ b⟧ s + v ↦ tvar x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the evaluation rule for applications: straightforward❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">eval_app</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b, F, X, s} ⊦ F $ a ⇒ b  ⟶  ⊦ X $ a  ⟶  ⊦ (⟦qapp F X $ b⟧s) = (⟦F $ a ⇒ b⟧s) @ ⟦X $ a⟧s</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T the evaluation rule for quotations: evaluation cancels quotation❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">eval_quote</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X, s} ⊦ X $ ε  ⟶  ⊦ (⟦qquote X $ ε⟧s) = X</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">/T Now we formalize two challenge problems posed by Farmer❚</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ExcludedMiddle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?HOLQE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool ⟶ tm bool</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">¬</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">or</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm bool ⟶ tm bool ⟶ tm bool</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∨</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">em</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f,s} ⊦ f $ bool ⟶ ⊦ (⟦f$bool⟧s) ∨ ¬ ⟦f$bool⟧s </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PolyDiff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?HOLQE</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T real numbers and derivatives❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">R</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">derivative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm R ⇒ R ⟶ tm R ⇒ R</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T a transformer that computes the derivative of a polynomial and its meaning formula❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ispolyin</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm ε ⟶ Var R ⟶ tm bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">polyderiv</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tm ε ⟶ Var R ⟶ tm ε</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">meaning</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v, p} ⊦ ispolyin p v ⟶ ⊦ derivative (λ[x] ⟦p $ R⟧v ↦ tvar x) = (λ[x] ⟦polyderiv p v $ R⟧v ↦ tvar x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://intersection.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   A representation of intersection types in MMT, following &quot;Towards a Logical Framework with Intersection and Union Types&quot; by Stolze, Liquori, Honsell, Scagnetto.❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Intersection</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LF</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T intersection type❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">inter</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∩</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T elements of an intersection type❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">pair</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⟨</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⟩</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T projections from an intersection type❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">project1</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">proj</span><span class="si">1</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">project2</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">proj</span><span class="si">2</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InterTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PairTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Projection1Term</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Projection2Term</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InterTyping</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InterEqual</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">IntersectionTest</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Intersection</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="vc">a</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">b</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T auto-application ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">((a ⟶ b) ∩ a) ⟶ b</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] (proj1 x) (proj2 x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T This is a negative test: it should fail with an error that $(a ⟶ b)∩(a ⟶ b)$ is not equal to $(a ⟶ b)∩a$.❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// test2 = test test❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info?MMTURILexer</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Isabelle</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://cds.omdoc.org/mmt?Errors❚</span>
<span class="l l-URI">   include ?PLF</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">prop</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">proof_text</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">meta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info?MMTURILexer</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Typed</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">equality</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">equality</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w">  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">oftype</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">:</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9997</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">definedas</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">:=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9998</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Def</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">withnotation</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9998</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Notation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Kinded</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Typed</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">kind</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedConstants</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UniverseType</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TypeInhabitable</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">KindedConstants</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UniverseKind</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?KindInhabitable</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TermsTypesKinds</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞meta:?Errors</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ModExp</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞meta:?mmt</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Typed</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Kinded</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedConstants</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?KindedConstants</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnivTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TypeAttributionTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?DropTypeAttribution</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LambdaPi</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Kinded</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">Pi</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">V1T</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">lambda</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">V1T</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">apply</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">%w</span><span class="si">…</span><span class="w">        </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">arrow</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">⟶</span><span class="si">…</span><span class="w">         </span><span class="k">prec</span><span class="w">  </span><span class="mi">-9990</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LambdaPi</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiType</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ApplyTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LambdaTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Beta</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Extensionality</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiCongruence</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LambdaCongruence</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// rule rules?NormalizeCurrying❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?FlattenCurrying</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Solve</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SolveType</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TheoryTypeWithLF</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiIntroduction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ForwardPiElimination</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?BackwardPiElimination</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PiIrrelevanceRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LFHOAS</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TermsTypesKinds</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LambdaPi</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LFRules</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ShallowPolymorphism</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Typed</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ShallowPolymorphism</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PolymorphicApplyTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LF</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ShallowPolymorphism</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFModulo</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">equality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} A ⟶ A ⟶ type </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9000</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w">                                                                              </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T LLF_P as introduced by Honsell, Liquori, Maksimovi, Scagnetto in</span>
<span class="cm">A logical framework for modeling external evidence, side conditions, and proof irrelevance using monads❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://externals.lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lfrules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Locks</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="cm">// Lp p a b &lt;T&gt; is the type \mathcal{L}^p_{a,b}[T] from the paper.❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">locktype</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Lp</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// Lm p a b &lt;t&gt; is the term \mathcal{L}^p_{a,b}[t] from the paper.❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">lockterm</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Lm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// U &lt;t&gt; for t:Lp p a b &lt;T&gt; is the term \mathcal{U}^p_{a,b}[t] from the paper.</span>
<span class="cm">      U is unary here because p, a, and b can be inferred from t.❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">unlock</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w">                                           </span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// Convenience operator to bundle p, a, b into a single object.</span>
<span class="cm">   key # K 1 2 3❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">// The typing rules.❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InferLockType</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InferLockTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InferUnlock</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TypingLock</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EqualityLock</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnlockLock</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LLFP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LF</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Locks</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CallByValueExample</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LLFP</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T following Section 5.1 of the paper: call-by-value reduction ❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T untyped λ calculus ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">term</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">app</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term ⟶ term </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">lam</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(term ⟶ term) ⟶ term</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T natural numbers ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">z</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">S</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T free variables using natural numbers❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">free</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ term</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T equality judgment and its rules ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">eq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">term ⟶ term ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≐</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M} M ≐ M</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">symm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N} M ≐ N ⟶ N ≐ M</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">trans</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N,P} M ≐ N ⟶ N ≐ P ⟶ M ≐ P</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">eq_app</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N,X,Y} M ≐ N ⟶ X ≐ Y ⟶ M@X ≐ N@Y</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">eq_app</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T We declare a single constant Val for the side condition and one rule that implements it.</span>
<span class="cm">      The condition Val N term checks if N:term is an abstraction or a free variable ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">Val</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ValRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T reduction rules using Val condition❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">betav</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N} Lp Val N term &lt;(λ M)@N ≐ (M N)&gt;</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">betav</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">csiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M,N}({x} Lp Val x term &lt;(M x) ≐ (N x)&gt;) ⟶ (λ M) ≐ (λ N)</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">csiv</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">/T example from the end of the section ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">t1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">λ[x] &#39;z @ ((λ[y] y) @ x)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">t2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">λ[x] &#39;z @ x</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">goal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">t1 ≐ t2</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T The following check succeeds without ever calling the ValRule because the unlock is under a lock.❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">check</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">goal </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">csiv [x] Lm Val x term &lt;</span>
<span class=" -MMT_ObjectExpression">       eq_app (refl &#39;z) U&lt;betav ([y] y) x&gt;</span>
<span class=" -MMT_ObjectExpression">     &gt;</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T The following example does not guard the unlock but still succeeds because &#39;n is indeed a value.❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">check2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] eq_app (refl &#39;z) U&lt;betav ([y] y) &#39;n&gt;</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">/T The following negative example fails because x is any term and thus not necessarily a value.❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// fail   = [x] eq_app (refl &#39;z) U&lt;betav ([y] y) x&gt;❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T An alternative formulation that uses polymorphpic LF to define most of the typing rules in the logical framework.</span>
<span class="cm">   That corresponds to the Coq implementation of LLF_P by Honsell et al.❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LLFP2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">PROP</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">DED</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">PROP ⟶ type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lfrules?TermIrrelevanceRule DED</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">Lock</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p: PROP} (DED p ⟶ type) ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">L</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lock</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p: PROP} {a: DED p ⟶ type} ({p} a p) ⟶ L p a</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">l</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">unlock</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p, a: DED p ⟶ type} L p a ⟶ {w:DED p} a w</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LinearLogic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LLFP2</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">o</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">ded</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">linear</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} (ded a ⟶ ded b) ⟶ PROP</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">linear</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">lolli</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">o ⟶ o ⟶ o</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⊸</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lolliI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} {p:ded A ⟶ ded B} L (linear p) [q] ded A ⊸ B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://api.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Errors</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="cm">// a missing term of a given type ❙</span><span class="w"> </span>
<span class="w">   </span><span class="vc">missing</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">≪</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≫</span><span class="w">        </span><span class="k">prec</span><span class="w"> </span><span class="mi">-99500</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// a term not matching a required type ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">illtyped</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">≪</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">::</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≫</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// an unknown term (e.g., an omitted proof) that uses certain subterms (e.g., the used axioms) ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">unknown</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">≪</span><span class="w"> </span><span class="ss">using</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">≫</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100003</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">// this notation clashes with unbracketed lambdas inside some other unknown, removed for now</span>
<span class="cm">   // unsolved  # ≪ [ V1T,… ] 2 ≫ prec -100006❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// an ambiguous term with multiple options; its first argument is the number of the argument that was obtained as the result of disambiguation (starting from 0) ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">oneOf</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">≪</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">≫</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100002</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// infers the type of missing terms❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/checking?HoleTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// reduces disambiguated term ❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/checking?Disambiguation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// disambiguates terms formed by oneOf ❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/checking?InferAmbiguous</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">mmt</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="cm">// binds unsolved meta-variables ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">unknown</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// binds free variables that are implicitly quantified at the toplevel❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">free</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// the type of all rules❙</span><span class="w"></span>
<span class="w">   </span><span class="kd">constant</span><span class="w"> </span><span class="vc">rule</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">// the type of notations❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">notation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// enables notation literals❙</span><span class="w"> </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/notations?NotationRealizedType</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/patterns?PatternFeature</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/patterns?InstanceFeature</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/parser?MMTURILexer</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">// notations with round brackets must have a lower precedence than this to be recognized ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">brackets</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000005</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// left bracket with omitted partner as far to the right as consistent with round brackets ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">andrewsDot</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">▪</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// right bracket with omitted partner as far to the left as consistent with round brackets ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">andrewsDotRight</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">▫</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">oftype</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">:</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">List</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">List</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">list</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">]</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">Option</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">Option</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">some</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">some</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">none</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">none</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">Tuple</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">×</span><span class="si">…</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">   </span><span class="vc">tuple</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">⟨</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">⟩</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">proj</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">Function</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">×</span><span class="si">…</span><span class="w"> </span><span class="ss">⟶</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">lambda</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">λ</span><span class="w"> </span><span class="si">V1T</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="ss">-</span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">apply</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">@</span><span class="si">…</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">Nat</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">ℕ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">plus</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">+</span><span class="si">…</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">times</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">*</span><span class="si">…</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">minus</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">div</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">less</span><span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">lesseq</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≤</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">greater</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">greatereq</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≥</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">Boolean</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℬ</span><span class="w"></span>
<span class="w">   </span><span class="ss">and</span><span class="w">     </span><span class="ss">#</span><span class="w"> </span><span class="si">1</span><span class="ss">∧</span><span class="si">…</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">or</span><span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">∨</span><span class="si">…</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">equal</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">ifte</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">if</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">else</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">match</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">match</span><span class="w"> </span><span class="si">2</span><span class="ss">|</span><span class="si">…</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">case</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">V2T</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⇝</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">example</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/examples</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://moduleexpressions.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">operators</span><span class="w"> </span><span class="l l-URI">scala://operators.moduleexpressions.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">metaops</span><span class="w"> </span><span class="l l-URI">scala://meta.operators.moduleexpressions.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ModExp</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kd">constant</span><span class="w"> </span><span class="vc">theory</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">THY</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">constant</span><span class="w"> </span><span class="vc">morphism</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">MOR</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">constant</span><span class="w"> </span><span class="vc">diagram</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">DIAG</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">complextheory</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">block</span><span class="w"> </span><span class="ss">{|</span><span class="w"> </span><span class="si">L1T</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">|}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000005</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">complexmorphism</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">[|</span><span class="w"> </span><span class="si">L1D</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">|]</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000005</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">identity</span><span class="w">        </span><span class="p">#</span><span class="w"> </span><span class="ss">IDENTITY</span><span class="w"> </span><span class="si">1</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">composition</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">COMPOSE</span><span class="w"> </span><span class="si">1</span><span class="ss">;</span><span class="si">…</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">// morphismapplication # %L2d!_1 APPLY 2❙</span><span class="w"></span>


<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TheoryTypeInhabitable</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MorphTypeInhabitable</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?DiagramTypeInhabitable </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TheoryTypeUniverse</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?AnonymousTheoryInfer</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?AnonymousDiagramInfer </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ComplexTheoryInfer</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MorphCheck</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?DiagramCheck </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MorphismApplicationTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MorphismApplicationCompute</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Combinators</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ModExp</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">// Yasmine&#39;s diagram operators</span>
<span class="cm">	   =========================== ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">empty</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">EMPTY</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeEmpty </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">extends</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">EXTENDED_BY</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">%L1_L2</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeExtends </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">rename1</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">⟿</span><span class="w"> </span><span class="si">L2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-500000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">rename</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">RENAMING</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">operators?ComputeRename </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">combine</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">COMBINE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">4</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">translate</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">MIXIN</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">{</span><span class="w"> </span><span class="si">4</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule operators?ComputeMixin ❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">operators?ComputeCombine </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">hom</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">HOM</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">operators?ComputeHom </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">// Navid&#39;s diagram operators</span>
<span class="cm">	   =========================== ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">pushout_inclusion</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">PUSHOUT</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">ALONG</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">operators?ComputePushoutAlongInclusion </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">diagram_accessor</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-3000000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeDiagramAccess</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">// The diag from file operator expects a filename as first argument given as a string ❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Strings </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">diagram_from_file</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">DIAG</span><span class="w"> </span><span class="ss">FROM</span><span class="w"> </span><span class="ss">FILE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeDiagramFromFile </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">diagram_union</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">UNION</span><span class="si">…</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeDiagramUnion </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">// diagram_difference_by_diagram # 1 WITHOUT DIAG 2 prec -2000000 ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule metaops?ComputeDiagramDifferenceByDiagram ❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">diagram_difference_by_label</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">WITHOUT</span><span class="w"> </span><span class="ss">LABEL</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeDiagramDifferenceByLabel </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">diagram_prefix</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">PREFIX</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">BY</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputePrefixedDiagram </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">diagram_closure</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">CLOSE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">WITHIN</span><span class="w"> </span><span class="ss">DOCUMENT</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-2000000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">metaops?ComputeDiagramClosure </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">// Currently deactivated as Navid&#39;s Generalizer ComputationRule not finished</span>
<span class="cm">	   generalizer # GENERALIZE 1 ALONG 2 prec -2000000 ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFComb</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LF</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Combinators</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GCalculus</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">nabla</span><span class="w">  </span><span class="p">#</span><span class="w">  </span><span class="si">V1T</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NablaRules</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://www.openmath.org/cd</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OpenMath</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">Object</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">mapsto</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">naryObject</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">binder</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">OMI</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// the lexing and checking rule for integer literals, e.g., 1 ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// rule info.kwarc.mmt.api.objects?OMI❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">OMF</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// the lexing and checking rule for floating point literals ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// rule info.kwarc.mmt.api.objects?OMF❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">OMSTR</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// the lexing and checking rule for string literals, e.g., &quot;1&quot; ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// rule info.kwarc.mmt.api.objects?OMSTR❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">lf</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Bool</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TermsTypesKinds </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">BOOL</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">TRUE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">BOOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">FALSE</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">BOOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Bool </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">DED</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">BOOL ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">DED</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lf?TermIrrelevanceRule (DED)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lf?PiIrrelevanceRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">TRUEI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DED TRUE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   dependently-typed higher-order logic, i.e., LF with booleans and equality❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">DHOL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ded </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">EQUAL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} a ⟶ a ⟶ BOOL </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">EQ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">NOTEQUAL</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} a ⟶ a ⟶ BOOL </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">NEQ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">CONTRA</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DED FALSE</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">// if : {a:type} bool ⟶ a ⟶ a ⟶ a❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">REFL</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X:A} DED X EQ X  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">SYM</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X:A,Y} DED X EQ Y ⟶ DED Y EQ X</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">SYM</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">TRANS</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X:A,Y,Z} DED X EQ Y ⟶ DED Y EQ Z ⟶ DED X EQ Z</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">TRANS</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">CONG</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B, X, Y: A} DED X EQ Y ⟶ {F: A ⟶ B} DED (F X) EQ (F Y)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">CONG</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DHOL2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">equal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} A ⟶ A ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≐</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">ded</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,X:A} ⊦ X ≐ X </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">refl</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">cong</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B: type} {F: A ⟶ B} {X, Y: A} ⊦ X ≐ Y ⟶ ⊦ (F X) ≐ (F Y) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">congI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">extensionality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type,B:A ⟶ type}{F:{x:A} B x, G:{x:A} B x} ({x: A} ⊦ F x ≐ G x) ⟶ ⊦ F ≐ G </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ext</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eqDed</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{B1,B2:bool} ⊦ B1 ≐ B2 ⟶ ⊦ B1 ⟶ ⊦ B2 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">eqded</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eqI</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{B1,B2:bool} (⊦ B1 ⟶ ⊦ B2) ⟶ (⊦ B2 ⟶ ⊦ B1) ⟶ ⊦ (B1 ≐ B2) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">eqI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">symmetry</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type}{a,b : A} ⊦ a ≐ b ⟶ ⊦ b ≐ a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][a,b][p] eqded (congI ([x] x ≐ a) p) refl </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">symm</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eqFun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type}{F,G : A ⟶ B} ⊦ F ≐ G ⟶ {a} ⊦ F a ≐ G a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B][F,G][p][a] congI ([H: A ⟶ B] H a) p </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">eqfun</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">([x:bool] x) ≐ ([x:bool] x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trueI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ true </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">refl </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} (A ⟶ bool) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] P ≐ ([x:A] true) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">forallI</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type, P : A ⟶ bool}({x} ⊦ P x) ⟶ ⊦ ∀[x] P x </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P][p] ext ([x: A] eqI ([pf: ⊦ P x] trueI) ([pt: ⊦ true] p x)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">forallE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type, P : A ⟶ bool} (⊦ ∀[x]P x) ⟶ {a} ⊦ P a </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P][p][a] eqded (eqfun (symm p) a) trueI </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Option</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">OPTION</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">NONE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} OPTION a </span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">	</span><span class="vc">SOME</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:type} a ⟶ OPTION a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">MAP</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a: type, b: type} (a ⟶ b) ⟶ OPTION b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatSymbols</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TermsTypesKinds </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">NAT</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatArith</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatSymbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT ⟶ NAT      </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">one</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT             </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">succ zero           </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT ⟶ NAT ⟶ NAT </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">times</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT ⟶ NAT ⟶ NAT </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatRels</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Ded</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatArith </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">LEQ</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT ⟶ NAT ⟶ BOOL </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">LEQ</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">LESS</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT ⟶ NAT ⟶ BOOL </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">LESS</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m,n] (succ m) LEQ n</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">REFL</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} DED n LEQ n</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatRules</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRels </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">eq_leq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED X EQ Y ⟶ DED Y LEQ Z ⟶ DED X LEQ Z  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_eq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED X LEQ Y ⟶ DED Y EQ Z ⟶ DED X LEQ Z  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">plus_comm</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED plus X Y EQ plus Y X  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED plus (plus X Y) Z EQ plus X (plus Y Z) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_neut_Ex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} DED plus X zero EQ X </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">%%prefix</span><span class="w"> </span><span class="si">0</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_neut</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} DED plus X zero EQ X </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X] plus_neut_Ex X </span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">plus_succ_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED plus X (succ Y) EQ succ (plus X Y)</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_succ_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED plus (succ X) Y EQ succ (plus X Y) </span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">times_comm</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED times X Y EQ times Y X  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED times (times X Y) Z EQ times X (times Y Z)  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_neut</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} DED times X one EQ X</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">times_zero</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} DED times X zero EQ zero</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_succ_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED times X (succ Y) EQ plus (times X Y) X</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_succ_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED times (succ X) Y EQ plus (times X Y) X</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">distrib</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED times X (plus Y Z) EQ plus (times X Y) (times X Z) </span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">leq_refl</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} DED X LEQ X  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_trans</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED X LEQ Y ⟶ DED Y LEQ Z ⟶ DED X LEQ Z    </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_antisym</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED X LEQ Y ⟶ DED Y LEQ X ⟶ DED X EQ Y      </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">plus_mono</span><span class="w">     </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED X LEQ Y ⟶ DED (plus X Z) LEQ (plus Y Z)  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_mono_L</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED X LEQ Y ⟶ DED (plus Z X) LEQ (plus Z Y)  </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">                </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,Y,Z,p] leq_eq (eq_leq plus_comm (plus_mono p)) plus_comm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus_invmono</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED (plus X Z) LEQ (plus Y Z) ⟶ DED X LEQ Y  </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">NatOnly</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">least</span><span class="w">         </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} DED zero LEQ X </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">plus_larger_L</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED X LEQ (plus X Y)  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X][Y] eq_leq (SYM plus_neut) (plus_mono_L least)  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">plus_larger_R</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y} DED Y LEQ (plus X Y)  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">                  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X][Y] leq_eq plus_larger_L plus_comm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">times_mono</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED X LEQ Y ⟶ DED (times X Z) LEQ (times Y Z)  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">times_invmono</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X,Y,Z} DED (times X Z) LEQ (times Y Z) ⟶ DED X LEQ Y  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">uom</span><span class="w"> </span><span class="l l-URI">scala://uom.api.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatLiteralsOnly</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatSymbols </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize NAT uom?StandardNat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize zero uom?Arithmetic/Zero</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">    </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NatLiterals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatLiteralsOnly </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatArith</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize one uom?Arithmetic/One</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Realize succ uom?Arithmetic/Succ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DHOL</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatSymbols</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatRules/NatOnly</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatLiterals</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Products</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="vc">product</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type ⟶ type</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">PROD</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a, b} a ⟶ b ⟶ a PROD b</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">PAIR</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">projectLeft</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} a PROD b ⟶ a</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">PI</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">projectRight</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b} a PROD b ⟶ b</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">PI</span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories/pseudo</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Brackets</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="cm">// notations with round brackets must have a lower precedence than this to be recognized ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">brackets</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000005</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// left bracket with omitted partner as far to the right as consistent with round brackets ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">andrewsDot</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">▪</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EliminationForms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">roundbrackets</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000010</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">squarebrackets</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000010</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dot</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000010</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AssignmentForms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">roundbrackets</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000010</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">squarebrackets</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class="ss">=</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000010</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/qmt</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTTypes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">query</span><span class="w">  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop</span><span class="w">   </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">basetp</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">tp</span><span class="w">     </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTQuery</span><span class="w"> </span><span class="p">=</span><span class="w">	</span>
<span class="w">	</span><span class="cm">// Precedence -16xxxx❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// &lt;&lt;left&gt;&gt; union|intersection|difference &lt;&lt;right&gt;&gt; ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Union</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">or</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-169000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Intersection</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">and</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-169000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Difference</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">but</span><span class="w"> </span><span class="ss">not</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-169000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">Tuple</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">(*</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">*)</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Projection</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">L1</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// binders ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Let</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">let</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">:=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-168000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Mapping</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">map</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">*=&gt;*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-168000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">BigUnion</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">&lt;*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">*&gt;</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-168000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Comprehension</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">{*</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">*}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-168000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// select [from &lt;&lt;start&gt;&gt; until &lt;&lt;end&gt;&gt;]|&lt;&lt;index&gt;&gt; of &lt;&lt;query&gt;&gt;❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Slice</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">select</span><span class="w"> </span><span class="ss">from</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">until</span><span class="w"> </span><span class="si">L2</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160004</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">SliceFrom</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">select</span><span class="w"> </span><span class="ss">from</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160003</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">SliceUntil</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">select</span><span class="w"> </span><span class="ss">until</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160002</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Element</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">select</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160001</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// component|subobject &lt;&lt;spec&gt;&gt; of &lt;&lt;query&gt;&gt;❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Component</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">component</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">SubObject</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">subobject</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">I</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">use</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="ss">for</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Closure</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">closure</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Singleton</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">{*</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*}</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// related to &lt;&lt;query&gt;&gt; by &lt;&lt;relation&gt;&gt;❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Related</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">related</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">by</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// leaf case ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Literal</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">literal</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Literals</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">literals</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Paths</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">paths</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">QueryFunctionApply</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">function</span><span class="w"> </span><span class="si">L1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-160000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTJudgements</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// Precedence -15xxxx❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="cm">/T Equality of two terms ❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">Equals</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">*==*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-150000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T One type has a specific term ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Types</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">*:*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-150000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTProp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// Precedence -14xxxx❙</span><span class="w">	</span>

<span class="w">	</span><span class="cm">/T unary type relation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsA</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">isa</span><span class="w"> </span><span class="si">L2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T ancestor relation between paths ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">PrefixOf</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*&lt;&lt;*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T element relation between elements and sets ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsIn</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">contains</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T emptiness of a set ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsEmpty</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">empty</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T equality of elements ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Equal</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*=*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T negation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Not</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">*!*</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T And ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">And</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*&amp;&amp;*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Or ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Or</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*||*</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Forall ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Forall</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">forall</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">*.*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Exists ❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">Exists</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">exists</span><span class="w"> </span><span class="si">V1</span><span class="w"> </span><span class="ss">in</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">*.*</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Holds ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Holds</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">holds</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140000</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTRelationExp</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// Precedence -13xxxx❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T base case: an atomic binary relation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">ToObject</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">object</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T base case: the inverse of an atomic binary relation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">ToSubject</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">subject</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T the transitive closure of a relation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Transitive</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">*+</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T the symmetric closure of a relation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Symmetric</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">symmetric</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T the union of a list of relations ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Choice</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">choice</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T the composition of a list of relations ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Sequence</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sequence</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T the reflexive relation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Reflexive</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">reflexive</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T the reflexive relation restricted to a set of paths ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">HasType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">hastype</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">*--*</span><span class="w"> </span><span class="si">2</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTBinaries</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// Precedence -12xxxx❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">DependsOn</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">dependson</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">HasMeta</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">hasmeta</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Includes</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">includes</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">HasDomain</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">hasdomain</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">HasCodomain</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">hascodomain</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsInstanceOf</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isinstanceof</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">RefersTo</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">refers</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Declares</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">declares</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsAliasFor</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isaliasfor</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsAlignedWith</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isalignedwith</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTUnaries</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// Precedence -12xxxx❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">IsDocument</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">document</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsTheory</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">theory</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsView</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">view</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsStructure</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">structure</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsConstant</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">constant</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsPattern</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pattern</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsInstance</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">instance</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsDerivedDeclaration</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">deriveddeclaration</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsConAss</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">conass</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsStrAss</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">strass</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">IsNotation</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">notation</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120000</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">QMTLiterals</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// TODO: Literals ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">QMT</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// include the MMT base in notations</span>
<span class="cm">	include ?mmt ❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">// TODO: Precedence ❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTQuery </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTProp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTRelationExp </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTJudgements </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTUnaries </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTBinaries </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QMTTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://quotation.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   introduces a primitive type that exposes the type MMT terms of the underlying implementation</span>
<span class="cm">This can be seen as a first step towards MMT meta-programming but is used here only to represent quotations.</span>
<span class="cm">❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TermLiterals</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TermsTypesKinds</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T the type of MMT terms ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">termliteral</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T makes all MMT terms (inlcudings ill-typed or ill-scoped ones) literals of type $termliteral$❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?TermLiteralRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   the language features of quotation</span>
<span class="cm">This allows quoting terms that are well-typed in the current context.</span>

<span class="cm">The concrete syntax uses MMT&#39;s string interpolation feature with the identifier q, i.e., q&quot;t&quot; is the quotation of the term t.</span>
<span class="cm">Quoted terms are unevaluated, i.e., q&quot;1+1&quot; != q&quot;2&quot;. </span>

<span class="cm">Within t, it is allowed to escape back into evaluated terms: q&quot;1+${s}&quot; is the quasiquotation q&quot;1+e&quot; where e is the result of evaluating s.</span>
<span class="cm">❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Quotation</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LF</span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// LF is not actually needed here. But due a current bug, the comments are not type-checked correctly without LF. ❙</span><span class="w"></span>

<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TermLiterals</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T For any [a:type], $Q a$ is the type of quotations of terms of type $a$.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Quote</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Q</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T the quotation operator</span>
<span class="cm">     Because of interpolation, this is not a unary operator - instead, the evaluated subterms are replaced with free variables and bundled up in a substitution.</span>
<span class="cm">     For example, q&quot;1+${s}+2&quot; is internally represented as quote(l, x/s) where l is the term literal 1+x+2.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">quote</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T the evaluation operator: For [a:type, q: Q a], $eval q$ is the evaluation of $q$ of type $a$.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">eval</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">eval</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T the concrete syntax for quotations (using string interpolation)❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Lexer</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T the formation rule: For [a:type], $Q a$ is a type.❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?QuoteFormation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the introduction rule: In the simplest case, for [a:type, t:a], the quotation of $t$ has type $Q a$.❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?QuoteIntroduction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the elimination rule: For [a:type, q: Q a], $eval q$ has type $a$.❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?QuoteElimination</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the type checking rule: For [a:type], we check [q: Q a] by checking that $eval q$ has type $a$.❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?QuoteTyping</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the beta-style reduction rule: For [a:type,t:a] the evaluation of the quotation $t$ reduces to $t$.❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EvalQuote</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T an auxiliary rule for normalizing quotations:</span>
<span class="cm">     For example, it reduces q&quot;1+${q&quot;2&quot;}&quot; to q&quot;1+2&quot;.❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ReduceQuote</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   LF with quotation❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LFQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Quotation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LF</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T   a simple test theory ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">QuotingInterpolationExample</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LFQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">a</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">c</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">f</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">a ⟶ a ⟶ a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">t</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Q a ⟶ Q a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[q] q</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">q1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Q a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">q&quot;f c c&quot;</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">q2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Q a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">q&quot;f c ${q1}&quot;</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">q3</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Q a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">q&quot;f c ${t q1}&quot;</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">q4</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Q a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">q&quot;f c ${t q&quot;f c c&quot;}&quot;</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">q5</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Q a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">q&quot;f c ${t q&quot;f c ${t q1}&quot;}&quot;</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">examples/Quotation</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExcludedMiddle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/urtheories?LFQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">bool</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool ⟶ type</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">disj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool ⟶ bool ⟶ bool</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∨</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">not</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool ⟶ bool</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">¬</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">em</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f} ⊦ (eval f) ∨ ¬ (eval f)</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PeanoInduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">/urtheories?LFQ</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ExcludedMiddle</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">nat</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">zero</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">succ</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">induction</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{f} ⊦ (eval f) zero ⟶ ({n} ⊦ (eval f) n ⟶ ⊦ (eval f) (succ n)) ⟶ ({n} ⊦(eval f) n)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Scala</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">hasType</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">:</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Any</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Unit</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">unit</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">()</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Product</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">Product</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Tuple</span><span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="ss">Tuple</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">]</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Function</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Fun</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Lambda</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">V1T</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">)</span><span class="w"> </span><span class="ss">-</span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1000010</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">List</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">List</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">list</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">List</span><span class="w"> </span><span class="ss">(</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">BigInt</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Double</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Boolean</span><span class=" -MMT_DD">❙</span><span class="w">            </span>
<span class="w">  </span><span class="vc">String</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ScalaOM</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Scala</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Term</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Context</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://semiformal.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Informal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">informal</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InformalLiterals</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?InformalTyping</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Semiformal</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Informal</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">semiformal</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SemiformalInterpolation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SemiformalTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SemiformalInterpolationExample</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Semiformal</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">nat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">plus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ nat ⟶ nat</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">test</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat ⟶ nat ⟶ nat </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] sf&quot;the sum of all number from 1 to ${x+y}&quot;:nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">test2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] sf&quot;the product of ${x+y:nat} and ${y+x:nat}&quot;:nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://sequences.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Sequences</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Typed</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Nat</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">rep</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-20</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?NTypeTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UniverseNType</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">ellipsis</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="ss">⟨&#39;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">V1T</span><span class="w"> </span><span class="ss">&#39;⟩</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10002</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">index</span><span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">..</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">9998</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">flatseq</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">⟨</span><span class="w"> </span><span class="si">1</span><span class="ss">,</span><span class="si">…</span><span class="w"> </span><span class="ss">⟩</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">foldLeft</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">foldL</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EllipsisInfer</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EllipsisTypeCheck</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EllipsisEqualityCheck</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?EllipsisInjective</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RepTypeCheck</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RepEqualityCheck</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?ExpandRep</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IndexInfer</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IndexCompute</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?FlatseqInjective</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?SolveArity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LengthAwareApplyTerm</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LengthAwareBeta</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?FoldLeftType </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFS</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DHOL</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sequences</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?FlexaryPi</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?FlexaryLambda</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?FlexaryApply</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Strings</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">string</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">empty</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">concat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string ⟶ string ⟶ string</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize string rules/api/uom?StandardString</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize empty rules/api/uom?StringOperations/Empty</span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/lf?Realize concat rules/api/uom?StringOperations/Concat</span><span class=" -MMT_DD">❙</span><span class="w">  </span>

<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/literals?StandardStringInterpolation string concat</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">StringInterpolationExample</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Strings</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">  </span><span class="vc">c</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">f</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string ⟶ string ⟶ string</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] x + y</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">q1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">s&quot;AA&quot;</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">q2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">s&quot;AA ${q1}&quot;</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">q3</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">s&quot;AA ${s&quot;a&quot; + s&quot;b&quot;}&quot;</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">q4</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">s&quot;AA ${f c s&quot;BB&quot;}&quot;</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">q5</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">s&quot;AA ${f c s&quot;BB ${f q1 q1}&quot;}&quot;</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://substructural.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// This theory is under development.</span>
<span class="cm">Its goal is to investigate to what extent substructural languages can be represented in MMT.</span>
<span class="cm">This was motivated by a promising initial case study on representing ordered linear logic (done with Jeff Polakow, at LFMTP 2017).❚</span><span class="w"></span>

<span class="cm">//   theory Substructural =</span>
<span class="cm">   Sarrow  # 2 - 1 -&gt; 3  prec  -9990❙</span>
<span class="cm">   Slambda # [ 1 V2T,… ] 2 prec -10000❙</span>
<span class="cm">   Sapply  # 1%w…        prec -10❙</span>

<span class="cm">   class # class 1 2  prec 1000❙</span>

<span class="cm">   unordered ❙</span>
<span class="cm">   leftordered ❙</span>
<span class="cm">   rightordered ❙</span>
<span class="cm">   </span>
<span class="cm">   plain❙</span>
<span class="cm">   useall❙</span>
<span class="cm">   useonce❙</span>
<span class="cm">   linear❙</span>

<span class="cm">   rule rules?SArrowTerm❙</span>
<span class="cm">   rule rules?SLambdaTerm❙</span>
<span class="cm">   rule rules?SApplyTerm❙</span>
<span class="cm">   rule rules?SArrowTyping❙</span>
<span class="cm">   rule rules?SArrowEquality❙</span>
<span class="cm">   rule rules?SArrowBeta❙</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   LF as meta-theory means using LF HOAS❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Subtyping</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">subtype</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type, B: type} type                  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⊆‍</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-9980</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">refl</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A ⊆‍ A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">trans</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} A ⊆‍ B ⟶ B ⊆‍ C ⟶ A ⊆‍ C</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">covariant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type, B1: A ⟶ type, B2: A ⟶ type} ({x:A} B1 x ⊆‍ B2 x) ⟶ ({x:A} B1 x) ⊆‍ ({x:A} B2 x)</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Inhabitation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">// &quot;! A&quot; is a judgments for the inhabitation (= non-emptiness) of &quot;A&quot;.</span>
<span class="cm">     If &quot;A&quot; is empty, so is &quot;!A&quot;. If &quot;A&quot; is non-empty, &quot;!A&quot; is a singleton.</span>
<span class="cm">     These types are useful when using proofs as judgments as guards, i.e., in situations where only the inhabitation of a type matters, not the choice of inhabitant.</span>
<span class="cm">     Also note, that if &quot;A&quot; is a type of proofs, then &quot;! A&quot; is essentially the same type but with proof irrelevance.   </span>
<span class="cm">  ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Inh</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type                     </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">!</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class=" -MMT_OD">❘</span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// introduction: If we have an inhabitant of &quot;A&quot;, then &quot;A&quot; is inhabited.</span>

<span class="cm">     This is similar to modal logic&#39;s necessitation rule, but we apply it even if there are unboxed assumptions in the context.</span>
<span class="cm">  ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inh</span><span class="w">    </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A ⟶ !A </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">inh</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// The inverse operator does not exist exactly but almost: If we have &quot;!A&quot;, we can assume an &quot;x:A&quot; as long as we only use &quot;x&quot; to prove other &quot;!B&quot;-judgments.</span>
<span class="cm">  </span>
<span class="cm">  More generally, the declarations in this theory only return !-types.</span>
<span class="cm">  Thus, adding this theory does not affect the adequacy of an existing encoding.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">elim</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} !A ⟶ (A ⟶ !B) ⟶ !B</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// The operator &quot;inh&quot; is functorial. ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Note that this is also the modal axiom K ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">K</span><span class="w">      </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} !(A ⟶ B) ⟶ !A ⟶ !B</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] [p,q] elim p [r: A ⟶ B] elim q [s: A] inh (r s)</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Thus, we have: &quot;A ⟶ B&quot; is stronger than &quot;!(A ⟶ B)&quot; is stronger than &quot;!A ⟶ !B&quot; (which is equivalent to &quot;A ⟶ !B&quot;).</span>
<span class="cm">     Set-theoretically, all 3 are equivalent, but proving the inverse directions requires non-canonically choosing an element, which we cannot do in type theory. ❙</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="cm">// We can prove that multiple inhabitation operators are redundant.❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">idempotent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} !!A ⟶ !A </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][p] elim p [a]a</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// operationalizes the rule {A, P:!A, Q:!A} P = Q❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules/inhabitation?ProofIrrelevance</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// an experimental theory for predicate subtypes❚</span><span class="w"></span>
<span class="cm">//   theory PredicateSubtypes : ?PLF =</span>
<span class="cm">  include ?Subtyping❙</span>
<span class="cm">  include ?Inhabitation❙</span>
<span class="cm">  </span>
<span class="cm">  Sub    : {A: type} (A ⟶ type) ⟶ type              ❘ # 1 | 2 prec 20❙</span>
<span class="cm">  sub    : {A, P} {x: A} !(P x) ⟶ A|P               ❘ # 3 by 4❙</span>

<span class="cm">  subA_A    : {A,P} A|P ⊆‍ A❙</span>
<span class="cm">  subA_subA : {A,P,Q} ({x} P x ⟶ Q x) ⟶ A|P ⊆‍ A|Q❙</span>

<span class="cm">  // elim   : {A,P}{x: A|P} ! (P x)❙</span>
<span class="cm">  // sub x (elim x) = x❙</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories/reflection</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">rule</span><span class="w"> </span><span class="l l-URI">scala://parser.api.mmt.kwarc.info?MMTURILexer</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Terms</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞/urtheories?Typed</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">formation</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">{|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|}</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">reflect</span><span class="w">   </span><span class="p">#</span><span class="w"> </span><span class="ss">⌜</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">:</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⌝</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">eval</span><span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="ss">⌞</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⌟</span><span class="w"> </span><span class="si">2</span><span class="w">   </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">elim</span><span class="w">      </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w">     </span><span class="k">prec</span><span class="w"> </span><span class="mi">-10000</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LFReflection</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞/urtheories?LF</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Terms</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.mitm.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lf</span><span class="w"> </span><span class="l l-URI">scala://lf.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">scala://LFX.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt?mmt</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Metadata</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">constructorargument</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T We define a formal language for basic mathematical objects in LF. ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Subtyping</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://gl.mathhub.info/MMT/LFX/Subtyping?LFSubtyped </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T First, some logic. ❚</span><span class="w"></span>

<span class="w">                                               </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Logic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/TypedHierarchy?LFHierarchy</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://gl.mathhub.info/MMT/LFX/Records?LFRecords </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://cds.omdoc.org/urtheories?Ded </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://gl.mathhub.info/MMT/LFX/Subtyping?LFWithVariance </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">// rule rules?ApplyRule ❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">/T the type of booleans, i.e., all formulas are represented as terms of LF-type $prop$ ❙</span><span class="w"></span>
<span class="w">	 </span><span class="cm">// bool : type ❘ // = BOOL ❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">@</span><span class="no"> bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">BOOL </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">/T one LF-type for each formula holding its proofs                 </span>
<span class="cm">	 For example, the LF type ⊦ 0 ≐ 1 is empty because that formula has no proofs.</span>
<span class="cm">	 Axioms are declared as constants of the corresponding type, e.g., a constant of type $⊦ true$ for the axiom of truth.❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">ded</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⊦</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-500</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Judgment </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DED </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">ImplicitProof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ImplicitProof</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">lf?TermIrrelevanceRule (ded) ([A : prop] ImplicitProof A) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">/T Equality on terms. The type A is left implicit and can be inferred by MMT ❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">eq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:𝒰 100} A ⟶ A ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≐</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = EQUAL </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">// coercion : {A : type, P : A ⟶ prop,a} ⊦ P a ⟶ ⟨ A | ([x] ⊦ P x) ⟩ ❘ # coerce 3 %I4❙</span><span class="w"></span>
<span class="w">	 </span><span class="cm">// coercion_theorem : {A : type,P : A ⟶ prop,a,p : ⊦ P a} ⊦ eq ⟨ A | ([x] ⊦ P x) ⟩ (coercion A P a p) a ❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?BooleanLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">// false_is_FALSE : ded (FALSE ≐ false) ❙</span><span class="w"></span>
<span class="w">	 </span><span class="cm">// true_is_TRUE : ded (TRUE ≐ true) ❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">not</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">¬</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">neq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: 𝒰 100} A ⟶ A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≠</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a,b] ¬ (a ≐ b) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	 </span><span class="vc">and</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool ⟶ bool ⟶ bool</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∧</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-110</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">or</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool ⟶ bool ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∨</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-120</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [A,B] ¬ (¬A ∧ ¬ B) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">implies</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool ⟶ bool ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⇒</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-130</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [A,B] B ∨ ¬A </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">iff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool ⟶ bool ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⇔</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-140</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="cm">// = [A,B] (A ⇒ B) ∧ (B ⇒ A) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	 </span><span class="vc">forall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100} (A ⟶ bool) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">exists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100} (A ⟶ bool) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∃</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-100</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="cm">// = [A,f] ¬ ∀ [x:A] ¬ f x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">unique</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100} (A ⟶ bool) ⟶ A ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,x] ∀ [y:A] P y ⇒ y ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">unique</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">exists_unique</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100} (A ⟶ bool) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∃!</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-101</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] ∃ [x] (P x ∧ unique P x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	 </span><span class="cm">/T Equality on types (semantics missing) ❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">tpeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≐≐</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-6</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Eq </span><span class=" -MMT_DD">❙</span><span class="w">	 		</span>
<span class="w">	 </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	 </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NaturalDeduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">tru_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ true </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">fals_elimination</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ false ⟶ ⊦ A </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">fals_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ A ⟶ ⊦ ¬ A ⟶ ⊦ false </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">forall_elim</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100, P : A ⟶ bool}⊦ ∀ P ⟶ {x : A}⊦ P x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">forallE</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">forall_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100, P : A ⟶ bool, p : {x : A}⊦P x}⊦ ∀[x] P x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">forallI</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	 </span><span class="vc">and_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ⟶ ⊦ B ⟶ ⊦ (A ∧ B) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">and_elim_left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ (A ∧ B) ⟶ ⊦ A </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">and_elim_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ (A ∧ B) ⟶ ⊦ B </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">not_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} (⊦ A ⟶ ⊦ false) ⟶ ⊦ ¬ A </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">not_elim</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ¬ ¬ A ⟶ ⊦ A </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	 </span><span class="vc">tnd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ A ∨ ¬A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [A: bool] not_introduction ([p : ⊦ (¬A ∧ ¬¬A)] fals_introduction (not_elim (and_elim_right p)) (and_elim_left p)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Some more rules for convenience. ❙</span><span class="w"></span>

<span class="w">        </span><span class="vc">or_introduction_right</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ⟶ ⊦ (A ∨ B) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">orinr</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">or_introduction_left</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ B ⟶ ⊦ (A ∨ B) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">orinl</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">implication_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (⊦ A ⟶ ⊦ B) ⟶ ⊦ A ⇒ B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">impli</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">equiv_introduction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ (A ⇒ B) ⟶ ⊦ (B ⇒ A) ⟶ ⊦ (A ⇔ B) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">equivi</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">or_elimination</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ (A ∨ B) ⟶ (⊦ A ⟶ ⊦ C) ⟶ (⊦ B ⟶ ⊦ C) ⟶ ⊦ C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">orelim</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">modus_ponens</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (⊦ A ⇒ B) ⟶ ⊦ A ⟶ ⊦ B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">MP</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="cm">/T basic axioms governing Equality. Again, all the type parameters can be left implicit ❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">eq_refl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t:𝒰 100,A: t} ⊦ A ≐ A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">eq_refl</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">eq_cong</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t : 𝒰 100, s : 𝒰 100, f : t ⟶ s, A : t, B: t}</span>
<span class=" -MMT_ObjectExpression">	 		⊦ A ≐ B ⟶ ⊦ (f A) ≐ (f B) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">eq_cong</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	 </span>

<span class="cm">/T Now some theories that introduce primitive types and literals for them.</span>
<span class="cm">     Because literals must modify the parser, they are supplied as rules that are implemented in a plugin.❚</span><span class="w">   </span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NatLiterals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subtyping </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://cds.omdoc.org/urtheories?NatLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://cds.omdoc.org/urtheories?NatRels </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">nat_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℕ</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule rules?NatLiterals ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">pos_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⟨ n : nat_lit | ⊦ n ≠ 0 ⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℕ+</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PosLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">pos_are_nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit &lt;* nat_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">succ_nat_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit ⟶ pos_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?NatSucc </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// not needed anymore: rule rules?NatSuccInverse ❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">plus_pos_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit ⟶ pos_lit ⟶ pos_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PosPlus </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_nat_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit ⟶ nat_lit ⟶ nat_lit </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plus </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule rules?NatPlus ❙</span><span class="w"></span>
<span class="w">   	</span><span class="vc">times_pos_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit ⟶ pos_lit ⟶ pos_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?PosTimes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">times_nat_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit ⟶ nat_lit ⟶ nat_lit </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">times </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule rules?NatTimes ❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">leq_nat_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit ⟶ nat_lit ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">LEQ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// rule rules?NatLeq ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">IntLiterals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">int_lit</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℤ</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntegerLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">minus_int_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">int_lit ⟶ int_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntMinus </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">plus_int_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">int_lit ⟶ int_lit ⟶ int_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntPlus </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">times_int_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">int_lit ⟶ int_lit ⟶ int_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntTimes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leq_int_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">int_lit ⟶ int_lit ⟶ bool </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?IntLeq </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">RealLiterals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="vc">real_lit</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℝ</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RealLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">leq_real_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit ⟶ real_lit ⟶ bool </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RealLeq </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   	</span><span class="vc">minus_real_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit ⟶ real_lit  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RealMinus </span><span class=" -MMT_DD">❙</span><span class="w">   </span>
<span class="w">   	</span><span class="vc">plus_real_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit ⟶ real_lit ⟶ real_lit </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RealPlus </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   	</span><span class="vc">times_real_lit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit ⟶ real_lit ⟶ real_lit </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">×</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RealTimes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// square_is_pos : {r : ℝ} ⊦ leq_real_lit 0 (times_real_lit r r) ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">sqrt</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?RealSqrt </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">     </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Literals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IntLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subtyping </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">ints_are_real</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">int_lit &lt;* real_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">nats_are_int</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit &lt;* int_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">nats_are_real</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit &lt;* real_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">pos_are_int</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit &lt;* int_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">pos_are_real</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit &lt;* real_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// rule rules?NumberLiterals ❙</span><span class="w"></span>

<span class="w">   </span><span class="cm">// test : ⊦ leq_lit 0 1 ❘ = tru_introduction ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// test2 : ⊦ nat_lit_succ 1 ≐ 2 ❘ = eq_refl 2 ❙</span><span class="w"></span>
<span class="w">	 </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Trigonometry</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">tan</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit ⟶ real_lit    </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">sin</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit ⟶ real_lit    </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">cos</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit ⟶ real_lit    </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">atan</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit ⟶ real_lit    </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">asin</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit ⟶ real_lit    </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">acos</span><span class="w">   </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">real_lit ⟶ real_lit    </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Tan </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Sin </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Cos </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Atan </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Asin </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?Acos </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	 </span>
<span class="cm">/T String literals are also needed occasionally, e.g., in the LMFDB.❚</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Strings</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">string</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?StringLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">concat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">string ⟶ string ⟶ string</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Now some more complex types. First lists.❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Lists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://gl.mathhub.info/MMT/LFX/Datatypes?LFLists </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InformalProofs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Strings </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   	 </span>
<span class="w">	</span><span class="vc">proofsketch</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : prop} string ⟶ ⊦ A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sketch</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">byproof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ A ⟶ ⊦ B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">by</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">addproofstep</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C: prop} ⊦ A ⟶ ⊦ B ⟶ ⊦ B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">and</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">trivial</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : prop} ⊦ A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] sketch &quot;trivial&quot; </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">trivial</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="cm">/T (Finite) sets ❙</span>
<span class="cm">theory Sets : ur:?LF =</span>
<span class="cm">   include ?Logic❙</span>
<span class="cm">   /T the type operator of sets along with its constructors❙</span>
<span class="cm">   set: type ⟶ type ❙</span>
<span class="cm">   </span>
<span class="cm">   empty: {A} (list A) ❘# ∅ 1❘## ∅ %I1 ❙</span>
<span class="cm">   cons: {A} A ⟶ (list A) ⟶ (list A)❘ # 2 , 3 ❙ </span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">/T Multisets ❙</span>

<span class="cm">/T &quot;Finite hybrid sets&quot; (mutlisets with possibly negative mutliplicities) ❙</span>

<span class="cm">/T Now vectors, i.e., fixed-length lists.❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Vectors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Literals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">   </span><span class="cm">/T the type operator of vectors (fixed-length lists) over a given type ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">vector</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">𝒰 100 ⟶ nat_lit ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">zerovec</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t : 𝒰 100} vector t 0 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">vector_prepend</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t: 𝒰 100,n : nat_lit, a : t, b : vector t n} t ^^ (succ_nat_lit n) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Matrices</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Vectors </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="cm">/T the type operator of matrices over a given type❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">matrix</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">𝒰 100 ⟶ nat_lit ⟶ nat_lit ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T,n,m] vector (vector T m) n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OptionType</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">Option</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">𝒰 100 ⟶ 𝒰 100 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">isDefined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} Option A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isDefined</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">OptionGet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, a : Option A} ⊦ isDefined a ⟶ A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">get</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">None</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100} Option A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">None</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">None_is_not_Defined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100} ⊦ isDefined (None A) ≐ false </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Not_None_is_Defined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, a : Option A} ⊦ (a ≠ None A) ⟶ ⊦ isDefined a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Some</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: 𝒰 100} A ⟶ Option A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Some</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">Some_is_Defined</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100}{a:A} ⊦ isDefined (Some a) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">get_some</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100}{a:A} ⊦ get (Some a) ≐ a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DescriptionOperator</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OptionType </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">that</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:𝒰 100,P:A ⟶ bool} ⊦ (∃! P) ⟶  A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ι</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">that_proof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100, P : A ⟶ bool, p : ⊦ ∃! P} ⊦ P (that A P p) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">if_then_else_exists_proof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,P,a:A,b:A} ⊦ ∃! [x:A] (P ∧ x ≐ a) ∨ (¬ P ∧ x ≐ b) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">iteep</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">if_then_else</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100, P : bool, a : A, b : A}A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">if</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">then</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">else</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,a,b] that A ([x] (P ∧ x ≐ a) ∨ (¬ P ∧ x ≐ b)) (iteep P a b) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">if_then_else_case</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100, P : bool, a : A, b : A}A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,a,b] if P then a else b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">case</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⟹</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">if_true</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100, P : bool, a : A, b : A, p : ⊦ P} ⊦ (if P then a else b) ≐ a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [A,P,a,b,p] _ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">if_false</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : 𝒰 100, P : bool, a : A, b : A, p : ⊦ ¬ P } ⊦ (if P then a else b) ≐ b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [A,P,a,b,p] _ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ProductTypes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Sigma?LFSigma</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="cm">// to have it in the meta-theory ❙</span><span class="w">                       </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">FiniteTypes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Finite?LFFinite</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">InductiveTypes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/WTypes?Inductive</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Sequences</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?Sequences </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ur:?LFS </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">forall_seq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type}{n} (A^n ⟶ prop) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∀n</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-101</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">exists_seq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type}{n} (A^n ⟶ prop) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∃n</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-101</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,n][P] ¬ forall_seq A n [s : A^n] ¬ (P s)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Finally, a theory that puts everything together (not recommended, because modularity) ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Math</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?PLF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subtyping </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Logic </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NaturalDeduction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Literals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Trigonometry </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Strings </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lists </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Vectors </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Matrices </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OptionType </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ProductTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sequences </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Classes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">class</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">cls_element</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">class ⟶ class ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∈</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">axiom_extensionality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t} ⊦ (∀[e] e ∈ s ⇔ e ∈ t) ⇒ s ≐ t </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_extensionality</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?Subtyping </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">set</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⟨ s : class | ⊦ ∃ [C : class] s ∈ C ⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">set</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">emptyclass</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∅</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_emptyClassIsEmpty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s} ⊦ ¬ s ∈ ∅ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_emptyClassIsEmpty</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// implicit view ZFinNBG : ?ZFBase -&gt; ?Classes =</span>
<span class="cm">    include ☞fnd:?InformalProofs ❙</span>
<span class="cm">    include ☞fnd:?DescriptionOperator ❙</span>
<span class="cm">    set = set ❙</span>
<span class="cm">    element = [s,t] cls_element s t ❙</span>
<span class="cm">    emptyset = emptyclass ❙</span>
<span class="cm">    axiom_emptySetIsEmpty = [s: set] axiom_emptyClassIsEmpty s ❙</span>

<span class="cm">    axiom_extensionality = [s,t] sketch &quot;from extensionality&quot; ❙</span>
<span class="cm">    axiom_separation = [P,s] sketch &quot;axiomatically&quot; ❙</span>
<span class="cm">    axiom_regularity = [s] sketch &quot;axiomatically&quot; ❙</span>
<span class="cm">    axiom_pairing = [s,t] sketch &quot;axiomatically&quot; ❙</span>
<span class="cm">    axiom_union = [s] sketch &quot;axiomatically&quot; ❙</span>
<span class="cm">    axiom_powerset = [s] sketch &quot;axiomatically&quot; ❙</span>
<span class="cm">    axiom_replacement = [a,f] sketch &quot;axiomatically&quot; ❙</span>

<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.mitm.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetTypeConversions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">elem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">asSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ set </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">setAsElem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,a} ⊦ a ∈ A ⟶ elem A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asTerm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">elemAsSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} A ⟶ set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asElem</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">axiom_asElemIsElem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,a : A} ⊦ (asElem a) ∈ (asSet A) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_inverses1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s} ⊦ asSet (elem s) ≐ s </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_inverses2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t} ⊦ elem (asSet t) ≐ t </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_asTermElem1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,a:A} ⊦ asTerm (asSet A) (asElem a) ≐ a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_asTermElem2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,a,p:⊦a ∈ A} ⊦ asElem (asTerm A a) ≐ a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">// rule rules?SetCoercionRule ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LiftSeparation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetTypeConversions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Separation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?Subtyping </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">axiom_sepIsPredSub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,P : set ⟶ prop} ⊦ elem ⟪ s | P ⟫ ≐ ⟨ x : (elem s) | ⊦ P (asElem x) ⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_predSubIsSep</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t,P : t ⟶ prop} ⊦ asSet ⟨ x : t | ⊦ P x ⟩ ≐ ⟪ asSet t | ([x] P (asTerm (asSet t) x)) ⟫ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LiftProduct</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CartesianProduct </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?KuratowskiPairs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetTypeConversions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?ProductTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="cm">// axiom_productType : {s,t} ⊦ elem (product s t) ≐ (elem s) × (elem t) ❘ role Simplify ❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?LiftProductType </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_productSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t} ⊦ asSet (s × t) ≐ product (asSet s) (asSet t) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_pairType</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t,S,T} ⊦ asTerm (product S T) (pair s t) ≐ ⟨ (asTerm S s) , (asTerm T t) ⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_pairSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S,T,s : S,t : T} ⊦ asElem ⟨ s , t ⟩ ≐ pair (asElem s) (asElem t) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// theory LiftRelations : fnd:?Logic =</span>
<span class="cm">    include ?Relations ❙</span>
<span class="cm">    include ?LiftProduct ❙</span>


<span class="cm">    axiom_relType : {a:set,b:set} ⊦ elem (℘ (product a b)) ≐ (elem a ⟶ elem b ⟶ prop) ❘ role Simplify ❙</span>
<span class="cm">    axiom_relSet : {A,B} ⊦ asSet (A ⟶ B ⟶ prop) ≐ ℘ (product (asSet A) (asSet B)) ❘ role Simplify ❙</span>
<span class="cm">    axiom_relType2 : {a:set,b:set,r: relation a b} ⊦ eq (elem a ⟶ elem b ⟶ prop) (asTerm (℘ (product a b)) r) ([x : elem a, y : elem b] (pair (asElem x) (asElem y)) ∈ r ) ❘ role Simplify ❙</span>
<span class="cm">    axiom_relSet2 : {A,B,R : A ⟶ B ⟶ prop} ⊦ asElem R ≐ ⟪ ℘ (product (asSet A) (asSet B)) | ([x] ∃[a] ∃[b] x ≐ pair a b ∧ R (asTerm (asSet A) a) (asTerm (asSet B) b) ) ⟫ ❘ role Simplify ❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LiftOmega</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetTypeConversions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Infinity </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?NatLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">axiom_lift_omega</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ elem ω ≐ ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_lift_Nat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ asSet ℕ ≐ ω </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_lift_zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ asTerm ω ∅ ≐ 0 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_lower_zero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ asElem 0 ≐ ∅ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_lift_succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} ⊦ asTerm ω (set_succ n) ≐ succ_nat_lit (asTerm ω n) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_lower_succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n} ⊦ asElem (succ_nat_lit n) ≐ set_succ (asElem n) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="cm">// include base:?Lists ❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetTypeConversions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Powerset </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Separation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?Subtyping </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the type operator of sets along with its constructors ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">setOf</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] ⟨ x : set | ⊦ x ∈ (℘ (asSet A)) ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fromPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A ⟶ prop) ⟶ setOf A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] ⟪ ℘ (asSet A) | ([x] P (asTerm (asSet A) x)) ⟫ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asSet</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">asPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} setOf A ⟶ A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s] [x] (asElem x) ∈ s </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asPred</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// setCons: {A} A ⟶ set A ⟶ set A ❘ = [A] [a,P] [x] P x ∨ x ≐ a❘ # 3 &lt;- 2 ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// setList : {A} List A ⟶  set A ❘ # ≪ 2 ≫ ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// inSet : {A : type} A ⟶ set A ⟶ prop ❘ = [A][a,P] P a ❘ # 2 ∈ 3 ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// bsetst : {A} set A ⟶ (A ⟶ prop) ⟶ set A ❘ = [A][P,Q] [x] P x ∧ Q x ❘ # ⟪ 2 | 3 ⟫ ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// fullset : {A} set A ❘ = [A] [x] true ❘ # fullset 1 ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// TODO, need a lot of congruence rules that make sure that setcons ACI ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Sets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">set</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">element</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∈</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">emptyset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∅</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">axiom_emptySetIsEmpty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s} ⊦ ¬ s ∈ ∅ </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">subset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,t] ∀ [z] z ∈ s ⇒ z ∈ t </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⊑</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">disjoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,t] ¬∃[e] e ∈ s ∧ e ∈ t </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_extensionality</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,t](∀[e] e ∈ s ⇔ e ∈ t) ⇒ s ≐ t </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_separation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(set ⟶ prop) ⟶ set ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P][s]∃![t]∀[e]e ∈ t ⇔ (e ∈ s ∧ P e) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_regularity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s]s ≠ ∅ ⇒ ∃ [e] e ∈ s ∧ (disjoint s e) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_pairing</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] ∃[z] x ∈ z ∧ y ∈ z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_pairing_unique</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] ∃![z] x ∈ z ∧ y ∈ z ∧ ∀[w] w ∈ z ⇒ (w ≐ x ∨ w ≐ y) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_union</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] ∃![y]∀[z] z ∈ y ⇔ ∃[w] z ∈w ∧ w ∈ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_powerset</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x]∃![y] ∀[z] z ∈ y ⇔ z ⊑ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_replacement</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][f : set ⟶ set] ∃![B]∀[z] (z ∈ B ⇔ ∃[a] a ∈ A ∧ z ≐ f a) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Extensionality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_extensionality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t} ⊦ prop_extensionality s t </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Separation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_separation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P,s} ⊦ prop_separation P s </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_separation</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">sep_constructor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s : set,P : set ⟶ prop}set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,P] that set ([x] ∀[e]e ∈ x ⇔ (e ∈ s ∧ P e)) (axiom_separation P s)</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⟪</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⟫</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Intersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Separation </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">intersect</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,t] ⟪ s | ([x] x ∈ t) ⟫ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∩</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Regularity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_regularity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s} ⊦ prop_regularity s </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Pairing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">axiom_pairing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ prop_pairing x y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_pairing_unique</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y : set} ⊦ prop_pairing_unique x y </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_pairing_unique</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] sketch &quot;provable&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">uopair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] that set ([z] x ∈ z ∧ y ∈ z ∧ ∀[w] w ∈ z ⇒ (w ≐ x ∨ w ≐ y)) (lemma_pairing_unique x y) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">singleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s] uopair s s </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">KuratowskiPairs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Pairing </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">pair</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] uopair (uopair x y) x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ prop_union x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_union</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s] that set ([x] ∀[z] z ∈ x ⇔ ∃[w] z ∈w ∧ w ∈ s) (axiom_union s) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⋃</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BinaryUnion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?KuratowskiPairs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Union </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">binaryunion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] ⋃ (uopair a b) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∪</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Powerset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_powerset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ prop_powerset x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_powerset</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">powerset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] that set ([y] ∀[z] z ∈ y ⇔ z ⊑ x) (axiom_powerset x) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">℘</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CartesianProduct</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Powerset </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Separation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BinaryUnion </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">product</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] sep_constructor (℘ (℘ (A ∪ B))) ([p] ∃[a]∃[b] a ∈ A ∧ b ∈ B ∧ p ≐ pair a b) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Relations</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CartesianProduct </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?Subtyping </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_relation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,A,B : set] s ⊑ (product A B) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_relation</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">relation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ type </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] ⟨ s : set | ⊦ prop_relation s A B ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Functions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relations </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_function</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f,A,B] prop_relation f A B ∧ ∀[x] x ∈ A ⇒ ∃[y] y ∈ B ∧ (pair x y) ∈ f </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// TODO ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">function</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ type </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] ⟨ s:set | ⊦ prop_function s A B ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">setfunapply</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} function A B ⟶ {a : set}⊦ a ∈ A ⟶ set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,a,p] ι ([x] (pair a x) ∈ f) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">@</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">%I5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">theorem_setfun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,f : function A B, a} ⊦ (f @ a) ∈ B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,a] sketch &quot;by definition&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Replacement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞fnd:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_replacement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,f} ⊦ prop_replacement a f </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_replacement</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">replacement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ (set ⟶ set) ⟶ set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,f] that set ([B] ∀[z] (z ∈ B ⇔ ∃[a] a ∈ A ∧ z ≐ f a)) (axiom_replacement A f) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Img</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Infinity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BinaryUnion </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">set_succ</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] n ∪ (singleton n) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_infinity</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[N] ∅ ∈ N ∧ ∀[n] n ∈ N ⇒ (set_succ n) ∈ N </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">omega</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ω</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ι [x] prop_infinity x ∧ ∀[z] prop_infinity z ⇒ x ⊑ z</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ZFBase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Extensionality </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Separation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Regularity </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Pairing </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Union </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Powerset </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Replacement </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Infinity </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FunctionsExtended</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Functions </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">prop_injective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} function A B ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f] ∀[x] ∀[y] x ∈ A ∧ y ∈ A ⇒ (f@x ≐ f@y ⇒ x ≐ y) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_injective</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_surjective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} function A B ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f] ∀[y] y ∈ B ⇒ ∃[x] x ∈ A ∧ f@x ≐ y </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_surjective</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_bijective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} function A B ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f] prop_injective f ∧ prop_surjective f </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_bijective</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Finite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FunctionsExtended </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Infinity </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">prop_finite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s] ∃[n] n ∈ ω ∧ ∃[f : function s n] prop_injective f </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_infinite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s] ¬ prop_finite s </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ZF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ZFBase </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Finite </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Intersection </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">setdiff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ set </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] ⟪ A | ([x] ¬ x ∈ B) ⟫ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">\</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtract</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ set </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a] A \ (singleton a) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">symdiff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ⟶ set ⟶ set </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] (A \ B) ∪ (B \ A) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">Δ</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Choice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Functions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_choiceFunction</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,f : function A (⋃ A)] ∀[a] a ∈ A ⇒ (f @ a) ∈ a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">choice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⟨ f : function A (⋃A) | ⊦ prop_choiceFunction A f ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ZFCBase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ZFBase </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Choice </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ZFC</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ZFCBase </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ZF </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/Units</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.mitm.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Dimensions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>

<span class="w">  </span><span class="cm">/T An SI Dimension. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dimension</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://mathhub.info/MitM/Foundation?IntLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T A normalized representation used for equality reasoning etc. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">NormedDimension</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ ⟶ ℤ ⟶ ℤ ⟶ ℤ ⟶ ℤ ⟶ ℤ ⟶ dimension </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T We want the actual dimensions as a dimension. ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T We use the SI base dimensions for this. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Length</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedDimension 1 0 0 0 0 0 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Time</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedDimension 0 1 0 0 0 0 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Mass</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedDimension 0 0 1 0 0 0 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Amount</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedDimension 0 0 0 1 0 0 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Temperature</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedDimension 0 0 0 0 1 0 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Current</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedDimension 0 0 0 0 0 1 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">LuminousIntensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedDimension 0 0 0 0 0 0 1 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">DimNone</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedDimension 0 0 0 0 0 0 0 </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Now we want to make even more dimensions. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">DimTimes</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension ⟶ dimension ⟶ dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">*&#39;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">DimDiv</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension ⟶ dimension ⟶ dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/&#39;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?DimEq </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DimensionsExtended</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">ur:?LF</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Dimensions</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Dimensionless stuff❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Information</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DimNone</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Velocity, Accelleration ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Velocity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Length /&#39; Time</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Acceleration</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Velocity /&#39; Time</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Area and Volume❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Area</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Length *&#39; Length</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Volume</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Area *&#39; Length</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Densities ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">VolumeDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DimNone /&#39; Volume </span><span class=" -MMT_OD">❘</span><span class="w">  </span><span class="cm">// # Density //?? </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">AreaDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DimNone /&#39; Area</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">LineDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DimNone /&#39; Length</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Force and Pressure❙</span><span class="w">                   </span>
<span class="w">  </span><span class="vc">Force</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mass *&#39; Acceleration</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Pressure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Force /&#39; Area</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Electric Charge and Charge Densities❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricCharge</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Current *&#39; Time </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricChargeVolumeDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricCharge *&#39; VolumeDensity </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ElectricChargeDensity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricChargeAreaDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricCharge *&#39; AreaDensity </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ElectricChargeSurfaceDensity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricChargeLineDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricCharge *&#39; LineDensity</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Energy and Power❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Energy</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Force *&#39; Length </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Power</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Energy /&#39; Time</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Basic Electrostatic Units❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricPotential</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Energy /&#39; ElectricCharge </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Voltage</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricDisplacement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricCharge /&#39; Area </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">ElectricCurrentDensity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Current *&#39; AreaDensity </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Polarization</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// # CurrentDensity </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricField</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Voltage /&#39; Length </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ElectricFieldIntensity</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// Other Electrical Units❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricalResistance</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Voltage /&#39; Current </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricalResistivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricalResistance *&#39; Area /&#39; Length </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricalConductivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">DimNone /&#39; ElectricalResistivity </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">ElectricFlux</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Voltage *&#39; Length </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span><span class="vc">ElectricalCapacitance</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricCharge /&#39; Voltage </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricalPermittivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ElectricalCapacitance /&#39; Length </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ElectricalMobility</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Velocity /&#39; ElectricField </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">IonRecombination</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Volume /&#39; Time </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// Magnetism // Hoping we don&#39;t need that for now</span>
<span class="cm">  </span>
<span class="cm">  // Heat-related , cf. Thermistor example❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Heat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Energy </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// ThermalConductivity : dimension ❘ = Energy /&#39; Length /&#39; Temperature ❙</span><span class="w"> </span><span class="cm">// TODO Name clash with quantities.mmt ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">ThermalHeatFlux</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Energy /&#39; Area </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">  </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/Units</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.mitm.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   http://mathhub.info/MMT/physics-units?QEBase ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Units</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://mathhub.info/MitM/Foundation?RealLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Dimensions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension ⟶ type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">QE</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension ⟶ type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  	</span><span class="cm">/T Dimensionless Quantity Expressions are real numbers ❙</span><span class="w"></span>
<span class="w">  	</span><span class="vc">NoneIsReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ QE DimNone ≐≐ real_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?NoneIsReal </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	</span>
<span class="w">	</span><span class="vc">unitappl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d : dimension} real_lit ⟶ unit d ⟶ QE d </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">of</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">##</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// test... ❙</span><span class="w"></span>
<span class="w">  	  </span>
<span class="w">  	</span><span class="vc">scalar</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} QE X ⟶ real_lit </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">scalar</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	</span><span class="vc">scalar_commutes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : dimension,r, u : unit X} ⊦ scalar (r of u) ≐ r </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	</span><span class="vc">unitof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X} QE X ⟶ unit X </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">unitof</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	</span><span class="vc">unitof_commutes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : dimension,r, u : unit X} ⊦ unitof (r of u) ≐ u </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">lift</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{din : dimension, dout : dimension, f : ℝ ⟶ ℝ, u : unit din ⟶ unit dout}QE din ⟶ QE dout </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">unit_lift</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[din,dout,f,u] [x] (f (scalar x)) of (u (unitof x)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">UnitTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d1, d2} unit d1 ⟶ unit d2 ⟶ unit (d1 *&#39; d2) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">*&#39;&#39;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">UnitDiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d1, d2} unit d1 ⟶ unit d2 ⟶ unit (d1 /&#39; d2) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">/&#39;&#39;</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?UnitEq </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">QEBase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T A base Theory for dimensions ❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Units </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DimensionsExtended</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Multiplying with numbers ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// QENMul : {x : dimension} real_lit ⟶ QE x ⟶ QE x ❘ # 2 . 3 ❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Dividing by numbers ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// QENDiv : {x : dimension} QE x ⟶ real_lit ⟶ QE x ❘ # 2 /. 3 ❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Multiplying quantity expressions with each other. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">QEMul</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : dimension} {y: dimension} QE x ⟶ QE y ⟶ QE (x *&#39; y) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">⋅</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T Dividing quantity expressions with each other. ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">QEDiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : dimension} {y: dimension} QE x ⟶ QE y ⟶ QE (x /&#39; y) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">/T Adding quantity expressions (maintains dimension). ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">QEAdd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : dimension} QE x ⟶ QE x ⟶ QE x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">++</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">QESubtract</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: dimension} QE x ⟶ QE x ⟶ QE x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">QEMinus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: dimension} QE x ⟶ QE x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">~</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">QEEExp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">QE DimNone ⟶ QE DimNone </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">exp</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">QEExp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">QE DimNone ⟶ QE DimNone ⟶ QE DimNone </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">↑</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">QEELog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">QE DimNone ⟶ QE DimNone </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ln</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">QELog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">QE DimNone ⟶ QE DimNone ⟶ QE DimNone </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">log</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?QEBase</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">// For now, it&#39;ll be assumed space is of Length dimension by default, </span>
<span class="cm">  but that will have to be specified later for differntiating and integrating</span>
<span class="cm">  over fields defined on space of an arbitrary variable dimension❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">space</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">spaceDim</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Length </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dimension ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d]	space ⟶ QE d </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">FieldAdd</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d: dimension} field d  ⟶ field d  ⟶ field d </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.+</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,f1,f2] [s] (f1 s) ++ (f2 s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">FieldSubtract</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d: dimension} field d ⟶ field d  ⟶ field d </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.-</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,f1,f2] [s] (f1 s) - (f2 s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">FieldMul</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d1: dimension, d2: dimension} field d1 ⟶ field d2  ⟶ field (d1 *&#39; d2) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">.*</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d1,d2,f1,f2] [s] (f1 s) ⋅ (f2 s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">FieldDiv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d1: dimension, d2: dimension} field d1 ⟶ field d2  ⟶ field (d1 /&#39; d2) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">./</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d1,d2,f1,f2] [s] (f1 s) / (f2 s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">FieldMinus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d: dimension} field d  ⟶ field d </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">.~</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,f] [s] ~ (f s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	         </span>
<span class="w">	</span><span class="vc">FieldEExp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field DimNone ⟶ field DimNone </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">exp.</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">					 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] [s] exp (f s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">					 </span>
<span class="w">	</span><span class="vc">FieldExp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field DimNone ⟶ field DimNone ⟶ field DimNone </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">.↑</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">					 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f1,f2] [s] (f1 s) ↑ (f2 s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">					 </span>
<span class="w">	</span><span class="vc">FieldLog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field DimNone ⟶ field DimNone ⟶ field DimNone </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">log.</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">					 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f1,f2] [s] log (f1 s) (f2 s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">					 </span>
<span class="w">	</span><span class="vc">FieldELog</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field DimNone ⟶ field DimNone </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ln.</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">					 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] [s] ln (f s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">FieldEq</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d: dimension} field d ⟶ field d  ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.≐</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-5</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d,f1,f2] ∀ [s] (f1 s) ≐ (f2 s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	         </span>
<span class="w">	</span><span class="vc">FieldInteg</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} field d ⟶ field (d *&#39; spaceDim) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∑.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">FieldDeriv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{d} field d ⟶ field (d /&#39; spaceDim) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Δ.</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/Units</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SIUnits</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?QEBase</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">// include ?InformationBase❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">NormedUnit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,d,e,f,g}unit (NormedDimension a b c d e f g) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">NormedUnit</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="si">7</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">Meter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Length </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedUnit 1 0 0 0 0 0 0 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Second</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Time</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedUnit 0 1 0 0 0 0 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Kilogram</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Mass</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">kg</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedUnit 0 0 1 0 0 0 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Mole</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Amount </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedUnit 0 0 0 1 0 0 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Kelvin</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Temperature</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedUnit 0 0 0 0 1 0 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Ampere</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Current</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedUnit 0 0 0 0 0 1 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Candela</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit LuminousIntensity </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedUnit 0 0 0 0 0 0 1 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Scalar</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit DimNone </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = NormedUnit 0 0 0 0 0 0 0 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UnitsExtended</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?DimensionsExtended</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SIUnits </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">bit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Information </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Scalar </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">m2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Area </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Meter *&#39;&#39; Meter </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">m²</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">m3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Volume </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">m² *&#39;&#39; Meter </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">m³</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">mps</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Velocity </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Meter /&#39;&#39; Second </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">mpss</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Acceleration </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Meter /&#39;&#39; (Second *&#39;&#39; Second) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">newton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Force </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kg *&#39;&#39; mpss </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">N</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">pascal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Pressure </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">N /&#39;&#39; m² </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Pa</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">joule</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unit Energy </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">N *&#39;&#39; Meter </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IdempotentMagma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OperationProps </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">idempotent_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma/magma_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_idempotent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_idempotent op </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">idempotentMagma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?IdempotentMagma/idempotent_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/bands</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Band</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞../algebra?IdempotentMagma</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞../algebra?SemiGroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">band_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞../algebra?IdempotentMagma/idempotent_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞../algebra?SemiGroup/semigroup_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">band</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Band/band_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Regular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">regular_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_regular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∀[y]∀[z] </span>
<span class=" -MMT_ObjectExpression">			z ∘ x ∘ z ∘ y ∘ z ≐ z ∘ x ∘ y ∘ z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeftNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Regular </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">leftnormal_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_leftnormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∀[y]∀[z] </span>
<span class=" -MMT_ObjectExpression">			z ∘ x ∘ z ∘ y ≐ z ∘ x ∘ y </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Reg2LeftNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular/regular_theory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?LeftNormal/leftnormal_theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;trivial&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RightNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Regular </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">rightnormal_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_rightnormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∀[y]∀[z] </span>
<span class=" -MMT_ObjectExpression">			y ∘ z ∘ x ∘ z ≐ y ∘ x ∘ z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">Reg2RightNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Regular/regular_theory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?RightNormal/rightnormal_theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	    </span><span class="vc">axiom_regular</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;trivial&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeftNormal </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RightNormal </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">normal_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_normal</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">⊦ ∀[x]∀[y]∀[z] </span>
<span class=" -MMT_ObjectExpression">			z ∘ x ∘ y ∘ z ≐ z ∘ y ∘ x ∘ z </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">LeftNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?LeftNormal/leftnormal_theory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal/normal_theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_leftnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;trivial&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	 </span><span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">RightNormal2Normal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?RightNormal/rightnormal_theory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Normal/normal_theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Band/band_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 	</span><span class="vc">axiom_rightnormal</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;trivial&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">top</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/interfaces</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">num</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OperationProps</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="vc">prop_idempotent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U ⟶ U ⟶ U) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op] ∀[a] op a a ≐ a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_idempotent</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_associative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U ⟶ U ⟶ U) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op] ∀[x : U]∀[y : U]∀[z : U] op x (op y z) ≐ op (op x y) z </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_associative</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U ⟶ U ⟶ U) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op] ∀[x : U]∀[y] op x y ≐ op y x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_commutative</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_leftUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U ⟶ U ⟶ U) ⟶ U ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op,e] ∀[x] op e x ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_leftUnital</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_rightUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U ⟶ U ⟶ U) ⟶ U ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op,e] ∀[x] op x e ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_rightUnital</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_leftCancellative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U ⟶ U ⟶ U) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op] ∀[a] ∀[b] ∀[c] op a c ≐ op b c ⇒ a ≐ b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_leftCancellative</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_rightCancellative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U ⟶ U ⟶ U) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op] ∀[a] ∀[b] ∀[c] op c a ≐ op c b ⇒ a ≐ b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_rightCancellative</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U ⟶ U ⟶ U) ⟶ (U ⟶ U) ⟶ U ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U,op,inv,e] ∀[x] op x (inv x) ≐ e </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_inverse</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_absorption</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U ⟶ U ⟶ U) ⟶ (U ⟶ U ⟶ U) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U][m,j] ∀[a] ∀[b] m a (j a b) ≐ a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_absorption</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type} (U ⟶ U ⟶ U) ⟶ (U ⟶ U ⟶ U) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U][plus,times] ∀ [x] ∀ [y] ∀ [z] (times x (plus y z)) ≐ (plus (times x y) (times x z)) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_distributive</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Magma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OperationProps </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?SetStructures </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">magma_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?SetStructures/setstruct_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∘</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">19</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w">     </span>
<span class="w">	</span><span class="vc">magma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Magma/magma_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">baseset</span><span class="w"> 	</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">magma ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m] (m.universe) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">dom</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">operation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: magma} (G.universe ⟶ G.universe ⟶ G.universe) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">∘</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] [a,b] (G.op) a b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">finite</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">magma ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SemiGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">semigroup_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma/magma_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_associative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_associative op </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">semigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?SemiGroup/semigroup_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Unital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">unital_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma/magma_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">e</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w">	</span>
<span class="w">		</span><span class="vc">axiom_leftUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_leftUnital op e </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_rightUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_rightUnital op e </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">unital</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Unital/unital_theory  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">unitOf</span><span class="w"> 	</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: unital} dom G </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="ss">e</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] (G.unit) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">QuasiGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?NaturalDeduction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">quasigroup_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma/magma_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">qg1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[a]∀[b]∃![x] a ∘ x ≐ b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">qg2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[a]∀[b]∃![y] y ∘ a ≐ b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	  </span><span class="vc">leftDivision</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] that U ([x] a ∘ x ≐ b) (forallE (forallE qg1 a) b) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	  </span><span class="vc">rightDivision</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] that U ([x] x ∘ a ≐ b) (forallE (forallE qg2 a) b) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">quasigroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?QuasiGroup/quasigroup_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CancellativeMagma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="cm">/T MiKo: use this to make a view into quasisgroup Theory: they are cancellative ❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">cancellativemagma_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma/magma_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_leftCancellative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_leftCancellative op  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_rightCancellative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_rightCancellative op </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span><span class="vc">cancellativemagma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?CancellativeMagma/cancellativemagma_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T MiKo: how to express the definitions? ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">leftCancellative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">magma ⟶ bool </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightCancellative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">magma ⟶ bool </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T Refactor: a Loop is just a unital Quasigroup ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Loop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?NaturalDeduction </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">loop_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital/unital_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⁻¹</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_inverse op (inverse) e </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">loop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Loop/loop_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">inverseElement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : unital} dom U ⟶ dom U ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U][n,m] n ∘ m ≐ unitOf U </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">inverseExists</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">loop ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] ∀ [x : dom G] ∃ [y : dom G] inverseElement G x y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">inverseOf</span><span class="w">	</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: loop} dom G ⟶ dom G </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⁻¹</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] [a] (G.inverse) a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Monoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SemiGroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">monoid_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SemiGroup/semigroup_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Unital/unital_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">monoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Monoid/monoid_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Group</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Loop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">group_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid/monoid_theory </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Loop/loop_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">group</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Group/group_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	                                                                           </span>
<span class="w">	</span><span class="vc">inverseOf</span><span class="w">	</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: group} dom G ⟶ dom G </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⁻¹</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] [a] (G.inverse) a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?NatLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?IntLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?FiniteCardinality </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">automorphisms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group ⟶ ℕ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">cyclic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] | fullset (baseset g) |</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">parity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group ⟶ ℤ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">solvable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">degree</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group ⟶ ℤ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">psolvable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group ⟶ ℕ+ ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">sylow</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group ⟶ ℕ+ ⟶ group </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AbelianGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Group </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">abeliangroup_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Group/group_theory </span><span class=" -MMT_DD">❙</span><span class="w">		</span>
<span class="w">		</span><span class="vc">axiom_commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_commutative op </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">abeliangroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?AbelianGroup/abeliangroup_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">GroupHomomorphism</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Group</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">groupHomomorphism_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">from</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">to</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">morph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dom A ⟶ dom B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_morphism</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x: dom A] ∀[y: dom A] (B.op) (morph x) (morph y) ≐ morph (x ∘ y)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">groupHomomorphism</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?GroupHomomorphism/groupHomomorphism_theory</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/groups</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">core</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="cm">/T This obviously doesn&#39;t type check yet ❙</span>
<span class="cm">theory ActionOnPolynomials : fnd:?Logic = </span>
<span class="cm">	include ?SymmetricGroup</span>
<span class="cm">	include ?GroupAction</span>
<span class="cm">	</span>
<span class="cm">	/T I think this is what I would want</span>
<span class="cm">	   though it is entirely unclear to me right now</span>
<span class="cm">	   how one would encode an induced action (if at all)❙	</span>
<span class="cm">  symmetricGroupActionOnPolynomials : type = {vars : type} rightGroupActions (SymmetricGroup vars) (Polynomials vars) ❙</span>
<span class="cm">  groupActionOnPolynomials : type = {vars : type} {act : rightGroupActions G vars} rightGroupActions G (Polynomials vars) ❙</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/groups</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">core</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">hhttp://mathhub.info/MitM/core/sets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GroupActions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">../algebra?Group </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subgroups </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="cm">//  include ?SymmetricGroup ❙</span><span class="w"></span>
<span class="w">    </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">RightGroupActionsTheory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> G : group, Ω : type ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">act</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Ω ⟶ G.universe ⟶ Ω </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">act_property_id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[ω : Ω] (ω ^ (G.unit)) ≐ ω </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">act_property_compose</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[ω : Ω] ∀[g : G.universe] ∀[h : G.universe] ((ω ^ g) ^ h) ≐ (ω ^ ((G.op) g h)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightGroupActions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group ⟶ type ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,Ω] Mod `?GroupActions/RightGroupActionsTheory , G , Ω </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">asAction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : group, Ω : type, act : Ω ⟶ G.universe ⟶ Ω}{p1 :  ⊦ ∀[ω : Ω] (act ω (G.unit)) ≐ ω}</span>
<span class=" -MMT_ObjectExpression">  		{p2 : ⊦ ∀[ω : Ω] ∀[g : G.universe] ∀[h : G.universe] (act (act ω g) h) ≐ (act ω ((G.op) g h))} rightGroupActions G Ω </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G, Ω, act, p1, p2] [&#39; act := act, act_property_id := p1, act_property_compose := p2 &#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">rightOrbit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : group, Ω : type} (rightGroupActions G Ω) ⟶ Ω ⟶ subtypeOf Ω </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rorbit</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">rightStabiliser</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : group, Ω : type} (rightGroupActions G Ω) ⟶ Ω ⟶ subgroupOf G </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rstab</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">LeftGroupActionsTheory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> G : group, Ω : type ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">act</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G.universe ⟶ Ω ⟶ Ω </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">act_property_id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[ω : Ω] ((G.unit) ^ ω) ≐ ω </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">act_property_compose</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[ω : Ω] ∀[g : G.universe] ∀[h : G.universe] (h ^ (g ^ ω)) ≐ (((G.op) h g) ^ ω) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">//  ❙</span><span class="w"></span>
<span class="cm">//  theory GroupActionsByHomomorphismTheory : fnd:?Logic &gt; G : group, Ω : type ❘=</span>
<span class="cm">//    acthom : hom G (SymmetricGroup Ω) ❙</span><span class="w"></span>
<span class="cm">//  ❚</span><span class="w"></span>
<span class="cm">//  theory GroupActionsByHomomorphismTheory : fnd?Logic &gt; G : group, X : ??? ❘=</span>
<span class="cm">//  ❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/groups</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">core</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">hhttp://mathhub.info/MitM/core/sets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Subgroups</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">../algebra?Group </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">subgroups_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic?</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> G : group ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">subtypeOf (G.universe) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	 </span>
<span class="w">  	 </span><span class="vc">op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∘</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">op_closure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀ [x : U] ∀ [y : U] (G.op) x y ≐ op x y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	 </span>
<span class="w">	 </span><span class="vc">unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">e</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">unit_closure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ (G.unit) ≐ e </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⁻¹</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">inverse_property</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀ [x] x ∘ x ⁻¹ ≐ e </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">inverse_closure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀ [x : U] (G.inverse) x ≐ x ⁻¹ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	 </span><span class="vc">associative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x : U]∀[y : U]∀[z : U] (x ∘ (y ∘ z)) ≐ ((x ∘ y) ∘ z) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">leftunital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x : U] e ∘ x ≐ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">rightunital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x : U] x ∘ e ≐ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span><span class="vc">elementsOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] G.universe </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">subsetsOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] subtypeOf (elementsOf G) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">subgroupOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [G:group] Mod `?Subgroups?subgroups_theory , G </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">index</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : group} subgroupOf G ⟶ ℕ+ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> 	 </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// theory ActionsOnSubgroups : fnd:?Logic =</span>
<span class="cm">	include ?Group ❙</span>
<span class="cm">	include ?Subgroups ❙</span>
<span class="cm">	include ?GroupActions ❙</span>
<span class="cm">	</span>
<span class="cm">	subgroupConjugation : {G : group} rightGroupActions G (subgroupOf G) ❙</span>
<span class="cm">	elementConjugation : {G : group} rightGroupActions G (elementsOf G) ❙</span>
<span class="cm">	</span>
<span class="cm">	normaliser : {G : group} (subgroupOf G) → (subgroupOf G) ❘ </span>
<span class="cm">						 = [G] [U : subgroupOf G] rstab (subgroupConjugation G) U ❙   </span>
<span class="cm">	</span>
<span class="cm">	conjugacyClass : {G : group} (subgroupOf G) → subtypeOf (subgroupOf G) ❘</span>
<span class="cm">	           = [G] [U : subgroupOf G] rorbit (subgroupConjugation G) U ❙</span>
<span class="cm">						 </span>
<span class="cm">  centraliser : {G : group} G.domain → (subgroupOf G) ❘</span>
<span class="cm">	           = [G] [x : G.domain] rstab (elementConjugation G) x ❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">// theory NormalSubgroups : fnd:?Logic =</span>
<span class="cm">	include ?Subgroups ❙</span>
<span class="cm">	</span>
<span class="cm">	theory NormalSubgroupsTheory : fnd:?Logic &gt; G : group ❘=</span>
<span class="cm">		include ?Subgroups/SubgroupsTheory ❙</span>
<span class="cm">		</span>
<span class="cm">		normal_prop : ⊦ ∀[g : G.domain] ∀[n : domain] ∃[n2 : domain] ((G.op) ((G.op) ((G.inverse) g) n) g) ≐ n2 ❙ </span>
<span class="cm">	❚</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// This is a HACK ❙</span>
<span class="cm">	normalSubgroupOf : group → type ❘ = [g] (ModelsOf `?NormalSubgroups/NormalSubgroupsTheory ) g g ❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">// theory SylowSubgroups : fnd:?Logic = </span>
<span class="cm">	include ?Subgroups ❙</span>
<span class="cm">	include core:/arithmetics?intarith ❙</span>
<span class="cm">	SylowSubgroups : {G : group} {p : Primes} subtypeOf (subgroupOf G) ❙ </span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">// theory GroupHomomorphisms : fnd:?Logic = </span>
<span class="cm">	include ?Group ❙</span>
<span class="cm">	include ?Subgroups ❙</span>
<span class="cm">	include ?NormalSubgroups ❙</span>

<span class="cm">	theory GroupHomomorphismsTheory : fnd:?Logic &gt; G : group, H : group ❘ = </span>
<span class="cm">		map : G.domain → H.domain ❙</span>
<span class="cm">    morphism_property : ⊦ ∀[x : G.domain] ∀[y : G.domain] (H.op) (map x) (map y) ≐ map ((G.op) x y)❙</span>
<span class="cm">  ❚</span><span class="w"> </span><span class="cm">// </span>
<span class="cm">  hom : group → group → type ❘ = ModelsOf `?GroupHomomorphisms/GroupHomomorphismsTheory ❘ # 1 --&gt; 2 ❙</span>

<span class="cm">  // Of course the type of kernel should be more precise! ❙</span>
<span class="cm">  // kernel : {G : group} {H : group} hom G H → (subgroupOf G) ❙</span>
<span class="cm">	kernel : {G : group} {H : group} (hom G H) → (normalSubgroupOf G) ❙</span>
<span class="cm">  image : {G : group} {H : group} (hom G H) → (subgroupOf H) ❙	</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/groups</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/sets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="cm">/T Permutation groups are subgroups of SymmetricGroup(Ω) ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">PermutationGroups</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subgroups </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SymmetricGroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>

<span class="w">	</span><span class="vc">permutationGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Ω : type} subgroupOf (symmetricGroup Ω) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">permutationGroup</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// permutationGroupByGenerators : {Ω : type} subtypeOf (symmetricGroup Ω) ⟶ permutationGroup Ω ❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">degree</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">permutationGroup ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] cardinality g</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PermutationGroupsN</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Subgroups </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SymmetricGroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SymmetricGroupOfN </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">permutationGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Ω : type} subgroupOf (symmetricGroup Ω) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// permutationGroupByGenerators : {Ω : type} subtypeOf (symmetricGroup Ω) ⟶ permutationGroup Ω ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/groups</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/sets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">StabilizerChain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PermutationGroups </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GroupActions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T A step in a Schreier-Sims Stabiliser Chain ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// step : {Ω : type} {G : group} {act : rightGroupActions G Ω} ⟶ </span>
<span class="cm">		{&#39; basept : Ω, orbit : rorbit act basept, stabiliser : rstab act β &#39;} ❙</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/groups</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/sets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SymmetricGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">../algebra?Group </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">../typedsets?Functions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">../typedsets?Bijective </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">    </span><span class="vc">has_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Ω : type} ⊦ ∀ [x : bijections Ω Ω] (x ° (bijinv x)) ≐ ([y : Ω] y) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">has_inv</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_leftunital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Ω : type} ⊦ ∀ [x : bijections Ω Ω] ([y] y) ° x ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">is_lu</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">is_rightunital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{Ω : type} ⊦ ∀ [x : bijections Ω Ω] x ° ([y] y) ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">is_ru</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">symmetricGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ group </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [Ω] [&#39;</span>
<span class="cm">    domain := bijections Ω Ω,</span>
<span class="cm">    op := function_composition Ω Ω Ω,</span>

<span class="cm">    associative := isassoc Ω Ω Ω Ω,</span>
<span class="cm">    </span>
<span class="cm">    unit := ([ω : Ω] ω),</span>
<span class="cm">    leftunital := is_lu Ω, </span>
<span class="cm">    rightunital := is_ru Ω, </span>
<span class="cm">    </span>
<span class="cm">    inverse := ([x : domain] inverse_bijections Ω Ω x),</span>
<span class="cm">    inverse_property := has_inv Ω</span>
<span class="cm">    &#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SymmetricGroupOfN</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SymmetricGroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arith:?NaturalArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">symmetricGroupOfN</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ+ ⟶ group </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[N] symmetricGroup (fromOneTo N) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/groups</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SylowSubgroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="cm">// theory SylowSubgroupTheory : </span>
<span class="cm">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">right_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?subgroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">right_coset_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> g:G </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">element</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">g</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">type_of_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">right_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">right_coset_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">is_right_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀ [el:right_coset.type_of_coset] ∃[h:H] el ≐ h ∘ g </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">left_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?subgroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">left_coset_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> g:G </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">element</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">g</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">left_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">left_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">left_coset_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">is_left_coset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀ [el:left_coset.type_of_coset] ∃[h:H] el ≐ g ∘ h </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">normal_subgroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?subgroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?left_coset </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?right_coset </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?set_equality </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">is_normal_subgroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[g:G] left_coset g = right_coset g </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="cm">//T how to handle properties of groups? Being abelian is a property</span>
<span class="cm">❙</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">abeliangroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">abelian_property</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{U : type}{op : U → U → U}prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[U][op]∀[x]∀[y] op x y ≐ op y x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">abeliangroup_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group/group_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">abelianax</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ abelian_property U op </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">abeliangroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">abeliangroup_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">is_abelian</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : abeliangroup} ⊦ commutative G </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] (G.abelianax) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">group_homomorphism</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">group_homomorphism_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="vc">from</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">A</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">to</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">map</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dom A → dom B</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">morphism_property</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x: dom A] ∀[y: dom A] (map x) ∘ (map y) ≐ map (x ∘ y)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">grouphomomorphism</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">group_homomorphism_theory</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">group_action</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">right_group_action_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> G : group , Ω : type </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">acting</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">G</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">actee</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Ω </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Ω</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">map</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">actee → dom acting → actee </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">right_group_action_property_id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[ω : actee] (ω ^ (unit acting) ≐ ω ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">right_group_action_property_prod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[ω : actee] ∀[g : dom acting] ∀[h : dom acting] (ω^g)^h ≐ ω^(g∘h) </span><span class=" -MMT_DD">❙</span><span class="w">      </span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">rightgroupaction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">right_group_action_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">left_group_action_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> G : group, Ω : type </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">acting</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">G</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">actee</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Ω </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Ω</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">map</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dom acting → actee → actee </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">left_group_action_property_id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[ω : actee] map (unit acting) ω ≐ ω </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">leftgroupaction</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class="nv">left_group_action_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?permutation_representation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">action_from_representation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">permutation_representation → rightgroupaction </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[pa] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">permutation_representation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_homomorphism </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SymmetricGroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">permutation_representation_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> G : group, Ω : type </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">acting_group</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">actee_set</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Ω </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">hom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">acting_group → SymmetricGroup actee_set </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">permutation_representation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">permutation_representation_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">/T   all other fields of both action and representation are deduced from the group and the set, so i guess this is enough? ❚</span><span class="w"></span>
<span class="kd">view</span><span class="w"> </span><span class="nc">group_action_is_permutation_representation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?group_action/rightgroupaction</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?permutation_representation/permutation_representation</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">acting_group</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">acting </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">actee_set</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">actee </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">view</span><span class="w"> </span><span class="nc">permutation_representation_is_group_action</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?permutation_representation/permutation_representation</span><span class="w"> </span><span class="p">→</span><span class="w"> </span><span class="l l-URI">?group_action/rightgroupaction</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="vc">acting</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">acting_group </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">actee</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">actee_set </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">group_action_orbit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">orbit_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> action : rightgroupaction, α : action.actee </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">ga</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rightgroupaction </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">action </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">element</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ga.actee </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">α </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">set</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{type : ga.actee} </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">orbit_set_binding</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{orb : orbit} ⊦ ∀[x:orb] ∃[g:ga.acting] ga.map α g ≐ x </span><span class=" -MMT_DD">❙</span><span class="w">  </span>
<span class="w">    </span><span class="vc">order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="kd">FromTheory</span><span class="w"> </span><span class="nc">orbit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">orbit_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">group_action_stabilizer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">stabilizer_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> action : rightgroupaction, α : action.actee </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="vc">ga</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rightgroupaction </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">action </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">element</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ga.actee </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">α </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">stabilizer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{type : ga.acting} </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">stabilizer_set_binding</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[g:stabilizer] ga.map α g ≐ α </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">orbit_stabilizer_theorem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action_orbit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action_stabilizer </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Omega</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">G</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">action</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rightgroupaction G Omega </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">theorem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[α:Omega] ((orbit action α).order) × ((stabilizer action α).order) ≐ (G.order) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">conjugation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">G</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">group </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">Ω</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">G.dom </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">la</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">leftgroupaction G Ω </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">ra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rightgroupaction G Ω </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">conjugation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Ω → G.dom → Ω </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[α, g] ra (la (inverseOf g) α) g </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">// view conjugation : rightgroupaction =</span>
<span class="cm">  acting = G ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">actee</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Ω </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">conjugation_centralizer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">fnd:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?conjugation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?group_action_stabilizer </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">centralizer</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : group, α : G.dom} type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">stabilizer (conjugation G) α </span><span class=" -MMT_DD">❙</span><span class="w">    </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HeckeFields</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Field </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">degree_over_Q</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field ⟶ ℕ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HilbertNewforms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?HeckeFields </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">hilbertNewform</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">base_field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">hilbertNewform ⟶ field </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">base_field_degree</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">hilbertNewform ⟶ ℕ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="cm">// level_ideal TODO ❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">level_norm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">hilbertNewform ⟶ ℤ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">dimension</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">hilbertNewform ⟶ ℕ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">HeckeEigenvalues</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">elliptic_curves?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?HilbertNewforms </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">heckePolynomial</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">hilbertNewform ⟶ (polynomial rationalField) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">heckeEigenvalues</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">hilbertNewform ⟶ List (polynomial rationalField) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SemiLattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?Relations </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra/bands?Band</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">semilattice_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra/bands?Band/band_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span>
<span class="w">     </span><span class="vc">axiom_commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_commutative op </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="cm">// order : U ⟶ U ⟶ bool ❘ = [a,b] a ≐ a ∘ b ❘ # 1 &lt; 2 ❙</span><span class="w"></span>
<span class="w">     </span><span class="cm">// axiom_reflexive : ⊦ reflexive (order) ❘ = sketch &quot;trivial&quot; ❙</span><span class="w"></span>
<span class="w">     </span><span class="cm">// axiom_transitive : ⊦ transitive (order)❘ = sketch &quot;trivial&quot;  ❙</span><span class="w"></span>
<span class="w">     </span><span class="cm">// axiom_antisymmetric : ⊦ antisymmetric (order) ❘ = sketch &quot;trivial&quot; ❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">semilattice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?SemiLattice/semilattice_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="cm">// view POSetIsMeetSemiLattice : ?SemiLattice/semilattice_theory -&gt; ts:?POSetBounds/posetBounds_theory =</span>
<span class="cm">  universe = universe ❙</span>
<span class="cm">  op = meet ❙                               </span>
<span class="cm">  axiom_idempotent = meetIdempotent ❙</span>
<span class="cm">  axiom_associative = meetAssociative ❙</span>
<span class="cm">  axiom_commutative = meetCommutative ❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">// view POSetIsJoinSemiLattice : ?SemiLattice/semilattice_theory -&gt; ts:?POSetBounds/posetBounds_theory =</span>
<span class="cm">  universe = universe ❙</span>
<span class="cm">  op = join ❙                               </span>
<span class="cm">  axiom_idempotent = joinIdempotent ❙</span>
<span class="cm">  axiom_associative = joinAssociative ❙</span>
<span class="cm">  axiom_commutative = joinCommutative ❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">/T MiKo: probably need to say that the meet order is the same as the join-order, i.e. </span>
<span class="cm">in theory SemiLattice/semilattice_theory</span>
<span class="cm">  biviewMeet : ⊢ SemilatticeIsPOSet (POSetIsMeetSemiLattice op ) ≐ op </span>
<span class="cm">  biviewJoin : ⊢ SemilatticeIsPOSet (POSetIsJoinSemiLattice op ) ≐ op </span>

<span class="cm">  and in </span>

<span class="cm">theory ts:?POSet/poset_theory</span>
<span class="cm">  biviewMeet : ⊢ POSetIsMeetSemiLattice (SemilatticeIsPOSet ord ) ≐ ord </span>
<span class="cm">  biviewMeet : ⊢ POSetIsMeetSemiLattice (SemilatticeIsPOSet ord ) ≐ ord </span>
<span class="cm">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Lattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OperationProps </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SemiLattice </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?POSet </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// implicit view SemilatticeIsPOSet : ts:?POSet/poset_theory -&gt; ?SemiLattice/semilattice_theory =</span>
<span class="cm">    include ☞ts:?SetStructures ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// ord = [a,b] a ≐ a ∘ b ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// axiom_reflexive = sketch &quot;trivial&quot; ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// axiom_transitive = sketch &quot;trivial&quot; ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// axiom_antisymmetric = sketch &quot;trivial&quot; ❙</span><span class="w"></span>


<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?SetStructures </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="kd">theory</span><span class="w"> </span><span class="nc">lattice_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?SetStructures/setstruct_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="k">implicit</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">meetstruct</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SemiLattice/semilattice_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">☞ts:?SetStructures/setstruct_theory?universe </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">op</span><span class="w"> </span><span class="p">@</span><span class="no"> meet </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⊓</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">    </span><span class="kd">structure</span><span class="w"> </span><span class="nc">joinstruct</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SemiLattice/semilattice_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">☞ts:?SetStructures/setstruct_theory?universe </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">op</span><span class="w"> </span><span class="p">@</span><span class="no"> join </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⊔</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="cm">// order = ☞http://mathhub.info/MitM/core/typedsets?PrOSet/proset_theory?order ❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_absorption1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop_absorption meet join </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_absorption2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop_absorption join meet </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_absorption</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_absorption1 ∧ prop_absorption2 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span><span class="vc">lattice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Lattice/lattice_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DistributiveLattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ringoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">distributiveLattice_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice/lattice_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="kd">structure</span><span class="w"> </span><span class="nc">ringoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Ringoid/ringoid_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">     	</span><span class="vc">R</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">☞ts:?SetStructures/setstruct_theory?universe </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="cm">// plus = join ❙</span><span class="w"></span>
<span class="w">        </span><span class="cm">// times = meet ❙</span><span class="w"></span>
<span class="w">     </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">distributiveLattice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?DistributiveLattice/distributiveLattice_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BoundedLattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kd">theory</span><span class="w"> </span><span class="nc">boundedLattice_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">      </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Lattice/lattice_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">top</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⊤</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">bot</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⊥</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="cm">// axiom_top : ⊦ ∀[a] a ≼ ⊤ ❙</span><span class="w"> </span><span class="cm">// imported implicitly via SemilatticeIsPOSet ❙</span><span class="w"></span>
<span class="w">      </span><span class="cm">// axiom_bot : ⊦ ∀[a] ⊥ ≼ a ❙</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span><span class="vc">boundedLattice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?BoundedLattice/boundedLattice_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">ComplementedLattice</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BoundedLattice</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kd">theory</span><span class="w"> </span><span class="nc">complementedLattice_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BoundedLattice/boundedLattice_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">complement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,c] a ⊔ c ≐ ⊤ ∧ a ⊓ c ≐ ⊥ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">comp</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">prop_complemented</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">∀[a] ∃[c] comp a c </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">axiom_complemented</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_complemented </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">complementedLattice</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?ComplementedLattice/complementedLattice_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"> </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BooleanAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ComplementedLattice</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DistributiveLattice </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">booleanAlgebra_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ComplementedLattice/complementedLattice_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DistributiveLattice/distributiveLattice_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">booleanalgebra</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?BooleanAlgebra/booleanAlgebra_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">num</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Module</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_dist1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type} (A ⟶ B ⟶ B) ⟶ (B ⟶ B ⟶ B) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,itimes,iplus] ∀[r]∀[x]∀[y] itimes r (iplus x y) ≐ iplus (itimes r x) (itimes r y) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_dist</span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_dist2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type} (A ⟶ B ⟶ B) ⟶ (A ⟶ A ⟶ A) ⟶ (B ⟶ B ⟶ B) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,itimes,plus1,plus2] ∀[r]∀[s]∀[x] itimes (plus1 r s) x ≐ plus2 (itimes r x) (itimes s x) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_dist</span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_associative_scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type} (A ⟶ B ⟶ B) ⟶ (A ⟶ A ⟶ A) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,itimes,stimes] ∀[r]∀[s]∀[x] itimes r (itimes s x) ≐ itimes (stimes r s) x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_associative_scalars</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_unit_scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B : type} (A ⟶ B ⟶ B) ⟶ A ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,itimes,u] ∀[x] itimes u x ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_unit_scalars</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">module_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> scalars : ring ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">scaltp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">scalars.universe </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AbelianGroup/abeliangroup_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">scalarmult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">scaltp ⟶ U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⋅</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_dist1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_dist1 scalarmult op</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_dist2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_dist2 scalarmult (scalars.rplus) op </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_associative_scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_associative_scalars scalarmult (scalars.rtimes) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_unit_scalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_unit_scalars scalarmult (scalars.rone) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">module</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[R : ring] Mod ☞?Module/module_theory R </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">distributive_right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{R : ring} ⊦ prop_dist2 (R.rtimes) (R.rplus) (R.rplus) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">distributive_right</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">asModule</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : ring} module F </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] [&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := f.universe,</span>
<span class=" -MMT_ObjectExpression">		op := f.rplus,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative := f.addition/axiom_associative,</span>
<span class=" -MMT_ObjectExpression">		unit := f.rzero,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := f.addition/axiom_leftUnital,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := f.addition/axiom_rightUnital,</span>
<span class=" -MMT_ObjectExpression">		inverse := f.rminus,</span>
<span class=" -MMT_ObjectExpression">		axiom_inverse := f.addition/axiom_inverse,</span>
<span class=" -MMT_ObjectExpression">		axiom_commutative := f.addition/axiom_commutative,</span>
<span class=" -MMT_ObjectExpression">		scalarmult := f.rtimes,</span>
<span class=" -MMT_ObjectExpression">		axiom_dist1 := f.axiom_distributive,</span>
<span class=" -MMT_ObjectExpression">		axiom_dist2 := distributive_right f,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative_scalars := f.multiplication/axiom_associative,</span>
<span class=" -MMT_ObjectExpression">		axiom_unit_scalars := f.axiom_leftUnital</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asMod</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// include base:?Sequences ❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// theory finGenFree_module_theory : base:?Logic &gt; scalars : ring ❘ =</span>
<span class="cm">		// include ?module/module_theory ❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="cm">// flexary_sum : {n} U^n ⟶ U ❘ = [n,s] foldL op unit n s ❘ # ∑ 2 ❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="cm">// dimension : NAT ❙</span><span class="w"></span>
<span class="w">		</span><span class="cm">// basis : U^dimension ❙</span><span class="w"></span>
<span class="w">		</span><span class="cm">// is_basis : ⊦ ∀ [v : U] ∃ [s : scaltp^dimension] v ≐ (∑ ⟨&#39; s..i ⋅ basis..i | i:dimension &#39;⟩) ❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Vectorspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Field </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Module </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">vectorspace_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> scalars : field ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Module/module_theory (scalars) </span><span class=" -MMT_DD">❙</span><span class="w">       </span>
<span class="w">		</span><span class="vc">bminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] op a (inverse b) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"> </span>
<span class="w">	</span><span class="vc">vectorspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field ⟶ kind </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F : field] Mod ☞?Vectorspace/vectorspace_theory F </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Module </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">asVectorspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field} vectorspace F </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[f] [&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := f.universe,</span>
<span class=" -MMT_ObjectExpression">		op := f.rplus,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative := f.addition/axiom_associative,</span>
<span class=" -MMT_ObjectExpression">		unit := f.rzero,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := f.addition/axiom_leftUnital,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := f.addition/axiom_rightUnital,</span>
<span class=" -MMT_ObjectExpression">		inverse := f.rminus,</span>
<span class=" -MMT_ObjectExpression">		axiom_inverse := f.addition/axiom_inverse,</span>
<span class=" -MMT_ObjectExpression">		axiom_commutative := f.addition/axiom_commutative,</span>
<span class=" -MMT_ObjectExpression">		scalarmult := f.rtimes,</span>
<span class=" -MMT_ObjectExpression">		axiom_dist1 := f.axiom_distributive,</span>
<span class=" -MMT_ObjectExpression">		axiom_dist2 := distributive_right f,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative_scalars := f.multiplication/axiom_associative,</span>
<span class=" -MMT_ObjectExpression">		axiom_unit_scalars := f.axiom_leftUnital</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asVectorspace</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Productspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Vectorspace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?ProductTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">product_universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field} vectorspace F ⟶ vectorspace F ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,v1,v2] v1.universe × v2.universe </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">x_</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_op</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1: vectorspace F, v2: vectorspace F} (v1 x_ F v2) ⟶ (v1 x_ F v2) ⟶ (v1 x_ F v2) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,v1,v2] [a,b] ⟨ ((v1.op) (πl a) (πl b)), ((v2.op) (πr a) (πr b))⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">xop_</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_unit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F} v1 x_ F v2 </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,v1,v2] ⟨ (v1.unit), (v2.unit) ⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_unit</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F}(v1 x_ F v2) ⟶ (v1 x_ F v2) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,v1,v2] [x] ⟨ (v1.inverse) πl x, (v2.inverse) πr x ⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_inverse</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_scalarmult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1: vectorspace F, v2: vectorspace F} F.universe ⟶ (v1 x_ F v2) ⟶ (v1 x_ F v2) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F,v1,v2][α,v] ⟨ ((v1.scalarmult) α (πl v)), ((v2.scalarmult) α (πr v)) ⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_scalarmult</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">product_axiom_associative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F}</span>
<span class=" -MMT_ObjectExpression">		⊦ prop_associative (v1 xop_ F v2) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_associative</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_leftUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		⊦ prop_leftUnital	(v1 xop_ F v2) (product_unit F v1 v2) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_leftUnital</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_rightUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		⊦ prop_rightUnital	(v1 xop_ F v2) (product_unit F v1 v2) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_rightUnital</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		⊦ prop_inverse (v1 xop_ F v2) (product_inverse F v1 v2) (product_unit F v1 v2)</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_inverse</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, v1 : vectorspace F, v2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		⊦ prop_commutative (v1 xop_ F v2) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_commutative</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_dist1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, V1 : vectorspace F, V2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		⊦ prop_dist1 (product_scalarmult F V1 V2) (V1 xop_ F V2) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_dist</span><span class="si">1</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_dist2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, V1 : vectorspace F, V2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		⊦ prop_dist2 (product_scalarmult F V1 V2) (F.rplus) (V1 xop_ F V2) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_dist</span><span class="si">2</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_associativeScalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, V1 : vectorspace F, V2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		⊦ prop_associative_scalars (product_scalarmult F V1 V2) (F.rtimes) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_associativeScalars</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">product_axiom_unitScalars</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field, V1 : vectorspace F, V2 : vectorspace F} </span>
<span class=" -MMT_ObjectExpression">		⊦ prop_unit_scalars (product_scalarmult F V1 V2) (F.rone) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">product_axiom_unitScalars</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">productspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F : field} vectorspace F ⟶ vectorspace F ⟶ vectorspace F </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] [v1] [v2] [&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := v1 x_ F v2,</span>
<span class=" -MMT_ObjectExpression">		op := v1 xop_ F v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative := product_axiom_associative F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		unit := product_unit F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := product_axiom_leftUnital F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := product_axiom_rightUnital F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		inverse := product_inverse F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_inverse := product_axiom_inverse F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_commutative := product_axiom_commutative F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		scalarmult := product_scalarmult F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_dist1 := product_axiom_dist1 F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_dist2 := product_axiom_dist2 F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative_scalars := product_axiom_associativeScalars F v1 v2,</span>
<span class=" -MMT_ObjectExpression">		axiom_unit_scalars := product_axiom_unitScalars F v1 v2</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">ov</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">finite_vectorspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{F: field} pos_lit ⟶ vectorspace F </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// axiom_finite1 : {F : field} ⊦ eq (vectorspace F) (F ^ 1) (asVectorspace F) ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// axiom_sr : {n} ⊦ finite_real_vectorspace (Succ n) ≐ productspace realField ℝ1 (finite_real_vectorspace n) ❙</span><span class="w">  </span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">LinearMaps</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Productspace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">linearMap_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> K : field, n1 : ℕ+, n2 : ℕ+ ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">V1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">K ^ n1 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">V2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">K ^ n2 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(V1.universe) ⟶ (V2.universe) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="cm">// insert axioms here...</span>
<span class="cm">		..</span>
<span class="cm">		.. ❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">linearMap</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field ⟶ ℕ+ ⟶ ℕ+ ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[K : field][n1 : ℕ+,n2 : ℕ+] Mod ☞?LinearMaps/linearMap_theory K n1 n2 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">linearMap</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// L : linearMap realfield 2 3 ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NaturalMonoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Monoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?NaturalDeduction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞arith:?NaturalArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">naturalMonoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">monoid </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := ℕ,</span>
<span class=" -MMT_ObjectExpression">		op := ☞arith:?NaturalArithmetics?addition ,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative := forallI [x : ℕ] (forallI [y : ℕ] (forallI [z : ℕ] (associative_plus_nat x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		unit := 0 ,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := forallI leftunital_plus_nat ,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := forallI rightunital_plus_nat</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IntegerRing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w">                         </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?NaturalDeduction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞arith:?IntegerArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_intOneNeqZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ neq ℤ 1 0 </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">integerRing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := ℤ,</span>
<span class=" -MMT_ObjectExpression">		rplus := ☞arith:?IntegerArithmetics?addition ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_associative := forallI [x : ℤ] (forallI [y : ℤ] (forallI [z : ℤ] (associative_plus_int x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rzero := 0 ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_leftUnital := forallI ☞arith:?IntegerArithmetics?axiom_leftUnitalPlus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_rightUnital := forallI ☞arith:?IntegerArithmetics?axiom_rightUnitalPlus ,</span>
<span class=" -MMT_ObjectExpression">		rtimes := ☞arith:?IntegerArithmetics?multiplication ,</span>
<span class=" -MMT_ObjectExpression">		multiplication/axiom_associative := forallI [x : ℤ] (forallI [y : ℤ] (forallI [z : ℤ] (associative_times_int x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rminus := ☞arith:?IntegerArithmetics?uminus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_inverse := forallI (axiom_plusUminus) ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_commutative := forallI [x : ℤ] (forallI [y : ℤ] (☞arith:?IntegerArithmetics?axiom_additionCommutative x y)) ,</span>
<span class=" -MMT_ObjectExpression">		axiom_distributive := forallI [x : ℤ] (forallI [y : ℤ] (forallI [z : ℤ] (☞arith:?IntegerArithmetics?axiom_distributive x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rone := 1 ,</span>
<span class=" -MMT_ObjectExpression">		axiom_oneNeqZero := axiom_intOneNeqZero,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := forallI ☞arith:?IntegerArithmetics?axiom_leftUnitalTimes ,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := forallI ☞arith:?IntegerArithmetics?axiom_rightUnitalTimes</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">integerGroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">additiveGroup integerRing </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RationalField</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Field </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞arith:?RationalArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?NaturalDeduction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_ratOneNeqZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ neq ℚ 1 0 </span><span class=" -MMT_DD">❙</span><span class="w"> </span>

<span class="w">	</span><span class="vc">rationalField</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := ℚ,</span>
<span class=" -MMT_ObjectExpression">		rplus := ☞arith:?RationalArithmetics?addition ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_associative := forallI [x : ℚ] (forallI [y : ℚ] (forallI [z : ℚ] (associative_plus_rat x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rzero := 0 ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_leftUnital := forallI ☞arith:?RationalArithmetics?axiom_leftUnitalPlus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_rightUnital := forallI ☞arith:?RationalArithmetics?axiom_rightUnitalPlus ,</span>
<span class=" -MMT_ObjectExpression">		rtimes := ☞arith:?RationalArithmetics?multiplication ,</span>
<span class=" -MMT_ObjectExpression">		multiplication/axiom_associative := forallI [x : ℚ] (forallI [y : ℚ] (forallI [z : ℚ] (associative_times_rat x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rminus := ☞arith:?RationalArithmetics?uminus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_inverse := forallI ☞arith:?RationalArithmetics?axiom_plusUminus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_commutative := forallI [x : ℚ] (forallI [y : ℚ] (☞arith:?RationalArithmetics?axiom_commutativePlus x y)) ,</span>
<span class=" -MMT_ObjectExpression">		☞arith:?IntegerArithmetics?axiom_distributive := forallI [x : ℚ] (forallI [y : ℚ] (forallI [z : ℚ] (☞arith:?RationalArithmetics?axiom_distributive x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rone := 1 ,</span>
<span class=" -MMT_ObjectExpression">		axiom_oneNeqZero := axiom_ratOneNeqZero,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := forallI ☞arith:?RationalArithmetics?axiom_leftUnitalTimes ,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := forallI ☞arith:?RationalArithmetics?axiom_rightUnitalTimes ,</span>
<span class=" -MMT_ObjectExpression">		inverse := inverseTyped ,</span>
<span class=" -MMT_ObjectExpression">		axiom_inverse := forallI axiom_inv2 ,</span>
<span class=" -MMT_ObjectExpression">		axiom_commutative := forallI [x : ℚ] (forallI [y : ℚ] ☞arith:?RationalArithmetics?axiom_commutativeTimes x y)</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// TODO ugly hack!! ❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">rationalField2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">IntegerRing</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RealField</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Field </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞arith:?RealArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?NaturalDeduction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_realOneNeqZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ neq ℝ 1 0 </span><span class=" -MMT_DD">❙</span><span class="w"> </span>

<span class="w">	</span><span class="vc">realField</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">field </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">		universe := ℝ,</span>
<span class=" -MMT_ObjectExpression">		rplus := ☞arith:?RealArithmetics?addition ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_associative := forallI [x : ℝ] (forallI [y : ℝ] (forallI [z : ℝ] (associative_plus_real x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rzero := 0 ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_leftUnital := forallI ☞arith:?RealArithmetics?axiom_leftUnitalPlus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_rightUnital := forallI ☞arith:?RealArithmetics?axiom_rightUnitalPlus ,</span>
<span class=" -MMT_ObjectExpression">		rtimes := ☞arith:?RealArithmetics?multiplication ,</span>
<span class=" -MMT_ObjectExpression">		multiplication/axiom_associative := forallI [x : ℝ] (forallI [y : ℝ] (forallI [z : ℝ] (associative_times_real x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rminus := ☞arith:?RealArithmetics?uminus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_inverse := forallI ☞arith:?RealArithmetics?axiom_plusUminus ,</span>
<span class=" -MMT_ObjectExpression">		addition/axiom_commutative := forallI [x : ℝ] (forallI [y : ℝ] (☞arith:?RealArithmetics?axiom_commutativePlus x y)) ,</span>
<span class=" -MMT_ObjectExpression">		☞arith:?IntegerArithmetics?axiom_distributive := forallI [x : ℝ] (forallI [y : ℝ] (forallI [z : ℝ] (☞arith:?RealArithmetics?axiom_distributive x y z))) ,</span>
<span class=" -MMT_ObjectExpression">		rone := 1 ,</span>
<span class=" -MMT_ObjectExpression">		axiom_oneNeqZero := axiom_realOneNeqZero,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := forallI ☞arith:?RealArithmetics?axiom_leftUnitalTimes ,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := forallI ☞arith:?RealArithmetics?axiom_rightUnitalTimes ,</span>
<span class=" -MMT_ObjectExpression">		☞arith:?IntegerArithmetics?inverse := ☞arith:?RealArithmetics?inverseTyped ,</span>
<span class=" -MMT_ObjectExpression">		axiom_inverse := forallI ☞arith:?RealArithmetics?axiom_inv2 ,</span>
<span class=" -MMT_ObjectExpression">		axiom_commutative := forallI [x : ℝ] (forallI [y : ℝ] ☞arith:?RealArithmetics?axiom_commutativeTimes x y)</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// TODO ugly hack!! ❙</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RealVectorspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Vectorspace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealField </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Productspace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">realVec</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">vectorspace realField </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">realVec1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">realVec </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">asVectorspace realField </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℝ</span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">realVec2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">realVec </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = productspace realField ℝ1 ℝ1 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℝ</span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">realVec3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">realVec </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = productspace realField ℝ1 ℝ2 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℝ</span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// takes forever ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// finite_real_vectorspace : pos_lit ⟶ RealVec ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra/permutationgroup</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">algebra</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Permutations</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?Lists </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?NatLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">cycle</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">List ℕ+ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">permutation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">PermList</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(List cycle) ⟶ permutation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">fromImage</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(List ℕ+) ⟶ permutation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GroupAction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?Bijective</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞algebra:?Group</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">groupAction_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞algebra:?Group/group_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">X</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">phi</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ (bijections X X) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Φ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">inner_notation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{g : U, x : X} X </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g,x] (Φ g) x </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w">   </span>
<span class="w">    </span><span class="vc">is_action</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦  ∀[g: U] ∀[h: U] ∀[x:X] g&lt;h&lt;x&gt;&gt; ≐ (g ∘ h)&lt;x&gt;</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">groupAction</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞GroupAction/groupAction_theory</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">outer_notation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{GX : groupAction, g : dom GX, x : GX.X} GX.X </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[GX,g,x] ((GX.phi) g) x </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w">   </span>
<span class="w">  </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞../algebra?RationalPolynomials </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">polynomialOrbit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ring} group ⟶ multi_polynomial r ⟶ List (multi_polynomial r) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">orbit</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w">  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PermutationGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞algebra:?Group</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?Bijective </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Permutations </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GroupAction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">permutationGroup_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GroupAction/groupAction_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">is_injective_action</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ is_injective Φ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">permutationGroup</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?PermutationGroup/permutationGroup_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">fromPerm</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(List permutation) ⟶ permutationGroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">generators</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">permutationGroup ⟶ List permutation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">dihedralGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ permutationGroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w">  </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TransitiveGroupAction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GroupAction</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">transitiveGroupAction_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GroupAction/groupAction_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">is_transitive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x:X] ∀[y:X] ∃[g:U] (Φ g) x ≐ y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">transitiveGroupAction</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?TransitiveGroupAction/transitiveGroupAction_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">tr_value</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">transitiveGroupAction ⟶ ℕ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">transitiveGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ ⟶ transitiveGroupAction 	</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">/MitM/Foundation?Metadata?constructorargument</span><span class="w"> </span><span class=" -MMT_ObjectExpression">degree</span>
<span class=" -MMT_ObjectExpression">  																					</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">/MitM/Foundation?Metadata?constructorargument</span><span class="w"> </span><span class=" -MMT_ObjectExpression">tr_value </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"> </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Polynomials</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?Sequences </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">finiteSum</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r:ring, n} (r.universe)^n ⟶ (r.universe) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,n,s] foldL (r.rplus) (r.rzero) n s  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∑</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">power_seq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r:ring, n : NAT} r.universe ⟶ r.universe </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,n,x] foldL (r.rtimes) (r.rone) n ⟨&#39; x | i:n &#39;⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">tothe</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">polynomial_of</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ring, n} (r.universe)^n ⟶ (r.universe) ⟶ (r.universe) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,n,s] [x] ∑ ⟨&#39; ((r.rtimes) (s..i) (x tothe i) ) | i:n &#39;⟩</span>
<span class=" -MMT_ObjectExpression">		</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">polynomial_of</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">OneDimensionalPolynomialsOver</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring ⟶ type </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r] ⟨ f : (r.universe) ⟶ (r.universe) | ⊦ ∃ [n] exists_seq (r.universe) n [s] f ≐ (polynomial_of s)  ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">polynomialRing</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring ⟶ ring </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// TODO </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">polynomial</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r] (polynomialRing r).universe </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">multi_polynomial</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring ⟶ type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">monomial</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ring} type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">monomial</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NumberSpaces</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RationalField </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Polynomials </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">numberField</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(polynomialRing rationalField).universe ⟶ ring </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">galoisGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring ⟶ group </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RationalPolynomials</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Polynomials </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?Lists </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra?RationalField </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?ProductTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">poly_con</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ring} string ⟶ List ℚ ⟶ polynomial r </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [n,s] polynomial_of s </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">monomial_con</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r: ring} (List (string × ℕ)) × ℚ ⟶ monomial r </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">monomial_con</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">multi_poly_con</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ring} List (monomial r) ⟶ multi_polynomial r </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">mpoly</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// x1 =  &quot;x1&quot; ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// x2 = &quot;x2&quot; ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// test1 = ⟨ x1 , 1 ⟩ ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// m1 = monomial_con rationalField2 ⟨  (⟨ x1 , 1 ⟩ ++ nil) , 3 ⟩ ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// m2 = monomial_con rationalField2 ⟨ (⟨ x2, 1⟩ ++ nil),2⟩ ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// p = mpoly (ls m1,m2) ❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">groebner</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ring} List (multi_polynomial r) ⟶ List (multi_polynomial r) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">groebner</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Ringoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Magma </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">ringoid_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kd">structure</span><span class="w"> </span><span class="nc">addition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma/magma_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">      	</span><span class="vc">universe</span><span class="w"> </span><span class="p">@</span><span class="no"> R </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">op</span><span class="w"> </span><span class="p">@</span><span class="no"> plus </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"> </span>
<span class="w">	</span><span class="kd">structure</span><span class="w"> </span><span class="nc">multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?Magma/magma_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">			</span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">R </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">			</span><span class="vc">op</span><span class="w">  </span><span class="p">@</span><span class="no"> times </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⋅</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_distributive plus times </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">ringoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Ringoid/ringoid_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T MiKo: refactor this with Ringoid ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Rig</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AbelianGroup </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">rig_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?SetStructures/setstruct_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="kd">structure</span><span class="w"> </span><span class="nc">addition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?AbelianGroup/abeliangroup_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">			</span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">☞sets:?SetStructures/setstruct_theory?universe </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Uadd</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">			</span><span class="vc">op</span><span class="w"> </span><span class="p">@</span><span class="no"> rplus </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">			</span><span class="vc">unit</span><span class="w"> </span><span class="p">@</span><span class="no"> rzero </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">O</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">			</span><span class="vc">inverse</span><span class="w"> </span><span class="p">@</span><span class="no"> rminus </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class=" -MMT_MD">❚</span><span class="w"> </span>
<span class="w">		</span><span class="kd">structure</span><span class="w"> </span><span class="nc">multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SemiGroup/semigroup_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">			</span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">☞sets:?SetStructures/setstruct_theory?universe </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Umult</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">			</span><span class="vc">op</span><span class="w">  </span><span class="p">@</span><span class="no"> rtimes </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⋅</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">6</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">		</span><span class="vc">unitset</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⟨ x: U | ⊦ x ≠ O ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_distributive rplus rtimes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"> </span>
<span class="w">	</span><span class="vc">rig</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Rig/rig_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">unitsetOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rig ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r] r.unitset </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rigUnitsetSubtype</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : rig} r.unitset &lt;* r.universe </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">additiveGroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rig ⟶ abeliangroup </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r] [&#39; </span>
<span class=" -MMT_ObjectExpression">		universe := r.universe,</span>
<span class=" -MMT_ObjectExpression">		op := r.rplus ,</span>
<span class=" -MMT_ObjectExpression">		axiom_associative := r.addition/axiom_associative , </span>
<span class=" -MMT_ObjectExpression">		unit := r.rzero ,</span>
<span class=" -MMT_ObjectExpression">		axiom_leftUnital := r.addition/axiom_leftUnital ,</span>
<span class=" -MMT_ObjectExpression">		axiom_rightUnital := r.addition/axiom_rightUnital ,</span>
<span class=" -MMT_ObjectExpression">		inverse := r.rminus ,</span>
<span class=" -MMT_ObjectExpression">		axiom_inverse := r.addition/axiom_inverse ,</span>
<span class=" -MMT_ObjectExpression">		axiom_commutative := r.addition/axiom_commutative</span>
<span class=" -MMT_ObjectExpression">		&#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">multiplicative_semigroup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">rig ⟶ semigroup </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r] [&#39;</span>
<span class=" -MMT_ObjectExpression">			universe := r.universe,</span>
<span class=" -MMT_ObjectExpression">			op := (r.rtimes) ,</span>
<span class=" -MMT_ObjectExpression">			axiom_associative := r.multiplication/axiom_associative</span>
<span class=" -MMT_ObjectExpression">		&#39;] </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// needs proof that ret type = unitset ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">		</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Ring</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rig </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="cm">// TODO needs refactoring once structures work ❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">ring_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Rig/rig_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">rone</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">I</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_oneNeqZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ I ≠ O </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_leftUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x : U] I ⋅ x ≐ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_rightUnital</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x : U] x ⋅ I ≐ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">ring</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Ring/ring_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="vc">multiplicative_monoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ring ⟶ monoid </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r] [&#39;</span>
<span class=" -MMT_ObjectExpression">			universe := r.universe,</span>
<span class=" -MMT_ObjectExpression">			op := r.rtimes,</span>
<span class=" -MMT_ObjectExpression">			axiom_associative := r.multiplication/axiom_associative,</span>
<span class=" -MMT_ObjectExpression">			unit := r.rone,</span>
<span class=" -MMT_ObjectExpression">			axiom_leftUnital := r.axiom_leftUnital,</span>
<span class=" -MMT_ObjectExpression">			axiom_rightUnital := r.axiom_rightUnital</span>
<span class=" -MMT_ObjectExpression">		&#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">		</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">field_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ring/ring_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">unitset ⟶ unitset </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⁻¹</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀ [x : unitset] x ⋅ (x ⁻¹) ≐ I </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">axiom_commutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x : U]∀[y] (x ⋅ y) ≐ (y ⋅ x) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Field/field_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="cm">// multiplicative_group : field ⟶ abeliangroup ❘ = [r] [&#39;</span>
<span class="cm">			universe := r.unitset,</span>
<span class="cm">			op := r.times,</span>
<span class="cm">			isassociative := r.timesisassociative,</span>
<span class="cm">			unit := r.timesunit,</span>
<span class="cm">			leftunital := r.timesleftunital,</span>
<span class="cm">			rightunital := r.timesrightunital,</span>
<span class="cm">			inverse := r.timesinverse ,</span>
<span class="cm">			inverseproperty := r.timesinverseproperty ,</span>
<span class="cm">			abelianax := r.timesabelianax</span>
<span class="cm">		&#39;] ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ComplexNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">complexNumbers</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℂ</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T every real number is also a complex one: ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realsAreComplex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ &lt;* ℂ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rationalsAreComplex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ &lt;* ℂ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_integersAreComplex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ &lt;* ℂ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_naturalsAreComplex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ &lt;* ℂ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_posAreComplex</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ+ &lt;* ℂ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// this constructor returns a complex number z with arguments Re(z), Im(z). ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">complexNumberConstructor</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ ℂ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+i</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">imaginaryUnit</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℂ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">0 +i 1 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">i</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Re returns real part of complex number. ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">realPart</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℂ ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Re</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Im returns real part of complex number. ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">imaginaryPart</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℂ ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Im</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">/T Axioms for basic complex functions: ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_complexNumberConstructor_Re</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[a] ∀[b] Re (a +i b) ≐ a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_complexNumberConstructor_Im</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[a] ∀[b] Im (a +i b) ≐ b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realPartOfReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℝ} ⊦ x +i 0 ≐ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ComplexArithmetic</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?ComplexNumbers </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T ComplexConjugate maps a + b i -&gt; a - b i ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">complexConjugate</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℂ ⟶ ℂ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[z] (Re z) +i (- Im z) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">cConj</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Additive Inverse ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">uminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℂ ⟶ ℂ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] (- Re x) +i (- Im x) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Addition of two complex numbers ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">addition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℂ ⟶ ℂ ⟶ ℂ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[z1,z2] (arithmetics?RealArithmetics?addition (Re z1) (Re z2)) +i (arithmetics?RealArithmetics?addition (Im z1) (Im z2)) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="cm">/T Difference of two complex numbers using additive inverse and addition ❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">subtraction</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℂ ⟶ ℂ ⟶ ℂ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[z1,z2] z1 + (- z2) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Multiplication of two complex numbers with each other. ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">multiplication</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℂ ⟶ ℂ ⟶ ℂ </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">													</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[z1,z2] (☞?RealArithmetics?addition ((Re z1) ⋅ (Re z2)) ( ☞?RealArithmetics?uminus (Im z1) ⋅ (Im z2)))</span>
<span class=" -MMT_ObjectExpression">																			 +i (☞?RealArithmetics?addition ((Re z2) ⋅ (Im z1)) ( (Re z1) ⋅ (Im z2))) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">													</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⋅</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Magnitude of  a + b i maps to sqrt(a*a+b*b)... ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">complexAbsoluteSquared</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℂ ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[z] Re (z ⋅ cConj z) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|^</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">absolute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℂ ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[z] sqrt (|z|^) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="si">1</span><span class="ss">|</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w">												</span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">nonzeroComplexNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℂ*</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⟨ z : ℂ | ⊦ Re z ≠ 0 ∨ Im z ≠ 0 ⟩</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℂ* ⟶ ℂ</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">inv</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">31</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">division</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℂ ⟶ ℂ* ⟶ ℂ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[u,z] u ⋅ (inv z) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w">	</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IntegerNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NaturalNumbers </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?IntLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_natsAreInt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit &lt;* int_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_natsAreInt2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT &lt;* int_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_posAreInt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit &lt;* int_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">negative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">minus_int_lit</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_negZeroIsZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ negative 0 ≐ 0 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_negPosIsNotId</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℕ+} ⊦ neq int_lit (negative n) n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_negPosIsInj</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n,m: ℕ} ⊦ negative n ≐ negative m ⟶ ⊦ n ≐ m </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IntegerArithmetics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NaturalArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IntegerNumbers </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Negation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">uminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">34</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">minus_int_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_uminusIsNeg</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n: ℕ} ⊦ -n ≐ negative n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_uminusIsNilp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{z:ℤ} ⊦ - (- z) ≐ z </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Addition ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">addition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ ⟶ ℤ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plus_int_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intPlusIsNatplus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℕ, y : ℕ} ⊦ arithmetics?IntegerArithmetics?addition x y ≐ arithmetics?NaturalArithmetics?addition x y </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">axiom_additionCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℤ, y : ℤ} ⊦ x + y ≐ y + x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_additionCommutative</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_plusUminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℤ} ⊦ x + (-x) ≐ 0 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_plusUminus</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Subtraction ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtraction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ ⟶ ℤ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] a + (-b) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Multiplication ❙</span><span class="w">	</span>
<span class="w">	</span><span class="vc">multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ ⟶ ℤ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">⋅</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">times_int_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intTimesIsNattimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℕ, y : ℕ} ⊦ arithmetics?IntegerArithmetics?multiplication x y ≐ arithmetics?NaturalArithmetics?multiplication x y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Division ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">div</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℤ, y : ℤ, p : ⊦ ∃! [z] y ⋅ z ≐ x} ℤ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,p] ι [z] y ⋅ z ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Exponentiation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">exponentiation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ ⟶ ℤ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">34</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intExpIsNatexp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℕ, y : ℕ} ⊦ arithmetics?IntegerArithmetics?exponentiation x y ≐ arithmetics?NaturalArithmetics?exponentiation x y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Roots ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">root</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℤ, m : ℕ, p : ⊦ ∃![x] x^m ≐ n}ℤ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m,p] ι [x] x^m ≐ n  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">√</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">34</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// squareRoot : {n : ℤ, p : ⊦ ∃![m] m^2 ≐ n}ℤ ❘ = [n,p] 2 √ n ❘ # √ 1 %I2 prec 34 ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// squareRoot is technically only defined on naturals anyway ❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Order ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">leq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y] ∃ [n: ℕ] eq ℤ (arithmetics?IntegerArithmetics?addition x n) y </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">104</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">geq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] m ≤ n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≥</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">104</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lessthan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n ≤ m ∧ n ≠ m </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">104</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">morethan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n ≥ m ∧ n ≠ m </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">104</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">max</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ ⟶ ℤ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">max</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">min</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ ⟶ ℤ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">min</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intLeqIsNatLeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℕ, y : ℕ} ⊦ arithmetics?NaturalArithmetics?leq x y ≐ arithmetics?IntegerArithmetics?leq x y </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Others ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">mod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℤ ⟶ ℤ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">mod</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">up</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{z : ℤ, p : ⊦ z ≥ 0}ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℤtoℕ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_up</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℕ,p : ⊦ n ≥ 0} ⊦ ℤtoℕ n ≐ n </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">// natissub : ℕ ≐≐ ⟨ ℤ | ([z] ⊦ ¬ z &lt; 0) ⟩ ❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">posisneqzero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ+ &lt;* ⟨ x: ℤ | ⊦ x ≠ 0 ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">absolute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℕ </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// ❘ = [z] case z &lt;0 ⟹ up (-z) . up z ❘ # | 1 | prec 10 ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// TODO: axioms for the other ones as well.❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Group Axioms ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativePlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: ℤ,y,z} ⊦ arithmetics?IntegerArithmetics?addition x (arithmetics?IntegerArithmetics?addition y z) ≐ </span>
<span class=" -MMT_ObjectExpression">		arithmetics?IntegerArithmetics?addition (arithmetics?IntegerArithmetics?addition x y) z </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_plus_int</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativeTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: ℤ,y,z} ⊦ x ⋅ (y ⋅ z) ≐ (x ⋅ y) ⋅ z </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_times_int</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℤ} ⊦ arithmetics?IntegerArithmetics?addition 0 x ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_plus_int</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rightUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℤ} ⊦ arithmetics?IntegerArithmetics?addition x 0 ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_plus_int</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℤ} ⊦ 1 ⋅ x ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_times_int</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rightUnitalTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℤ} ⊦ x ⋅ 1 ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_times_int</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℤ, y : ℤ, z : ℤ} ⊦ arithmetics?IntegerArithmetics?multiplication x (arithmetics?IntegerArithmetics?addition y z) ≐ </span>
<span class=" -MMT_ObjectExpression">		arithmetics?IntegerArithmetics?addition (arithmetics?IntegerArithmetics?multiplication x y) (arithmetics?IntegerArithmetics?multiplication x z) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">distributive_int</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NaturalNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?NatLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">succ</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Succ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] succ_nat_lit n </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">axiom_succ1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ 0 ≠ Succ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_succ2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:ℕ,y:ℕ} ⊦ Succ x ≐ Succ y ⟶ ⊦ x ≐ y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_Induction</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : ℕ ⟶ bool} ⊦ A 0 ⟶ ({x}⊦ A x ⟶ ⊦ A (Succ x)) ⟶ {x} ⊦ A x </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">NaturalArithmetics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NaturalNumbers </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Addition ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">addition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plus_nat_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_plus1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x + 0 ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_plus</span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_plus2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x + Succ y ≐ Succ (x + y) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Subtraction ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtraction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℕ, m : ℕ, p : ⊦ ∃! [x : ℕ] m + x ≐ n}ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m,p] ι [x: ℕ] m + x ≐ n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// TODO proof arguments are in the way ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// theorem_sub1: ⊦ ∀[n] n - zero ≐ n ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// theorem_sub2: ⊦ ∀[n] ∀[m] m ≤ n ⇒ (S n) - (S m) ≐ n - m ❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Multiplication ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⋅</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">times_nat_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_times1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℕ} ⊦ x ⋅ 1 ≐ x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_times2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x ⋅ Succ y ≐ x + x ⋅ y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_times3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: ℕ} ⊦ x ⋅ 0 ≐ 0 ∧ 0 ⋅ x ≐ 0 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Division ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">divides</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] ∃! [r : ℕ] n ⋅ r ≐ m </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">div</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℕ, m : ℕ, p : ⊦ ∃! [r : ℕ] n ⋅ r ≐ m} ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m,p] ι ([r : ℕ] n ⋅ r ≐ m) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// theorem_div1: ⊦ ∀[n] ¬ (n ≐ 0) ⇒ zero / n ≐ zero ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// theorem_div2: ⊦ ∀[n] ∀[m] ¬(m ≐ zero) ∧ (m | n) ⇒ n / m ≐ S ((n - m) / m) ❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Exponentiation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">exponentiation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">35</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_exp1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x} ⊦ x ^ 0 ≐ 1 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_exp2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x,y} ⊦ x ^ Succ y ≐ x ⋅ x ^ y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Roots ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">root</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℕ, m : ℕ, p : ⊦ ∃![x] x^m ≐ n}ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m,p] ι [x] x^m ≐ n  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">√</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">35</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">squareRoot</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℕ, p : ⊦ ∃![m] m^2 ≐ n}ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,p] 2 √ n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">√</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">35</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Order ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">leq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] ∃! [x] n + x ≐ m </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">geq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] m ≤ n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≥</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lessthan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n ≤ m ∧ n ≠ m </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">morethan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n ≥ m ∧ n ≠ m </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">105</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Others ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">max</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">max</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">min</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">min</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">mod</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">mod</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">25</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// axiom_mod1: ⊦ ∀[n] ∀[m] n &lt; m ⇒ (n mod m) ≐ n ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// axiom_mod2: ⊦ ∀[n] ∀[m] (m ≤ n) ⇒ ((n mod m) ≐ ((n - m) mod m)) ❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">primes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⟨ x : ℕ+ | ⊦ x ≠ 1 ∧ ∀ [y : ℕ] (y | x) ⇒ (y ≐ 1 ∨ y ≐ x) ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">fromOneTo</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ+ ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] ⟨ x: ℕ+ | ⊦ 1 ≤ x ∧ x ≤ n ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Monoid Axioms ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativePlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: ℕ,y,z} ⊦ x + (y + z) ≐ (x + y) + z </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_plus_nat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℕ} ⊦ 0 + x ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_plus_nat</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_rightUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℕ} ⊦ x + 0 ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">axiom_plus1 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_plus_nat</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RationalNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IntegerNumbers </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">rationalNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℚ</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intsAreRats</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">int_lit &lt;* ℚ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_natsAreRats</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nat_lit &lt;* ℚ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_natsAreRats2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT &lt;* ℚ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_posAreRats</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pos_lit &lt;* ℚ </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">fraction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ ⟶ ℕ+ ⟶ ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">/</span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// TODO: this is the constructor ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">RationalArithmetics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?IntegerArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RationalNumbers </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Negation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">uminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">33</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ratUminusIsIntUminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℤ} ⊦ arithmetics?RationalArithmetics?uminus x ≐ arithmetics?IntegerArithmetics?uminus x </span><span class=" -MMT_DD">❙</span><span class="w"> </span>

<span class="w">	</span><span class="cm">/T Addition ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">addition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ratPlusIsIntPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℤ, y : ℤ} ⊦ arithmetics?RationalArithmetics?addition x y ≐ arithmetics?IntegerArithmetics?addition x y </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">axiom_plusUminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℚ} ⊦ x + (-x) ≐ 0 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Simplify </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Subtraction ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtraction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] a + (-b) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">13</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Multiplication ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">⋅</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">23</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ratTimesIsNatTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℤ, y : ℤ} ⊦ arithmetics?RationalArithmetics?multiplication x y ≐ arithmetics?IntegerArithmetics?multiplication x y </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Division ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">non_zero_rationals</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⟨ x : ℚ | ⊦ x ≠ 0 ⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℚ*</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:ℚ, p:⊦ x ≠ 0} ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">inv</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">33</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">inverseTyped</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ* ⟶ ℚ* </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_inv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ℚ, p: ⊦ r ≠ 0} ⊦ r ⋅ (inv r) ≐ 1 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">//  role Simplify </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Axiom_inv_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_inv2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ℚ* } ⊦ r ⋅ (inverseTyped r) ≐ 1 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_inv</span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">div</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r:ℚ,s:ℚ, p:⊦ s ≠ 0} ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,s,p] r ⋅ (inv s) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Exponentiation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">exponentiation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">33</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ratExpIsNatExp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℤ, y : ℤ} ⊦ arithmetics?RationalArithmetics?exponentiation x y ≐ arithmetics?IntegerArithmetics?exponentiation x y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Roots ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">root</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℚ, m : ℕ, p : ⊦ ∃![x] x^m ≐ n}ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m,p] ι [x] x^m ≐ n  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">√</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">33</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">squareRoot</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℚ, p : ⊦ ∃![m] m^2 ≐ n}ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,p] 2 √ n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">√</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">33</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Orders ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">leq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">103</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">geq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] m ≤ n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≥</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">103</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lessthan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n ≤ m ∧ n ≠ m </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">103</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">morethan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n ≥ m ∧ n ≠ m </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">103</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">max</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">max</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">min</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ ⟶ ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">min</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ratLeqIsIntLeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℤ, y : ℤ} ⊦ arithmetics?RationalArithmetics?leq x y ≐ arithmetics?IntegerArithmetics?leq x y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Others ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">absolute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ ⟶ ℚ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[q] case q &lt; 0 ⟹ -q . q </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Field axioms ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativePlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: ℚ,y,z} ⊦ x + (y + z) ≐ (x + y) + z </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_plus_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativeTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: ℚ,y,z} ⊦ x ⋅ (y ⋅ z) ≐ (x ⋅ y) ⋅ z </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_times_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℚ} ⊦ arithmetics?RationalArithmetics?addition 0 x ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_plus_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rightUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℚ} ⊦ arithmetics?RationalArithmetics?addition x 0 ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_plus_rat</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℚ} ⊦ 1 ⋅ x ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_times_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rightUnitalTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℚ} ⊦ x ⋅ 1 ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_times_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℚ, y : ℚ, z : ℚ} ⊦ x ⋅ (y + z) ≐ (x ⋅ y) + (x ⋅ z) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">distributive_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_commutativePlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℚ,y} ⊦ x + y ≐ y + x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">addition_commutative_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_commutativeTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℚ,y} ⊦ x ⋅ y ≐ y ⋅ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">times_commutative_rat</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RealNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?RealLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RationalNumbers </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">RealNumbers</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ratsAreReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℚ &lt;* ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intsAreReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℤ &lt;* ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_natsAreReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ &lt;* ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_posAreReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ+ &lt;* ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">NAT_is_real</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">NAT &lt;* ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RealArithmetics</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealNumbers </span><span class=" -MMT_DD">❙</span><span class="w">                                  </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RationalArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Negation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">uminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">minus_real_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realMinusIsRatMinus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℚ} ⊦ arithmetics?RealArithmetics?uminus x ≐ arithmetics?RationalArithmetics?uminus x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Addition ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">addition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">+</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plus_real_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realPlusIsRatPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℚ, y : ℚ} ⊦ arithmetics?RealArithmetics?addition x y ≐ arithmetics?RationalArithmetics?addition x y </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">axiom_plusUminus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℝ} ⊦ (x + (-x)) ≐ 0 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Subtraction ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtraction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] a + (-b) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Multiplication ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">⋅</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">22</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">times_real_lit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realTimesIsRatTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℚ, y : ℚ} ⊦ arithmetics?RealArithmetics?multiplication x y ≐ arithmetics?RationalArithmetics?multiplication x y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Division ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">no_zero_reals</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⟨ x : ℝ | ⊦ x ≠ 0 ⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℝ*</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:ℝ, p:⊦ x ≠ 0} ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">inv</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">inverseTyped</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ* ⟶ ℝ* </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">inverseTyped</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_inv</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℝ, p : ⊦ x ≠ 0} ⊦ x ⋅ (inv x) ≐ 1 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_inv2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r : ℝ* } ⊦ r ⋅ (inverseTyped r) ≐ 1 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_inv</span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">div</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{r:ℝ,s:ℝ, p:⊦ s ≠ 0} ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,s,p] r ⋅ (inv s) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">/</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">/T Exponentiation ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">exponentiation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realExpIsRatExp</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℚ, y : ℚ} ⊦ arithmetics?RealArithmetics?exponentiation x y ≐ arithmetics?RationalArithmetics?exponentiation x y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Roots ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">root</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℝ, m : ℕ, p : ⊦ ∃![x] x^m ≐ n}ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m,p] ι [x] x^m ≐ n  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">√</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">squareRoot</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℝ, p : ⊦ ∃![m] m^2 ≐ n}ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,p] 2 √ n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">√</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">32</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Order ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">leq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≤</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">102</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">geq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] m ≤ n </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≥</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">102</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lessthan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n ≤ m ∧ n ≠ m </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">102</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">morethan</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n,m] n ≥ m ∧ n ≠ m </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">102</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">max</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">max</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">min</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">min</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_realLeqIsRatLeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℚ, y : ℚ} ⊦ arithmetics?RealArithmetics?leq x y ≐ arithmetics?RationalArithmetics?leq x y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Subtypes ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">NonNegativeRealNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℝ^+</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⟨ x : ℝ | ⊦ x ≥ 0 ⟩</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">PositiveRealNumbers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℝ+</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⟨ x : ℝ | ⊦ x &gt; 0 ⟩</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Suprema ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// to allow for later usage of subspaces by way of a boolean function that tells whether it is part of the domain or not ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">predAsSub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(ℝ ⟶ bool) ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P] ⟨ z : ℝ | ⊦ P z ⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pred</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">sup</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(ℝ ⟶ bool) ⟶ ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_sup1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : ℝ ⟶ bool, y : pred P} ⊦ y ≤ sup P </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_sup2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : ℝ ⟶ bool, y : ℝ, p : {z: pred P}⊦z ≤ y} ⊦ sup P ≤ y </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Others ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">absolute</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ^+ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [q] case q &lt; 0 ⟹ -q . q </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="cm">/T Field Axioms ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativePlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: ℝ,y,z} ⊦ x + (y + z) ≐ (x + y) + z </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_plus_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_associativeTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x: ℝ,y,z} ⊦ x ⋅ (y ⋅ z) ≐ (x ⋅ y) ⋅ z </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">associative_times_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℝ} ⊦ 0 + x ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_plus_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rightUnitalPlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℝ} ⊦ x + 0 ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_plus_real</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_leftUnitalTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℝ} ⊦ 1 ⋅ x ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">leftunital_times_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_rightUnitalTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℝ} ⊦ x ⋅ 1 ≐ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">rightunital_times_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_distributive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℝ, y, z} ⊦ x ⋅ (y + z) ≐ (x ⋅ y) + (x ⋅ z) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">distributive_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_commutativePlus</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℝ,y} ⊦ x + y ≐ y + x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">addition_commutative_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_commutativeTimes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x : ℝ,y} ⊦ x ⋅ y ≐ y ⋅ x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">times_commutative_real</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ExtendedReals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// extended_reals : type ❘ # ℝ∞ ❙</span><span class="w"> </span>
<span class="w">	</span><span class="cm">// reals_are_extended : ℝ &lt;* ℝ∞ ❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">infty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∞</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// leq : ℝ∞ ⟶ ℝ∞ ⟶ bool ❘ # 1 ≤ 2 prec 101 ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// TODO neginfty : ℝ∞ ❘ = - ∞ ❘ # -∞ ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w">  </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">FinSequences</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞arith:?NaturalArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">below</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] ⟨ x : ℕ | ⊦ x &lt; n ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">toBelow</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℕ} below (Succ n) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">toB</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">succBelow</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℕ} below n ⟶ below (Succ n) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">succB</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">belowIsSubtypeOfNat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℕ} (below n) &lt;* ℕ </span><span class=" -MMT_DD">❙</span><span class="w"></span>


<span class="w">	</span><span class="vc">belowToNat</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℕ} below (Succ n) ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">btn</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">belowToNatBaseCase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : ℕ} ⊦ belowToNat m (toBelow m) ≐ m</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">belowToNatRecCase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : ℕ, b : below (Succ m)} ⊦ belowToNat (Succ m) (succBelow (Succ m) b) ≐ belowToNat m b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">    </span><span class="vc">belowToNatExample</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ btn 3 (toB 3) ≐ 3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">belowToNatExample2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ btn 4 (succB (toB 3)) ≐ 3 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">belwoToNatExample2_2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ belowToNat (Succ 3) (succBelow (Succ 3) (toBelow 3)) ≐ 3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="cm">//	belowToNat2 : {n : ℕ} below (Succ  n) ⟶ ℕ ❘= [n, b] n ❘# btn2 %I1 ❙</span><span class="w"></span>
<span class="cm">//	belowToNat3 : {n : ℕ, m : ℕ} below n ⟶ ⊦ m &lt; n ⟶ ℕ ❘= [n , m , b, p ] m ❘#  btn3 %I1 ❙</span><span class="w"></span>
<span class="cm">//	belowToNat4 : {n : ℕ} below n ⟶ ⟨ ℕ | [x] ⊦ x &lt; n⟩ ❘# btn4 %I1❙</span><span class="w"></span>


<span class="w">	</span><span class="vc">finSeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ type ⟶ type </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n , A] below n ⟶ A  </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="vc">nonEmptyFinSeq_prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℕ, A : type} finSeq n A ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n, A , f] 0 &lt; n </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">nefs</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">disjointFinSeq_prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℕ, A : type} finSeq n A ⟶ bool</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">disjointFinSeq_prop_trivial</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{A : type,f : finSeq 0 A} ⊦ disjointFinSeq_prop 0 A f ≐ true</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">disjointFinSeq_prop_step</span><span class="w"> </span><span class="nc">//</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">{A : type , n : ℕ , f : </span>
<span class="nv">			finSeq (succ n) A} ⊦ disjointFinSeq_prop (succ n) A f ≐ ∀ [m1 : below (succ n)] ∀ [m2 : below (succ n)] ⊦ m1 ≠ m2 ⟶ ⊦ true </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">belowShift</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : ℕ , m : ℕ} below n ⟶ below (n + m)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="cm">//	belowShift_base : {n, b} ⊦ belowShift n 0 b ≐ b❙</span><span class="w"> </span>
<span class="w">	</span>
<span class="cm">//	finSeqSum : {n : ℕ , b : below n} ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleDerivatives</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealMetricSpace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?NaturalDeduction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FunctionLimit </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">axiom_neqImplNotZero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a : ℝ, b : ℝ} ⊦ neq ℝ a b ⟶ ⊦ neq ℝ (b - a) 0 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">idnz</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">differenceQuotient</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : ℝ ⟶ bool, f: pred P ⟶ ℝ, a: pred P}{x : pred P, p:⊦ neq ℝ a x}ℝ </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,f,a : pred P] ([x : pred P,p] ☞arith:?RealArithmetics?div ((f x) - (f a)) (x - a) (idnz p)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">prop_differentiableAt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : ℝ ⟶ bool}(pred P ⟶ ℝ) ⟶ pred P ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,f,a] prop_hasLimit_c (mpred P) ℝm ([x: pred P] neq ℝ a x) ([x,p] differenceQuotient P f a x p) a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   	</span>
<span class="w">   </span><span class="vc">prop_differentiable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : ℝ ⟶ bool}(pred P ⟶ ℝ) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">diff</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,f] ∀ [x : pred P] prop_differentiableAt P f x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span>
<span class="w">   </span><span class="cm">/T derivative: P as predicate of where derivative is defined, f as a function on P of value ℝ, p as the proof that f is differentiable on P❙</span><span class="w">		</span>
<span class="w">   </span><span class="vc">derivative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : ℝ ⟶ bool,f : pred P ⟶ ℝ, p : ⊦ diff f} pred P ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,f,p][a] limit_c (mpred P) ℝm ([x: pred P] neq ℝ a x) ([x,q] differenceQuotient P f a x q) a (forall_elim (pred P) ([x : pred P] prop_differentiableAt P f x) p a) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&#39;</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span><span class="cm">// defined as the limit of the diff_quotient on p, giving a proof that it is differentiable on P ❙</span><span class="w"></span>
<span class="w">   	</span>
<span class="w">   	</span><span class="vc">f</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pred ([x] true) ⟶ ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   	</span>

<span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">top</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">meta</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/mmt</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">//   author: Theresa Pollinger ❚</span><span class="w"></span>
<span class="w"> </span>
<span class="w"> </span>
<span class="cm">//   a lot of stuff here stolen from dgls.mmt xx: </span>
<span class="cm">//   To not make things too awful, I&#39;ve now fixed one ⋁ for a vectorspace; just for notational reasons. ❚</span><span class="w"></span>

<span class="cm">//   as &quot;domains&quot; is overloaded between disciplines: in numerical modeling, we are talking about finite, (singly) connected subspaces of ℝ^n as domains ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Intervals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞top:/arithmetics?RealArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞top:/algebra?RealField </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?RealMetricSpace </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">interval_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">leftPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">rightPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">predicate</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] leftPred left x ∧ rightPred x right </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">tp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pred predicate </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">interval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Intervals/interval_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">closedInterval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ interval </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] [&#39;</span>
<span class=" -MMT_ObjectExpression">		left := a,</span>
<span class=" -MMT_ObjectExpression">		right := b,</span>
<span class=" -MMT_ObjectExpression">		leftPred := ([x,y] x ≤ y),</span>
<span class=" -MMT_ObjectExpression">		rightPred := ([x,y] x ≤ y)</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OneCuboid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞top:/arithmetics?RealArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">oneCuboid_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">left</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">right</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">leftPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">rightPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">predicate</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] leftPred left x ∧ rightPred x right </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">tp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">pred predicate </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">interval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Intervals/interval_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">closed1Cuboid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ interval </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] [&#39;</span>
<span class=" -MMT_ObjectExpression">		left := a,</span>
<span class=" -MMT_ObjectExpression">		right := b,</span>
<span class=" -MMT_ObjectExpression">		leftPred := ([x,y] x ≤ y),</span>
<span class=" -MMT_ObjectExpression">		rightPred := ([x,y] x ≤ y)</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">[</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">]</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GeneralDomains</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞top:/arithmetics?NaturalNumbers </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞top:/algebra?RealField </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ball </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞top:/algebra?Vectorspace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">generalDomain_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞top:/algebra?Vectorspace/vectorspace_theory (realField) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace/metricSpace_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">dimension</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">domainPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">domain</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⟨ x : U | ⊦ domainPred x ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">boundaryPred1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b] ∀ [ε : ℝ+] ∃[x : domain] d x b &lt; ε </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">boundaryPred2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b] ∀ [ε : ℝ+] ∃[x : U] d x b &lt; ε ∧ ¬ domainPred x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">boundaryPred</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[b] boundaryPred1 b ∧ boundaryPred2 b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  	 </span><span class="vc">boundary</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⟨ x : U | ⊦ boundaryPred x ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  	 </span>
<span class="w">  </span><span class="vc">generalDomain</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?GeneralDomains/generalDomain_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w">  </span>

<span class="cm">// view IntervalsAsDomains : ?GeneralDomains/generalDomain_theory ⟶ ?Intervals/interval_theory =</span>
<span class="cm">    = ℝ ❙ </span>
<span class="cm">   // Dimension = 1 ❙</span>
<span class="cm">   DomainPred = interval_pred ❙</span>
<span class="cm">   BoundaryPred = boundary_pred ❙</span>
<span class="cm">   // vec_pred_as_sub = pred_as_sub ❙</span>
<span class="cm">❚</span><span class="w"> </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ms</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/measures</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LebesgueIntegral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ms:?Measure </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?Functions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?SetCollection </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SimpleFunctions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?SetSum </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?SupremumReal </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ms:?LebesgueMeasurable </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// include arith:?RealArithmetics ❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">simpleLebesgueIntegral</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{m : measureSpace , s : nonnegativeSimpleFunction  m }  ℝ </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">❘</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m , s] setSum  ((im (πl s) (fullset (m.universe))) : set ℝ) </span>
<span class=" -MMT_ObjectExpression">  (theorem_nonnegativeSimpleFunctionHasFiniteValues m s) (([x] x ⋅ (m.rmeasure.measure) (elem (m.sigma_algebra.coll) (preim (πl s) (single x)))) : ℝ ⟶ ℝ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="vc">upperFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a : type} (a ⟶ ℝ) ⟶ a ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[a , f , x ] max (f x) 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">lowerFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a : type} (a ⟶ ℝ) ⟶ a ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[a : type, f : a ⟶ ℝ, x : a] max (- f x) 0  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">lemma_upperFunctionIsNonNegative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type , f : A ⟶ ℝ} ⊦ prop_nonnegative_function (upperFunction A f) </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">upperFunctionIsNonNegative</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">lemma_lowerFunctionInNonNegative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type , f : A ⟶ ℝ} ⊦ prop_nonnegative_function (lowerFunction A f)  </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">lowerFunctionInNonNegative</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w"> </span>
<span class="w">	</span><span class="vc">positiveLebesgueIntegral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measureSpace, f : (m.universe ⟶ ℝ)} ⊦ lebesgueMeasurableLeq (m.sigma_algebra) f ⟶</span>
<span class=" -MMT_ObjectExpression">	⊦ prop_nonnegative_function f  ⟶ ℝ </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m , f, p1,p2] supR ( im (simpleLebesgueIntegral m) ( ⟪ fullset (nonnegativeSimpleFunction m) | ([ff] (∀[x] ((πl ff) x) ≤ (f x))) ⟫ )) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="vc">lemma_lebesgueMeasurableFunctionUpperLebesgueMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_ObjectExpression">{A : type , s : sigmaAlgebra A, f : A ⟶ ℝ} ⊦ lebesgueMeasurableLeq s f ⟶ ⊦ lebesgueMeasurableLeq s (upperFunction A f)  </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">lebesgueMeasurableFunctionUpperLebesgueMeasurable</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">lemma_lebesgueMeasurableFunctionLowerLebesgueMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_ObjectExpression">{A : type , s : sigmaAlgebra A, f : A ⟶ ℝ} ⊦ lebesgueMeasurableLeq s f ⟶ ⊦ lebesgueMeasurableLeq s (lowerFunction A f)  </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">lebesgueMeasurableFunctionLowerLebesgueMeasurable</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">lebesgueIntegrable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ms : measureSpace, f : (ms.universe ⟶ ℝ)} ⊦ lebesgueMeasurableLeq (ms.sigma_algebra) f ⟶ bool</span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ms, f , p] positiveLebesgueIntegral ms (upperFunction (ms.universe) f) </span>
<span class=" -MMT_ObjectExpression">	(lebesgueMeasurableFunctionUpperLebesgueMeasurable (ms.sigma_algebra) f p) </span>
<span class=" -MMT_ObjectExpression">	(upperFunctionIsNonNegative f)</span>
<span class=" -MMT_ObjectExpression">	&lt; ∞ ∧ positiveLebesgueIntegral ms (lowerFunction (ms.universe) f) </span>
<span class=" -MMT_ObjectExpression">	(lebesgueMeasurableFunctionLowerLebesgueMeasurable (ms.sigma_algebra) f p) </span>
<span class=" -MMT_ObjectExpression">	(lowerFunctionInNonNegative f)</span>
<span class=" -MMT_ObjectExpression">	&lt; ∞ </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">quasiIntegrable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ms : measureSpace , f : (ms.universe ⟶ ℝ)} ⊦ lebesgueMeasurableLeq (ms.sigma_algebra) f ⟶ bool </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ms, f , p] positiveLebesgueIntegral ms (upperFunction (ms.universe) f) </span>
<span class=" -MMT_ObjectExpression">	(lebesgueMeasurableFunctionUpperLebesgueMeasurable (ms.sigma_algebra) f p) </span>
<span class=" -MMT_ObjectExpression">	(upperFunctionIsNonNegative f)</span>
<span class=" -MMT_ObjectExpression">	&lt; ∞ ∨ positiveLebesgueIntegral ms (lowerFunction (ms.universe) f) </span>
<span class=" -MMT_ObjectExpression">	(lebesgueMeasurableFunctionLowerLebesgueMeasurable (ms.sigma_algebra) f p) </span>
<span class=" -MMT_ObjectExpression">	(lowerFunctionInNonNegative f)</span>
<span class=" -MMT_ObjectExpression">	&lt; ∞ </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">lebesgueIntegral</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measureSpace ,f : ((m.universe ⟶ ℝ)) , </span>
<span class=" -MMT_ObjectExpression">	p1 : ⊦ lebesgueMeasurableLeq (m.sigma_algebra) f}  ⊦  quasiIntegrable m f p1 ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w">  </span>
<span class="w">	 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m,f, p1 , p2] </span>
<span class=" -MMT_ObjectExpression">	(positiveLebesgueIntegral m (upperFunction (m.universe) f) </span>
<span class=" -MMT_ObjectExpression">	(lebesgueMeasurableFunctionUpperLebesgueMeasurable (m.sigma_algebra) f p1) </span>
<span class=" -MMT_ObjectExpression">	(upperFunctionIsNonNegative f) : ℝ) + </span>
<span class=" -MMT_ObjectExpression">	(- (positiveLebesgueIntegral m (lowerFunction (m.universe) f) </span>
<span class=" -MMT_ObjectExpression">	(lebesgueMeasurableFunctionLowerLebesgueMeasurable (m.sigma_algebra) f p1) </span>
<span class=" -MMT_ObjectExpression">	(lowerFunctionInNonNegative f) : ℝ))</span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>

<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ms</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/measures</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SimpleFunctions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ms:?Measure </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?Functions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ms:?PowerSigmaAlgebra </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ms:?BorelMeasurable </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="cm">//	include top:?RealTopology ❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_nonnegative_function</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A ⟶ ℝ) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A , f] ∀ [x : A] (0 : ℝ) ≤ ((f x) : ℝ) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">prop_nonnegative_function</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">prop_simpleFunction</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measurableSpace } (m.universe ⟶ ℝ) ⟶ bool </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m , f] (im f (fullset (m.universe))) finite ∧ </span>
<span class=" -MMT_ObjectExpression">	(∀ [x]  x ∈ im f (fullset m.universe) ⇒ preim f (single x)  ∈ (m.sigma_algebra.coll)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">simpleFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">measurableSpace ⟶ type </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m] Σ f : (m.universe ⟶ ℝ) . ⊦ prop_simpleFunction m f   </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">nonnegativeSimpleFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">measurableSpace ⟶ type  </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m] Σ f: (m.universe ⟶ ℝ) . ⊦ prop_simpleFunction m f  ∧ prop_nonnegative_function f </span><span class=" -MMT_DD">❙</span><span class="w"> </span>

<span class="w">	</span><span class="vc">simpleFunctionIsMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m1 : measurableSpace  , f : simpleFunction m1} ⊦ measurable (m1.sigma_algebra) (powerSigmaAlgebra ℝ) (πl f) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">simpleFunctionIsBorelMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ m : measurableSpace , s : simpleFunction m} </span>
<span class=" -MMT_ObjectExpression">	⊦  realBorelMeasurable (m.universe) (m.sigma_algebra) (πl s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">theorem_simpleFunctionHasFiniteValues</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measurableSpace, S : simpleFunction m} ⊦ (im (πl S) (fullset (m.universe))) finite </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">simpleFunctionHasFiniteValues</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">theorem_nonnegativeSimpleFunctionHasFiniteValues</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measurableSpace, S : nonnegativeSimpleFunction m} ⊦ (im (πl S) (fullset (m.universe))) finite </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">nonnegativeSimpleFunctionHasFiniteValues</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w">                                                                                 </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">algebra</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">topo</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/topology</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetricSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arithmetics?RealArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?SetStructures </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">signature_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?SetStructures/setstruct_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">d</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">signature</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?MetricSpace/signature_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="vc">prop_nonNegative</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{G : type, d : G ⟶ G ⟶ ℝ} prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,d] ∀[x]∀[y] 0 ≤ d x y </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">prop_identityOfIndiscernibles</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{G : type, d : G ⟶ G ⟶ ℝ} prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,d] ∀[x]∀[y] d x y ≐ 0 ⇒ x ≐ y  </span><span class=" -MMT_DD">❙</span><span class="w">   </span>
<span class="w">	</span><span class="vc">prop_positiveDefinite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type, d : G ⟶ G ⟶ ℝ^+ }prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,d] prop_nonNegative G d ∧ prop_identityOfIndiscernibles G d </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_symmetric</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{G : type, d : G ⟶ G ⟶ ℝ} prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G][d] ∀[x]∀[y]  d x y  ≐ d y x  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">prop_pseudoMetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type, d : G ⟶ G ⟶ ℝ^+} prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,d] prop_positiveDefinite G d ∧ prop_symmetric G d </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">pseudoMetricSpace_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?SetStructures/setstruct_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">d</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ ℝ^+ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_isPseudoMetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_pseudoMetric U d </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">pseudoMetricSpace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?MetricSpace/pseudoMetricSpace_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_triangleInequality</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{G : type, d : G ⟶ G ⟶ ℝ} prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G][d] ∀[x]∀[y]∀[z] (d x z)  ≤ ((d y x) + (d y z))  </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">metricSpace_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace/pseudoMetricSpace_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_triangleInequality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_triangleInequality U d </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">metricSpace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?MetricSpace/metricSpace_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// metricSpace : type ⟶ type  ❘ # metricSpace 1 ❙</span><span class="w"> </span><span class="cm">// = [A] ⟨metricspace | ([G] ⊦ A ≐≐ G.universe)⟩❘</span>
<span class="cm">  </span>
<span class="cm">	distanceFunction : type ⟶ type ❘ = ⟨A ⟶ A ⟶ ℝ | ([x] ⊦ ∃[G: metricSpace] x ≐ G.d)⟩ ❘ # distanceFunction 1 ❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">metric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: metricSpace} (G.universe ⟶ G.universe ⟶ ℝ) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">d</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G][a][b] (G.d) a b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetricMonoid</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra?Monoid</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">metricMonoid_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra?Monoid/monoid_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace/metricSpace_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">metricMonoid</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?MetricMonoid/metricMonoid_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Ball</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?AllSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">openBall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M: metricSpace} M.universe ⟶ ℝ ⟶ set (M.universe) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[M][a][ε] ⟪ (doms M) | ([x] (d x a) &lt; ε) ⟫ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">B_</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">closedBall</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M: metricSpace} M.universe ⟶ ℝ ⟶ set (M.universe) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[M][a][ε] ⟪ (doms M) | ([x] (d x a) ≤ ε) ⟫ </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// MiKo: how to do \overline{B} in the notation? ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">MetricSpaceAsTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Ball </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞topo:?HausdorffTopology </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// Why only Hausdorff? Don&#39;t we obtain even stronger conditions (normal?)? ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// A: as soon as we formalized those, sure :) ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">openColl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace} set (set (dom M)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_ballIsOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace, a : M.universe, ε : ℝ} ⊦ (openBall M a ε) ∈ (openColl M) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_emptyIsOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace} ⊦ prop_emptyInColl (openColl M) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">emptyisopen</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_fullIsOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace} ⊦ prop_fullInColl (openColl M) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">fullisopen</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_unionIsOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace} ⊦ prop_unionInColl (openColl M) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">unionisopen</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">axiom_intersectionIsOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace} ⊦ prop_finiteIntersection (openColl M) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">intersectionisopen</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">axiom_metricIsHausdorff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace} ⊦ hausdorffProperty (dom M) (openColl M) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">miHaus</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">metricAsTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M : metricSpace}hausdorffTopology (dom M) </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[M] [&#39; </span>
<span class=" -MMT_ObjectExpression">			universe := M.universe, </span>
<span class=" -MMT_ObjectExpression">			d := M.d,</span>
<span class=" -MMT_ObjectExpression">			axiom_isPseudoMetric := M.axiom_isPseudoMetric,</span>
<span class=" -MMT_ObjectExpression">			axiom_triangleInequality := M.axiom_triangleInequality,</span>
<span class=" -MMT_ObjectExpression">			coll := openColl M,</span>
<span class=" -MMT_ObjectExpression">			axiom_empty := axiom_emptyIsOpen M,</span>
<span class=" -MMT_ObjectExpression">			axiom_full := axiom_fullIsOpen M,</span>
<span class=" -MMT_ObjectExpression">			☞?OML?axiom_union := axiom_unionIsOpen M,</span>
<span class=" -MMT_ObjectExpression">			axiom_intersection := axiom_intersectionIsOpen M,</span>
<span class=" -MMT_ObjectExpression">			ishausdorff := miHaus M</span>
<span class=" -MMT_ObjectExpression">		&#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">RealMetricSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arithmetics?RealArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">realmetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ ℝ ⟶ ℝ^+ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] | a - b | </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ds</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">axiom_realIsPseudoMetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_pseudoMetric ℝ realmetric </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">axiom_triangleReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_triangleInequality ℝ realmetric </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">realmetricspace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">metricSpace </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39; </span>
<span class=" -MMT_ObjectExpression">   			universe := ℝ, </span>
<span class=" -MMT_ObjectExpression">   			d := realmetric, </span>
<span class=" -MMT_ObjectExpression">   			axiom_isPseudoMetric := axiom_realIsPseudoMetric,</span>
<span class=" -MMT_ObjectExpression">   			axiom_triangleInequality := axiom_triangleReal</span>
<span class=" -MMT_ObjectExpression">   		&#39;] </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ℝm</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w">   </span>
<span class="w">   		</span>
<span class="w">   	</span>
<span class="w">   </span><span class="vc">axiom_predRealIsPseudoMetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : ℝ ⟶ bool} ⊦ prop_pseudoMetric (pred P) realmetric  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pseudom</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">axiom_predTriangle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : ℝ ⟶ bool} ⊦ prop_triangleInequality (pred P) realmetric </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">realmet</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">realSubMetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : ℝ ⟶ bool} metricSpace </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P] [&#39; </span>
<span class=" -MMT_ObjectExpression">   			universe := pred P, </span>
<span class=" -MMT_ObjectExpression">   			d := [a : pred P][b : pred P] realmetric a b,</span>
<span class=" -MMT_ObjectExpression">   			axiom_isPseudoMetric := pseudom P,</span>
<span class=" -MMT_ObjectExpression">   			axiom_triangleInequality := realmet P</span>
<span class=" -MMT_ObjectExpression">   		&#39;] </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">mpred</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span>
<span class="w">   </span><span class="vc">axiom_mpredIsSuptype</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : ℝ ⟶ bool} (mpred P).universe &lt;* ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Sequences</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?AllSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// MiKo: should G here not be a metric space? ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">sequence</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: type}type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] ℕ ⟶ G </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^ω</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">structseq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : setstruct}type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] (G.universe)^ω </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">^ω</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="cm">// prop_isSupremum : {G: metricSpace} G^ω ⟶ G.universe ⟶ prop  ❘</span>
<span class="cm">   		= [G,a,l] ∀[ε : ℝ+] (∀[n : ℕ] a n &lt; l + ε) ∧ (∃[n : ℕ] a n &gt; l - ε) ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// prop_isInfimum : {G: metricSpace} G^ω ⟶ G.universe ⟶ prop  ❘</span>
<span class="cm">   		= [G,a,l] ∀[ε : ℝ+] (∀[n : ℕ] a n &gt; l - ε) ∧ (∃[n : ℕ] a n &lt; l + ε) ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// prop_hasSupremum : {G: metricSpace} G^ω ⟶ prop  ❘</span>
<span class="cm">   		= [G,a] ∃![g] prop_isSupremum G a g   ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// prop_hasInfimum : {G: metricSpace} G^ω ⟶ prop  ❘</span>
<span class="cm">   		= [G,a] ∃![g] prop_isInfimum G a g    ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// supremum : {G : metricSpace, a : G^ω, p : ⊦ prop_hasSupremum G a} dom G ❘</span>
<span class="cm">   		= [G, a, p] that (dom G) ([g] prop_isSupremum G a g) p ❘</span>
<span class="cm">   		# sup 2 %I3 ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// infimum : {G : metricSpace, a : G^ω, p : ⊦ prop_hasInfimum G a} dom G ❘</span>
<span class="cm">   		= [G, a, p] that (dom G) ([g] prop_isInfimum G a g) p ❘</span>
<span class="cm">   		# inf 2 %I3 ❙</span><span class="w"></span>
<span class="w">   	</span><span class="cm">// All of this stuff is only applicable to the real numbers, due to the usage of orders, addition etc. directly on elements of the</span>
<span class="cm">   		domain. Possibly can be generalized ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SequenceConvergence</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Sequences </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">prop_converges</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: metricSpace} G^ω ⟶ G.universe ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,a,l] ∀[ε : ℝ+]∃[n : ℕ] ∀[m : ℕ] (m ≥ n) ⇒ (d (a m) l) &lt; ε </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_convergent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: metricSpace} G^ω ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,a] ∃![g] prop_converges G a g   </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">            </span>
<span class="w">	</span><span class="cm">// isLimitSupremum : {G: metricSpace} G^ω ⟶ G.universe ⟶ prop  ❘</span>
<span class="cm">		// = [G,a,l] ∀[ε : ℝ+] (∀[N : ℕ] ∃[n : ℕ] (n ≥ N) ∧ (a n &gt; l - ε)) ∧ (∃[N : ℕ] ∀[n : ℕ] (n ≥ N) ⇒ (a n &lt; l + ε)) ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// isLimitInfimum : {G: metricSpace} G^ω ⟶ G.universe ⟶ prop  ❘</span>
<span class="cm">		//  = [G,a,l] ∀[ε : ℝ+] (∀[N : ℕ] ∃[n : ℕ] (n ≥ N) ∧ (a n &lt; l + ε)) ∧ (∃[N : ℕ] ∀[n : ℕ] (n ≥ N) ⇒ (a n &gt; l - ε)) ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// hasLimitSupremum : {G: metricSpace} G^ω ⟶ prop  ❘</span>
<span class="cm">		// = [G,a] ∃![g] isLimitSupremum G a g   ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// hasLimitInfimum : {G: metricSpace} G^ω ⟶ prop  ❘</span>
<span class="cm">		// = [G,a] ∃![g] isLimitInfimum G a g    ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// limitSupremum : {G : metricSpace, a : G^ω, p : ⊦ hasLimitSupremum G a} dom G ❘</span>
<span class="cm">		//   = [G, a, p] that (dom G) ([g] isLimitSupremum G a g) p ❘</span>
<span class="cm">		// # limsup 2 %I3 ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// limitInfimum : {G : metricSpace, a : G^ω, p : ⊦ hasLimitInfimum G a} dom G ❘</span>
<span class="cm">		//  = [G, a, p] that (dom G) ([g] isLimitInfimum G a g) p ❘</span>
<span class="cm">		// # liminf 2 %I3 ❙</span><span class="w"></span>
<span class="w">         </span>
<span class="w">	</span><span class="vc">prop_isLimit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: metricSpace} G^ω ⟶ G.universe ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,a,l] ∀[ε : ℝ+] ∀[N : ℕ] ∃[n : ℕ] (n ≥ N) ∧ ((d (a n) l) &lt; ε) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_hasLimit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: metricSpace} G^ω ⟶ prop  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,a] ∃![g] prop_isLimit G a g    </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">limit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : metricSpace, a : G^ω, p : ⊦ prop_convergent G a} G.universe </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G, a, p] that (G.universe) ([g : G.universe] prop_converges G a g) p </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">#</span><span class="w"> </span><span class="ss">lim</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">    	      </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">FunctionLimit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T p is the limit of f at &quot;point&quot; a, where A is the larger space and is restricted by cond ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">/T *_c-variants: only on pred_as_subs, all the others on ℝ ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">prop_isLimit_c</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : metricSpace,B: metricSpace, cond : A.universe ⟶ prop} ({x : A.universe,p:⊦ cond x}B.universe) ⟶ A.universe ⟶ B.universe ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,cond][f][a,l] ∀[ε:ℝ+] ε &gt; 0 ⇒ ∃[δ : ℝ] δ &gt; 0 ∧ ∀[x : A.universe] ∀[p : ⊦ cond x] (d x a) &lt; δ ⇒ (d (f x p) l) &lt; ε </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">prop_hasLimit_c</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : metricSpace,B: metricSpace, cond : A.universe ⟶ prop} ({x : A.universe,p:⊦ cond x}B.universe) ⟶ A.universe ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,cond,f,a] ∃![l : B.universe] prop_isLimit_c A B cond f a l </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">prop_isLimit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : metricSpace,B: metricSpace} (A.universe ⟶ B.universe) ⟶ A.universe ⟶ B.universe ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,a,l] prop_isLimit_c A B ([x]true) ([x,p] f x) a l </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">prop_hasLimit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : metricSpace,B: metricSpace} (A.universe ⟶ B.universe) ⟶ A.universe ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,a] ∃![l : B.universe] prop_isLimit A B f a l</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">limit_c</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : metricSpace, B: metricSpace, cond : A.universe ⟶ prop, f : {x : A.universe,p:⊦ cond x}B.universe, a : A.universe, p : ⊦ prop_hasLimit_c A B cond f a} B.universe </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,cond,f,a,p] that (B.universe) ([b:B.universe] prop_isLimit_c A B cond f a b) p </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">limit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : metricSpace, B: metricSpace, f : A.universe ⟶ B.universe, a : A.universe, p : ⊦ prop_hasLimit A B f a} B.universe </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">   		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,a,p] that (B.universe) ([b] prop_isLimit A B f a b) p </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Completeness</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricSpace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SequenceConvergence </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// d(x_k , x_l ) → 0 for k, l → ∞ ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">cauchy</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M: metricSpace} (ℕ ⟶ M.universe) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[M, seq] ∀[ε : ℝ+] ∀[N : ℕ] ∃[k : ℕ] ∃[l : ℕ] (k ≥ N) ∧ (l &gt; k) ∧ ((d (seq k) (seq l)) &lt; ε) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">cauchy</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// every Cauchy sequence in M converges ❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">complete</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{M: metricSpace} prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[M] ∀[seq] cauchy seq ⇒ prop_convergent M seq </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">complete</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// MiKo: maybe we should refactor the iterated operation construction into $?monoid$ with the axioms ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Series</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SequenceConvergence </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?MetricMonoid </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">partialSum</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : metricMonoid} G^ω ⟶ ℕ ⟶ (G.universe) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">parSum</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">axiom_partialSumBase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : metricMonoid} ⊦ ∀[S : G^ω] parSum S 0 ≐ (G.unit) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">axiom_partialSumStep</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : metricMonoid} ⊦ ∀[S : G^ω] ∀[n] parSum S (succ_nat_lit n) ≐ (G.op) (parSum S n) (S (succ_nat_lit n)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_convergent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : metricMonoid} G^ω ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G][S] prop_convergent G ([n] parSum S n) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">series</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : metricMonoid, S: G^ω} dom G </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] lim (partialSum G S) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">SUM</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/categories</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="cm">// import type http://mathhub.info/MitM/interfaces/TypeConstructors ❚</span><span class="w">                              </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Categories</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">category_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">𝒰 10 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">hom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ 𝒰 10 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ihom</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c:U} ihom a b ⟶ ihom b c ⟶ ihom a c </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">∘m</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	    </span><span class="vc">identity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:U} ihom a a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">iid</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,d:U} ⊦ ∀[f:ihom a b] ∀[g:ihom b c] ∀[h:ihom c d] h ∘m (g ∘m f) ≐ (h ∘m g) ∘m f </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_id_r</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:U,a:U} ⊦ ∀[f:ihom a x] f ∘m iid ≐ f </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_id_l</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:U,a:U} ⊦ ∀[f:ihom x a] iid ∘m f ≐ f </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">		</span><span class="vc">prop_isomorphism</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f:ihom A B] ∃ [g] g ∘m f ≐ iid ∧ f ∘m g ≐ iid </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_isomorphic</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">prop_isomorphic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] ∃[f : ihom A B] prop_isomorphic f </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≅</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">category</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Categories/category_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Cat</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">objects</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Cat ⟶ 𝒰 10 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[𝒞] 𝒞.universe </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">morphisms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{𝒞: Cat} |𝒞| ⟶ |𝒞| ⟶ 𝒰 10 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[𝒞,a,b] (𝒞.hom) a b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">hom</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">hom_composition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{𝒞:Cat,a,b,c:|𝒞|} hom a b ⟶ hom b c ⟶ hom a c </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[𝒞,a,b,c,f,g] (𝒞.comp) a b c f g </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class="ss">∘</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">id</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{𝒞:Cat,a:|𝒞|} hom a a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[𝒞,a] (𝒞.identity) a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">id</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Opposite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Categories </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">opposite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">category ⟶ category </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[𝒞] [&#39;</span>
<span class=" -MMT_ObjectExpression">        universe := (𝒞.universe) ,</span>
<span class=" -MMT_ObjectExpression">        hom := ([a,b] hom b a) ,</span>
<span class=" -MMT_ObjectExpression">        comp := ([a,b,c][f,g] f ∘ g),</span>
<span class=" -MMT_ObjectExpression">        identity := ([a] id a),</span>
<span class=" -MMT_ObjectExpression">        axiom_assoc := ([a,b,c,d] trivial),</span>
<span class=" -MMT_ObjectExpression">        axiom_id_r := ([a,b] trivial),</span>
<span class=" -MMT_ObjectExpression">        axiom_id_l := ([a,b] trivial)</span>
<span class=" -MMT_ObjectExpression">    &#39;] </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">op</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Product</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Categories </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?ProductTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">product</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Cat ⟶ Cat ⟶ Cat </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[𝒞,𝒟] [&#39;</span>
<span class=" -MMT_ObjectExpression">        universe := ((𝒞.universe) × (𝒟.universe)) ,</span>
<span class=" -MMT_ObjectExpression">        hom := ([a,b] (hom (πl a) (πl b)) × (hom (πr a) (πr b))) ,</span>
<span class=" -MMT_ObjectExpression">        comp := ([a,b,c][f,g] ⟨(πl g) ∘ (πl f),(πr g) ∘ (πr f) ⟩ ),</span>
<span class=" -MMT_ObjectExpression">        identity := ([a] ⟨ id (πl a), id (πr a) ⟩),</span>
<span class=" -MMT_ObjectExpression">        axiom_assoc := ([a,b,c,d] trivial),</span>
<span class=" -MMT_ObjectExpression">        axiom_id_r := ([a,b] trivial),</span>
<span class=" -MMT_ObjectExpression">        axiom_id_l := ([a,b] trivial)</span>
<span class=" -MMT_ObjectExpression">    &#39;] </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">×C</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ArrowCategory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Categories </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?ProductTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// include base:?Subtyping ❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">arr</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Cat ⟶ Cat </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [𝒞] [&#39;</span>
<span class="cm">        universe := (Σ A : | 𝒞 |, B : | 𝒞 |. hom A B) ,</span>
<span class="cm">        dom : universe ⟶ type := [tr] πl tr ,</span>
<span class="cm">        cod : universe ⟶ type := [tr] πl ( πr tr) ,</span>
<span class="cm">        arrow : universe ⟶ type := [tr] πr (πr) ,</span>
<span class="cm">        hom := ([a,b] Σ p : ((hom (dom a) (dom b)) × (hom (cod a) (cod b))) . ⊦ (πr p) ∘ a ≐ b ∘ (πl p) ) ,</span>
<span class="cm">        comp := ([a,b,c][f,g] ⟨⟨(πl (πl g)) ∘ (πl (πl f)),(πr (πl g)) ∘ (πr (πl f)) ⟩,trivial ⟩ ),</span>
<span class="cm">        identity := ([a] ⟨⟨ id (dom a), id (cod a) ⟩, trivial⟩),</span>
<span class="cm">        axiom_assoc := ([a,b,c,d] trivial),</span>
<span class="cm">        axiom_id_r := ([a,b] trivial),</span>
<span class="cm">        axiom_id_l := ([a,b] trivial)</span>
<span class="cm">    &#39;] </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">×C</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// Definiens fails ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>



<span class="kd">theory</span><span class="w"> </span><span class="nc">SmallCategories</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">small_category_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    	</span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    	</span><span class="vc">hom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ihom</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    	</span><span class="vc">comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c:U} ihom a b ⟶ ihom b c ⟶ ihom a c </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">∘m</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    	</span><span class="vc">identity</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a:U} ihom a a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">iid</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    	</span><span class="vc">axiom_assoc</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b,c,d:U} ⊦ ∀[f:ihom a b] ∀[g:ihom b c] ∀[h:ihom c d] h ∘m (g ∘m f) ≐ (h ∘m g) ∘m f </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    	</span><span class="vc">axiom_id_r</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:U,a:U} ⊦ ∀[f:ihom a x] f ∘m iid ≐ f </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    	</span><span class="vc">axiom_id_l</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{x:U,a:U} ⊦ ∀[f:ihom x a] iid ∘m f ≐ f </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">small_category</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?SmallCategories/small_category_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">SCat</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Categories </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// theory CategoryOfSmallCategories : base:?Logic =</span>
<span class="cm">    include ?Functors ❙</span>
<span class="cm">    include ?SmallCategories ❙</span>
<span class="cm">    include base:?InformalProofs ❙</span>

<span class="cm">    Instance functor_composition (𝒞 : Cat, 𝒟 : Cat, E : Cat, F : functor 𝒞 𝒟, G : functor 𝒟 E) (functor 𝒞 E) ❘ =</span>
<span class="cm">        objF = [c : |𝒞|] objF G (objF F c) ❙</span>
<span class="cm">        homF : {A,B} hom A B ⟶ hom (objF A) (objF B) ❘ = [A,B][f] homF G (homF F f) ❘ # ihomF 3 ❙</span>
<span class="cm">        axiom_id : {A:|𝒞|} ⊦ ihomF (id A) ≐ id (objF A) ❘ = [A] sketch &quot;trivial&quot; ❙</span>
<span class="cm">        axiom_comp: {A:|𝒞|,B:|𝒞|,C:|𝒞|}{f : hom A B, g : hom B C} ⊦ ihomF (g ∘ f) ≐ (ihomF g) ∘ (ihomF f) ❘ = [A,B,C][f,g] sketch &quot;trivial&quot; ❙</span>
<span class="cm">    ❚</span><span class="w"> </span><span class="cm">//</span>

<span class="cm">    Instance small_categories () Cat ❘ =</span>
<span class="cm">        universe = SCat ❙</span>
<span class="cm">        hom = [𝒞:universe,𝒟:universe] functor 𝒞 𝒟 ❙</span>
<span class="cm">        comp = [A:universe,B:universe,C:universe][f : hom A B,g : hom B C] functor_composition A B C f g ❙</span>
<span class="cm">    ❚</span><span class="w"> </span><span class="cm">//</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/categories</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Functors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Categories </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">functor_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> 𝒞 : Cat, 𝒟 : Cat ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">objF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">|𝒞| ⟶ |𝒟| </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">homF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} hom A B ⟶ hom (objF A) (objF B) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">ihomF</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_id</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:|𝒞|} ⊦ ihomF (id A) ≐ id (objF A) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_comp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:|𝒞|,B:|𝒞|,C:|𝒞|}{f : hom A B, g : hom B C} ⊦ ihomF (g ∘ f) ≐ (ihomF g) ∘ (ihomF f) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">functor</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[𝒞:Cat,𝒟:Cat] Mod ☞?Functors/functor_theory 𝒞 𝒟 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">objectF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{𝒞,𝒟} functor 𝒞 𝒟 ⟶ |𝒞| ⟶ |𝒟| </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[𝒞,𝒟][F] F.objF </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">objF</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">morphismF</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{𝒞,𝒟} {F :functor 𝒞 𝒟} {A:|𝒞|,B:|𝒞|} hom A B ⟶ hom ((F.objF) A) ((F.objF) B) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[𝒞,𝒟][F][A,B][f] (F.homF) A B f </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">homF</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">6</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NaturalTransformations</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Functors </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">naturaltransformation_theory</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> 𝒞 : Cat, 𝒟 : Cat, F : functor 𝒞 𝒟, G : functor 𝒞 𝒟 ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="vc">alpha</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{C: |𝒞|} hom (objF F C) (objF G C) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">axiom_alpha_commutes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{c : |𝒞|, cp : |𝒞|} ⊦ ∀[f:hom c cp]</span>
<span class=" -MMT_ObjectExpression">          (homF G f) ∘ (alpha c) ≐ (alpha cp) ∘ (homF F f) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">    </span><span class="vc">naturaltransformation</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[𝒞 : Cat, 𝒟 : Cat, F : functor 𝒞 𝒟, G : functor 𝒞 𝒟]</span>
<span class=" -MMT_ObjectExpression">        Mod ☞?NaturalTransformations/naturaltransformation_theory 𝒞 𝒟 F G </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">natTrans</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/categories</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CategoryOfSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Categories </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets?ZFC </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets?SetTypeConversions </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">composition_of_functions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t,r} (elem s ⟶ elem t) ⟶ (elem t ⟶ elem r) ⟶ (elem s ⟶ elem r) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s,t,r] [f,g] [x] g (f x) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">∘c</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">cSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">category </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">        universe := set ,</span>
<span class=" -MMT_ObjectExpression">        hom := ([s,t] (elem s) ⟶ (elem t)) ,</span>
<span class=" -MMT_ObjectExpression">        comp := composition_of_functions ,</span>
<span class=" -MMT_ObjectExpression">        identity := ([s] [x : elem s] x) ,</span>
<span class=" -MMT_ObjectExpression">        axiom_assoc := ([a,b,c,d] trivial) ,</span>
<span class=" -MMT_ObjectExpression">        axiom_id_r := ([x,u] trivial) ,</span>
<span class=" -MMT_ObjectExpression">        axiom_id_l := ([x,u] trivial)</span>
<span class=" -MMT_ObjectExpression">    &#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Temp</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets?ZFC </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation/sets?SetTypeConversions </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">Image</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t}{f: elem s ⟶ elem t} elem (℘ s) ⟶ elem (℘ t) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Im</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">Preimage</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s,t}{f: elem s ⟶ elem t} elem (℘ t) ⟶ elem (℘ s) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">PreIm</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowersetFunctors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CategoryOfSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Functors </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Opposite </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Temp </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">covariantPowersetFunctor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">functor cSet cSet </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">            objF := ([A] ℘ A),</span>
<span class=" -MMT_ObjectExpression">            homF := ([A,B][f] [x] Im x f),</span>
<span class=" -MMT_ObjectExpression">            axiom_id := ([x] trivial) ,</span>
<span class=" -MMT_ObjectExpression">            axiom_comp := ([a,b,c,f,g] trivial)</span>
<span class=" -MMT_ObjectExpression">        &#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">contravariantPowersetFunctor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">functor (cSet op) cSet </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [&#39;</span>
<span class="cm">            objF := ([A] ℘ A),</span>
<span class="cm">            homF := ([A,B][f] [x] PreIm x f),</span>
<span class="cm">            axiom_id := ([x] trivial) ,</span>
<span class="cm">            axiom_comp := ([a,b,c,f,g] trivial)</span>
<span class="cm">        &#39;] </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// Definiens takes forever ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Coalgebras</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?CategoryOfSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Functors </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">coalgebra_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="vc">T</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">functor cSet cSet </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">C</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">gamma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elem C ⟶ elem (objectF cSet cSet T C) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/collections</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Properties</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetCollection </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_emptyInColl</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{G : type}collection G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] ∅ ∈ C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_emptyInColl</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_fullInColl</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{G : type}collection G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] (fullset G) ∈ C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_fullInColl</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_unionInColl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] ∀[S] S ⊑ C ⇒ UNION S ∈ C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_unionInColl</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_intersectionInColl</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] ∀[S] S ⊑ C ∧ INTERSECT S ∈ C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_intersectionInColl</span><span class="w">  </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_finiteIntersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] ∀[A]∀[B] A ∈ C ∧ B ∈ C ⇒ (A ∩ B) ∈ C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_finiteIntersection</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_finiteUnion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] ∀[A]∀[B] A ∈ C ∧ B ∈ C ⇒ (A ∪ B) ∈ C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_finiteUnion</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_subsetClosed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] ∀[S] ∀[T] S ∈ C ∧ T ⊑ S ⇒ T ∈ C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_subsetClosed</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_cover</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G ⟶ set G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C,S] S ⊑ UNION C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">covers</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_subcover</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G ⟶ collection G ⟶ set G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C,D,S] C ⊑ D ∧ C covers S </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">subcover</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">on</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_pairwiseDisjoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] ∀[S] ∀[T] S ∈ C ∧ T ∈ C ⇒ disjoint S T </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">pairwiseDisjoint</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_closedUnderComplements</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}collection G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] ∀[S] (S ∈ C) ⇒ (compl S) ∈ C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_closedUnderComplements</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Partition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Properties </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">prop_isPartition</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type} collection G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] C covers (fullset G) ∧ ¬ (prop_emptyInColl C) ∧ pairwiseDisjoint C </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	  </span><span class="p">#</span><span class="w"> </span><span class="ss">isPartition</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	  </span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">partition_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetCollection/setColl_theory (X) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_covers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ coll covers (fullset X) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_nonEmpty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ¬ (∅ ∈ coll) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_pairwisedisjoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ pairwiseDisjoint coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">partition</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type] Mod ☞?Partition/partition_theory (X) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// theory TaggedPartition : base:?Logic =</span>
<span class="cm">	include ?Partition ❙</span>
<span class="cm">	include ts:?TaggedCollectoin ❙</span>
<span class="cm">	</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/collections</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Matroids</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Properties </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?FiniteCardinality </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arithmetics?NaturalArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">matroid_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetCollection/setColl_theory (X) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">axiom_finite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{s : set X} ⊦ s ∈ coll ⟶ ⊦ s finite </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_emptyInColl coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_subset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_subsetClosed coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_augmentation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀ [A] ∀ [B] A ∈ coll ∧ B ∈ coll ∧ | B | ≤ | A | </span>
<span class=" -MMT_ObjectExpression">				⇒ ∃ [x] x ∈ (A \ B) ∧ (B ∪ (single x)) ∈ coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Weierstrass_model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞http://mathhub.info/MitM/core/typedsets?Injective </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?Vectors </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w"> </span><span class="vc">weierstrass_model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class="vc">polynomial_equation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">weierstrass_model ⟶ (polynomial rationalField) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class="vc">polynomial_equation_injectivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} ⊦ polynomial_equation A ≐ polynomial_equation B ⟶ ⊦ A ≐ B </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// As the Weierstrass model is really defined by the polynomial_equation, this is really what defines equality. (1) ❙</span><span class="w"></span>

<span class="w"> </span><span class="vc">discriminant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">weierstrass_model ⟶ ℤ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// missing that this discriminant is really the discriminant of the polynomial equation</span>
<span class="cm">    // and thus that this factors through the discriminant defined (elsewhere) for multivariate polynomials ❙</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="cm">// Dennis: is it okay to just define the discriminant of a weierstrass model as above (i.e. as the discriminant of the associated polynomial?) ❙</span><span class="w"> </span>

<span class="w"> </span><span class="vc">a_invariants</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">weierstrass_model ⟶ (vector ℤ 5) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class="vc">a_invariants_factors_injectivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ is_injective a_invariants </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// if formulation of (1) changes, this should change too</span>
<span class="cm">    // really, this should go through the polynomial_equation, as it is more core to defn of a_invariants ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">fnd</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">a_Invariants</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Minimal_Weierstrass_model </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">a_invariants</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve ⟶ (vector ℤ 5) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] a_invariants (minimal_Weierstrass_model A) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">num</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Base</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞num:?IntegerArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra?Field </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?Matrices </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra?RationalPolynomials </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">power_series</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w">                                      </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Complex_multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Elliptic_curve </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">complex_multiplication</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w"> </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Conductor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Elliptic_curve </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">conductor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve ⟶ ℤ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Discriminant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Minimal_Weierstrass_model </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// include ?Weierstrass_model ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">discriminant</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve ⟶ ℤ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] discriminant (minimal_Weierstrass_model A) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lmfdb</span><span class="w"> </span><span class="l l-URI">http://www.lmfdb.org/omf</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Elliptic_curve_toolchest</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Modular_degree </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?a_Invariants </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Discriminant </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// include ec_2_adic_data ❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// include ec_padic_data ❙</span><span class="w"></span>

<span class="w">    </span><span class="cm">// include lmfdb:?LMFDB_label ❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// include lmfdb:?Cremona_label ❙</span><span class="w">          </span>
<span class="w">    </span><span class="cm">// clash in some names, such as conductor_component, although domains are different</span>
<span class="cm">    // Dennis: Should be fine; Florian massively improved disambiguation at some point :) ❙</span><span class="w"></span>

<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Isogeny_class </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?q_Expansion </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Complex_multiplication </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conductor </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="cm">// include minimal_Weierstrass_model ❙</span><span class="w"> </span>
<span class="w">    </span><span class="cm">// discriminant makes this redundant</span>
<span class="cm">    // Dennis: true; commented it out  ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Elliptic_curve</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Weierstrass_model </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span>
<span class="w">  </span><span class="vc">elliptic_curve</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">base_field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve ⟶ field </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">weierstrass_model_construction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">weierstrass_model ⟶ elliptic_curve </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">minimal_Weierstrass_model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve ⟶ weierstrass_model </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">construction_surjective</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ weierstrass_model_construction (minimal_Weierstrass_model A) ≐ A </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">                                          </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Isogeny_class</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conductor </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span>
<span class="w">  </span><span class="vc">isogeny_class</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">isogeny_equivalence_class</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve ⟶ isogeny_class </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span>
<span class="w">  </span><span class="vc">isogenies_preserve_conductor</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : elliptic_curve, B:elliptic_curve} ⊦ isogeny_equivalence_class A ≐ isogeny_equivalence_class B ⟶ ⊦ conductor A ≐ conductor B </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// should really be defined as a quotient ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">    </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Minimal_Weierstrass_model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Elliptic_curve </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w"> </span><span class="vc">minimal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">weierstrass_model ⟶ weierstrass_model </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class="vc">is_minimal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">weierstrass_model ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] (minimal A) ≐ A </span><span class=" -MMT_DD">❙</span><span class="w">           </span>
<span class="w">    </span><span class="cm">// need separators ❙</span><span class="w"></span>
<span class="w">    </span>
<span class="w"> </span><span class="cm">// minimality_condition : {A : tm Weierstrass_model,B : tm Weierstrass_model} ⊦ (minimal A) ≐ B → ⊦ absolute_value (discriminant B) ≤ absolute_value (discriminant A) ❙</span><span class="w"></span>
<span class="w"> </span><span class="cm">// Dennis: For some reason this doesn&#39;t typecheck. I have an idea why, but no idea how to solve it yet. ❙</span><span class="w"></span>
<span class="w"> </span><span class="vc">minimality_idempotence</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ minimal (minimal A) ≐ minimal A </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="cm">// the whole thing with minimal stinks of redundancy. it should be reusing partial orders and minimality over N ❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">minimality_of_minimal_Weierstrass_model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ is_minimal (minimal_Weierstrass_model A) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">injective_minimal_Weierstrass_model</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} ⊦ minimal_Weierstrass_model A ≐ minimal_Weierstrass_model B ⟶ ⊦ A ≐ B </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// roundtrip_Weierstrass_model_construction : {A} ⊦ A ≐ Weierstrass_model_construction (minimal_Weierstrass_model A) ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// Dennis: now subsumed by elliptic_curve?construction_surjective ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Modular_degree</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Conductor </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">modular_degree</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve ⟶ ℤ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/elliptic_curves</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">q_Expansion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Base</span><span class="w"> </span><span class="p">=</span><span class="w">             </span><span class="cm">// illustrates gain in introducing isogeny_class, could talk about modular forms as well ❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Isogeny_class </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">q_expansion</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">elliptic_curve ⟶ power_series </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">q_expansion_factors_through_isogeny_class</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B} ⊦ isogeny_equivalence_class A ≐ isogeny_equivalence_class B ⟶ ⊦ q_expansion A ≐ q_expansion B </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w"> </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/functional-analysis</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">calculus</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">algebra</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/algebra</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">topo</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/topology</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NormedSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞algebra:?Vectorspace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞algebra:?RealField </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">normedspace_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞algebra:?Vectorspace/vectorspace_theory (realField) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">norm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">universe ⟶  ℝ^+ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">||</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">||</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">axiom_multiplicativity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x : universe] ∀[a : ℝ] ☞arith:?RealArithmetics?multiplication (☞arith?RealArithmetics?absolute a) || x || ≐ || (scalarmult) a x ||</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_subadditivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x : universe] ∀[y : universe] (|| op x y ||) ≤ (||x|| + ||y||) </span><span class=" -MMT_OD">❘</span><span class="cm">// ⊦ ||(x + y)|| ≤ (||x|| + ||y||) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_positivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x : universe] 0 ≤ || x || </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_definiteness</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀[x : universe] 0.0 ≐ || x || ⇔ x ≐ unit </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// ⊦ ||x||≐0 ⇔ x ≐ e  ❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"> </span>
<span class="w">	</span><span class="vc">normedSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?NormedSpace/normedspace_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞calculus:?MetricSpace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="k">implicit</span><span class="w"> </span><span class="kd">view</span><span class="w"> </span><span class="nc">NormedSpaceAsMetricSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">calculus:?MetricSpace/metricSpace_theory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?NormedSpace/normedspace_theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">universe </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">		</span><span class="vc">d</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x : universe, y : universe] || x - y ||</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_triangleInequality</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;follows from axiom_subadditivity&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_isPseudoMetric</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;follows from axiom_positivity, and from the symmetry in the metric as implied by multiplicativity&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BanachSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NormedSpace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞calculus:?Completeness </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">normedmetric_theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NormedSpace/normedspace_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="kd">structure</span><span class="w"> </span><span class="nc">ms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">calculus:?MetricSpace/metricSpace_theory abbrev ?NormedSpace/NormedSpaceAsMetricSpace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">normedmetric</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?BanachSpace/normedmetric_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">banach</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n : normedSpace} prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] complete n </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// TODO also as models-of ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BanachAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BanachSpace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// theory NormedRealVectorSpaces : base:?Logic =</span>
<span class="cm">	include algebra:?RealVectorspace ❙</span>
<span class="cm">	include arith:?RealArithmetics ❙</span>
<span class="cm">	// TODO generalize ❙</span>
<span class="cm">	// include ?NormedSpace ❙</span>
<span class="cm">	</span>
<span class="cm">	Norm: ℝ1.universe ⟶ ℝ^+ ❘ = [x] |x| ❘ # || 1 || ❙</span>
<span class="cm">	Axiom_Multiplicativity : ⊦ ∀[x : ℝ1.universe] ∀[α : ℝ] || (ℝ1.scalarmult) α x || ≐ | α | ⋅ || x || ❙ // error: type of bound variable too big: kind ❙</span>
<span class="cm">	Axiom_Subadditivity : ⊦ ∀[x] ∀[y] (|| (ℝ1.op) x y ||) ≤ (||x|| + ||y||) ❙</span>
<span class="cm">	Axiom_Positivity : ⊦ ∀[x] 0 ≤ || x || ❙</span>
<span class="cm">	Axiom_Definiteness : ⊦ ∀[x] ||x||≐0 ⇔ x ≐ (ℝ1.unit)  ❙</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/geometry</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="cm">// TODO: ❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.frameit.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">3DGeometry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?ProductTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Geometry </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="cm">// ℝ³ ❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">point</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ × ℝ × ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">xofpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] πl p </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">_x</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">yofpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] πl (πr p) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">_y</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">zofpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] πr (πr p) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">_z</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">point_addI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] ⟨ (p1 _x + p2 _x), (p1 _y + p2 _y), (p1 _z + p2 _z) ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">point_subtractI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] ⟨ (p1 _x - p2 _x), (p1 _y - p2 _y), (p1 _z - p2 _z) ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">vec_multI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,p] ⟨ r ⋅ p _x, r ⋅ p _y, r ⋅ p _z ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">scalar_productI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] (p1 _x ⋅ p2 _x) + (p1 _y ⋅ p2 _y) + (p1 _z ⋅ p2 _z) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">(?Geometry/Common point point_addI point_subtractI vec_multI scalar_productI) </span><span class=" -MMT_DD">❙</span><span class="w"></span>


<span class="w">  </span><span class="vc">vec_cross</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v, w ] ⟨ ( v _y  ⋅ w _z  - v _z ⋅ w _y ) , ( v _z  ⋅ w _x  - v _x ⋅ w _z ) , ( v _x  ⋅ w _y  - v _y ⋅ w _x ) ⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Vcross</span><span class="w">  </span><span class="si">2</span><span class="w">  </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">InterceptTheorem</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?3DGeometry </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// naming like the images on</span>
<span class="cm">    https://en.wikipedia.org/wiki/Intercept_theorem ❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">S</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">B</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">C</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">D</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">line1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ S on (from A to B) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">line2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ S on (from C  to D) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">twolines</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦  ¬ (A -- B) ∥ (C -- D) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">par</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ (A -- C) ∥ (B -- D) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">ratio1</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ (d- S A ) / (d- A B) ≐ (d- S C) / (d- C D) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">ratio2</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ (d- S A ) / (d- S B) ≐ (d- S C) / (d- S D) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">ratio3</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ (d- S A ) / (d- S B) ≐ (d- A C) / (d- B D) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">ratio4</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ (d- S C ) / (d- S D) ≐ (d- A C) / (d- B D) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">3DTriangles</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?3DGeometry </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">(?Geometry/Triangles point point_addI point_subtractI vec_multI scalar_productI) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">area</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( | ( _A T  --  _B T ) Vcross ( _A T -- _C T ) | )  ⋅ ( 1 / 2 )</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">AΔ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// area definition that does not use height; can be computed without needing ι ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Planes</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?3DTriangles </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">plane</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">triangleToPlane</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ plane </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">PofΔ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">ParametrizedPlane</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point ⟶ point ⟶ plane </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Ppara</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">pointNormalPlane</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point ⟶ plane </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Ppn</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">planeNormal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plane ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Pnormal</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">planeBase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plane ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Pbase</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">PlaneBaseAxiom1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{v, w, b } ⊦ Pbase (Ppara b v w ) ≐ b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">normalAxiom1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ v, w, b } ⊦ ( Pnormal ( Ppara b v w ) ) ≐ ( normalize ( v Vcross w ) ) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">normalAxiom2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ v, b } ⊦ ( Pnormal ( Ppn b v ) ) ≐ ( norm ( v ) ) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">triangleAxiom</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{ T } ⊦ ( PofΔ T ) ≐ Ppara ( _A T ) ( _A  T -- _B T  ) ( _A  T -- _B T)  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">pointOnPlane</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ plane ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v , p] &lt; Pnormal p , v -- Pbase p &gt; ≐  0  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">VonP</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">lineOnPlane</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line ⟶ plane ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[l,p ] ( ( from l ) VonP p ) ∧  ( ( from l ) ++( dir l ) ) VonP p </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w">  </span><span class="si">1</span><span class="w"> </span><span class="ss">LonP</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">LinePlaneCollisionPoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ A, B } ( ⊦ dir A ⊥⊥ Pnormal B ) ⟶ point  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">colPLV</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">LinePlaneCollisionPointAxiom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A , B, p1 } ⊦  ( colPLV  A B p1 ) VonP B   ∧  ( colPLV  A B p1 ) on A </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">parallelPlanes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plane ⟶ plane ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ p1 ,p2] ( Pnormal p1 ) ∥ ( Pnormal p2 ) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">Ppar</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">samePlane</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plane ⟶ plane ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ p1 , p2] ( Pbase p1 VonP  p2 ) ∧ ( p1 Ppar p2 )</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">Psame</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">collidePlane</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">plane ⟶ plane ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[ A ,B ] ( ¬ A Ppar  B ) ∨ Psame A B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w">  </span><span class="ss">colP</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">collisionLine</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B } ⊦ colP A B ⟶ ⊦ ¬ Psame A B ⟶ line </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">colPPL</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">collisionLineAxiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B, p1 ,p2} ⊦ ( ( colPPL A B p1 p2 ) LonP A ) ∧( ( colPPL A B p1 p2 ) LonP B )</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// TODO Generalize to n-Spheres? ❚</span><span class="w"></span>
<span class="cm">// theory Sphere : http://mathhub.info/MitM/Foundation?Math =</span>
<span class="cm">    include ?Vector ❙</span>
<span class="cm">    include ?Lines ❙</span>

<span class="cm">    sphere: type ❘ # S ❙</span>
<span class="cm">    sphereAround: V ⟶ ℝ ⟶ S ❘# So 1 2 ❙</span>
<span class="cm">    center: S ⟶ V ❘ # Sm 1 ❙</span>
<span class="cm">    centerAxiom: {m,r}  ⊦ Sm ( So m r) ≐ m ❙</span>
<span class="cm">    radius: S ⟶ ℝ ❘ # Sr 1 ❙</span>
<span class="cm">    radiusAxiom : {m,r} ⊦ Sr (So m r) ≐ r ❙</span>

<span class="cm">    onSphere: S ⟶ V ⟶ bool ❘ =  [s, v] ( d ( Sm s ) ( v ) ) ≐ ( Sr s ) ❘ # 2 VonS  1 ❙</span>
<span class="cm">    inSphere: S ⟶ V ⟶ bool ❘ =  [s, v] ( d ( Sm s ) ( v ) ) &lt; ( Sr s ) ❘ # 2 VinS  1 ❙</span>

<span class="cm">    collidesSphereLine: S ⟶ L ⟶ bool ❘ = [s,l] ∃ [v] ( v VonL  l ) ∨  (v VinS s ) ❘ # 1 ScolL  2 ❙</span>

<span class="cm">    circumfenceSphere: S ⟶ ℝ ❘ = [s] ( Sr s ) ⋅ ( Sr s) ⋅ 4 ⋅ π  ❘ # CS 1 ❙</span>
<span class="cm">    areaSphere :  S ⟶ ℝ ❘ = [s] ( Sr s ) ⋅ ( Sr s ) ⋅ (Sr s) ⋅ ( 4 / 3 ) ⋅ π  ❘ # AS 1 ❙</span>
<span class="cm">❚</span><span class="w"></span>

<span class="cm">// theory Pyramid :  http://mathhub.info/MitM/Foundation?Math =</span>
<span class="cm">    include ☞http://BenniDoes.Stuff/?Vector ❙</span>
<span class="cm">    include ☞http://BenniDoes.Stuff/?Triangle ❙</span>

<span class="cm">    Pyramid : type ❘ # Pyr ❙</span>
<span class="cm">    pyramidOf : V ⟶ V ⟶ V ⟶ V ⟶ Pyr ❘ # Pyrof 1 2 3 4 ❙</span>
<span class="cm">    P_A : Pyr ⟶ V ❘ # P_A 1❙</span>
<span class="cm">    P_A_axiom : {a :V, b :V, c :V, dd :V } ⊦ ( P_A ( Pyrof a b c dd) ) ≐  a  ❘ role ForwardRule❙</span>
<span class="cm">    P_B : Pyr ⟶ V ❘ # P_B 1❙</span>
<span class="cm">    P_B_axiom : {a :V, b :V, c :V, dd :V } ⊦ ( P_B ( Pyrof a b c dd) ) ≐  b  ❘ role ForwardRule❙</span>
<span class="cm">    P_C : Pyr ⟶ V ❘ # P_C 1❙</span>
<span class="cm">    P_C_axiom : {a :V, b :V, c :V, dd :V } ⊦ ( P_C ( Pyrof a b c dd) ) ≐  c  ❘ role ForwardRule❙</span>
<span class="cm">    P_D : Pyr ⟶ V ❘ # P_D 1❙</span>
<span class="cm">    P_D_axiom : {a :V, b :V, c :V, dd :V } ⊦ ( P_D ( Pyrof a b c dd) ) ≐  dd  ❘ role ForwardRule❙</span>

<span class="cm">    Volume_Pyramid: Pyr ⟶ ℝ ❘ = [p ] ( 1 / 6) ⋅ ( &lt; ( ( ( P_B p ) ⁻ ( P_A p ) ) Vcross ( ( P_C  p ) ⁻ ( P_A p ) ) ), (( P_D  p ) ⁻ ( P_A p )  ) &gt; ) ❘# VolofP 1 ❙</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/geometry</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="cm">// TODO: ❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.core.mitm.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Geometry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞arith:?RealArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?Trigonometry </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">Common</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> point : type,</span>
<span class="nv">        add : point ⟶ point ⟶ point,</span>
<span class="nv">        subtract : point ⟶ point ⟶ point,</span>
<span class="nv">        mult : ℝ ⟶ point ⟶ point,</span>
<span class="nv">        scp : point ⟶ point ⟶ ℝ ❘ </span><span class="p">=</span><span class="w"></span>

<span class="w">  </span><span class="cm">// ℝ^n ❙</span><span class="w"></span>

<span class="w">      </span><span class="vc">point_add</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">add </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">++</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">point_subtract</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">subtract </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">--</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">vec_mult</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ point ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">mult </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⋅⋅</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">22</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">scalar_product</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">scp </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">&lt;</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">&gt;</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">norm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] √ &lt;p,p&gt; </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">metric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] | (p1 -- p2) | </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">d-</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?MetricCommutative </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">      </span><span class="vc">normalize</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v] (1 / ( | v | )) ⋅⋅ v </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">norm</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>


<span class="w">      </span><span class="cm">// Angles ❙</span><span class="w"></span>

<span class="w">      </span><span class="vc">angle</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w] acos ( &lt; v,w &gt; / (|v| ⋅ |w|)) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∠</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">angle_between</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point ⟶ point ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x,y,z] ∠ (x -- y) (z -- y) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∠</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">,</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="kn">rule</span><span class="w"> </span><span class="l l-URI">rules?AngleInvertible </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">      </span><span class="vc">parallel</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w] (∠ v w ≐ 0) ∨ (∠ v w ≐ pi_num) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">∥</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">orthogonal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[v,w] &lt; v ,w &gt; ≐ 0 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">⊥⊥</span><span class="w"> </span><span class="si">2</span><span class="w">   </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">//  jbot ❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">rightangle</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[x] x ≐ pi_num / 2  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">✓</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">//  jcheck ❙</span><span class="w"></span>

<span class="w">      </span><span class="cm">// Lines ❙</span><span class="w"></span>

<span class="w">      </span><span class="vc">line_type</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">line</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">lineOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point ⟶ line </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">from</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">basepoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">from</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">targetpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">to</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">axiom_basepoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p1,p2} ⊦ from (from p1 to p2) ≐ p1  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">axiom_targetpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{p1,p2} ⊦ to (from p1 to p2) ≐ p2  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ForwardRule </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">      </span><span class="vc">lineDirection</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[l] norm (( to l ) -- ( from l )) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">dir</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// wut? ❙</span><span class="w"></span>

<span class="w">      </span><span class="vc">onLine</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line ⟶ point ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">on</span><span class="w"> </span><span class="si">1</span><span class="w">  </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// definiens? ❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">sameLine</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line ⟶ line ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A ,B] ( (from B ) on A ) ∧ ( (lineDirection B) ∥ (lineDirection A) ) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≅</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">      </span><span class="vc">intersect</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line ⟶ line ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] ∃ [p] (p on A) ∧ (p on B) ∧ (¬ A ≅ B) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">colL</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">pointOfIntersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A ,B } ( ⊦ colL A B ) ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">colLV</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w">  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">parallelLine</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">line ⟶ line ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] lineDirection A ∥ lineDirection B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">paraL</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">pointOfIntersectionAxiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, B, p} ⊦ ( ( colLV A B  p) on A ) ∧ ( ( colLV A B  p) on B) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">Triangles</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> point : type,</span>
<span class="nv">          addI : point ⟶ point ⟶ point,</span>
<span class="nv">          subtractI : point ⟶ point ⟶ point,</span>
<span class="nv">          multI : ℝ ⟶ point ⟶ point,</span>
<span class="nv">          scpI : point ⟶ point ⟶ ℝ ❘ </span><span class="p">=</span><span class="w"></span>

<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">(?Geometry/Common point addI subtractI multI scpI) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">triangle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">triangle_constructor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ point ⟶ point ⟶ triangle </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Δ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">triangle_point1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_A</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">triangle_point2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_B</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">triangle_point3</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_C</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">alpha_angle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_α</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] angle ( _B T -- _A T ) ( _C T -- _A T )</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">beta_angle</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_β</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] angle ( _A T --  _B T ) ( _C T -- _B T )</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">gamma_angle</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_γ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] angle ( _A T -- _C T  ) ( _B T -- _C T )</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">a_triangle</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] d- ( _B T) ( _C T) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_a</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">b_triangle</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] d- ( _A T) ( _C T) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_b</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">c_triangle</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] d- ( _A T) ( _B T) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_c</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>


<span class="w">    </span><span class="vc">height_triangle_basepoint_a</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_haV</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">height_triangle_basepoint_a_online_axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } ⊦ ( _haV T ) on ( from ( _B T) to ( _C T ) ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">height_triangle_basepoint_a_orthogonal_axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } ⊦ ( _haV T -- _B T ) ⊥⊥ ( _haV T -- _A T ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">ha_triangle_length</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] d- ( _A T ) ( _haV T  )</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_ha</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">height_triangle_basepoint_b</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_hbV</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">height_triangle_basepoint_b_online_axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } ⊦ ( _hbV T ) on ( from ( _A T) to ( _C T ) ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">height_triangle_basepoint_b_orthogonal_axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } ⊦ ( _hbV T -- _A T ) ⊥⊥ ( _hbV T -- _B T ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">hb_triangle_length</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] d- ( _B T ) ( _hbV T  )</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_hb</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">height_triangle_basepoint_c</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ point </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_hcV</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">height_triangle_basepoint_c_online_axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } ⊦ ( _hcV T ) on ( from ( _B T) to ( _A T ) ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">height_triangle_basepoint_c_orthogonal_axiom</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } ⊦ ( _hcV T -- _B T ) ⊥⊥ ( _hcV T -- _C T ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">hc_triangle_length</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] d- ( _C T ) ( _hcV T  )</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">_hc</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">lawOfCosine_Alpha</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } ⊦ ( _a T ⋅ _a T ) ≐ ( _b T ⋅ _b T ) + ( _c T ⋅ _c T ) + 2 ⋅ _b T ⋅ _c T ⋅  ( cos ( _α T ) )</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">lawOfCosine_Beta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } ⊦ ( _b T ⋅ _b T ) ≐ ( _a T ⋅ _a T ) + ( _c T ⋅ _c T ) + 2 ⋅ _a T ⋅ _c T ⋅  ( cos ( _β T ) )</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">lawOfCosine_Gamma</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } ⊦ ( _c T ⋅ _c T ) ≐ ( _a T ⋅ _a T ) + ( _b T ⋅ _b T ) + 2 ⋅ _a T ⋅ _b T ⋅  ( cos ( _γ T ) )</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">lawOfSinesAB</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } ⊦ _a  T / sin ( _α T ) ≐ _b T / sin ( _β T ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">lawOfSinesAC</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } ⊦ _a  T / sin ( _α T ) ≐ _c T / sin ( _γ T ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">lawOfSinesCB</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{ T } ⊦ _c  T / sin ( _γ T ) ≐ _b T / sin ( _β T ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">angleSum</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} ⊦ (( _α T) + ( _β T) + ( _γ T) )≐ pi_num </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">area</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] ( _hb T) ⋅ ( _b T) / 2 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">AΔ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">SymmetricTriangles</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> point : type,</span>
<span class="nv">         addI : point ⟶ point ⟶ point,</span>
<span class="nv">         subtractI : point ⟶ point ⟶ point,</span>
<span class="nv">         multI : ℝ ⟶ point ⟶ point,</span>
<span class="nv">         scpI : point ⟶ point ⟶ ℝ ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">(?Geometry/Triangles point addI subtractI multI scpI) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">symmetric_α</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] _β T ≐ _γ T </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sym_α</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">symmetric_β</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] _α T ≐ _γ T </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sym_β</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">symmetric_γ</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">triangle ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] _α T ≐ _β T </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">sym_γ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">symmetric_edges_α</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} {p : ⊦ (sym_α T) } ⊦ _b T ≐ _c T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">symmetric_edges_β</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} {p : ⊦ (sym_β T) } ⊦ _a T ≐ _c T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">symmetric_edges_γ</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} {p : ⊦ (sym_γ T) } ⊦ _a T ≐ _b T </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">symmetric_α_edges</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} {p : ⊦ ( _b T ≐ _c T)} ⊦ sym_α T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">symmetric_β_edges</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} {p : ⊦ ( _a T ≐ _c T)} ⊦ sym_β T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">symmetric_γ_edges</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} {p : ⊦ ( _a T ≐ _b T)} ⊦ sym_γ T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">RightTriangles</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> point : type,</span>
<span class="nv">            addI : point ⟶ point ⟶ point,</span>
<span class="nv">            subtractI : point ⟶ point ⟶ point,</span>
<span class="nv">            multI : ℝ ⟶ point ⟶ point,</span>
<span class="nv">            scpI : point ⟶ point ⟶ ℝ ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">(?Geometry/Triangles point addI subtractI multI scpI) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">pythagoras_alpha</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _c T) ⋅ ( _c T) + ( _b T) ⋅ ( _b T) ≐ ( _a T) ⋅ ( _a T) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">pythagoras_beta</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _a T) ⋅ ( _a T) + ( _c T) ⋅ ( _c T) ≐ ( _b T) ⋅ ( _b T) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">pythagoras_gamma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _a T) ⋅ ( _a T) + ( _b T) ⋅ ( _b T) ≐ ( _c T) ⋅ ( _c T) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">right_alpha_prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] ✓  _α T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">right_beta_prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] ✓  _β T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">right_gamma_prop</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T] ✓  _γ T </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">pythagoras_theorem_alpha</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T}  { p :  ⊦ right_alpha_prop T } ⊦ pythagoras_alpha  T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">pythagoras_theorem_beta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T}  { p :  ⊦ right_beta_prop T } ⊦ pythagoras_beta  T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">pythagoras_theorem_gamma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T}  { p :  ⊦ right_gamma_prop T } ⊦ pythagoras_gamma  T </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">geometric_mean_alpha</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _ha T ⋅ _ha T ) ≐ ( d- ( _haV T ) ( _B T ) ) ⋅ ( d- ( _haV T) ( _C T ) ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">geometric_mean_beta</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _hb T ⋅ _hb T ) ≐ ( d- ( _hbV T ) ( _A T ) ) ⋅ ( d- ( _hbV T) ( _C T ) ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">geometric_mean_gamma</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _hc T ⋅ _hc T ) ≐ ( d- ( _hcV T ) ( _B T ) ) ⋅ ( d- ( _hcV T) ( _A T ) ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">geometric_mean_theorem_alpha</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  ⊦ ( ✓  _α T  ) } ⊦ geometric_mean_alpha T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">geometric_mean_theorem_beta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  ⊦ ( ✓  _β T  ) } ⊦ geometric_mean_beta T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">geometric_mean_theorem_gamma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  ⊦ ( ✓  _γ T  ) } ⊦ geometric_mean_gamma T </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">cathetus_alpha_1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _b T ⋅ _b T  ) ≐ _a T ⋅ ( d- ( _haV T) ( _C T ) )</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">cathetus_alpha_2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _c T ⋅ _c T  ) ≐ _a T ⋅ ( d- ( _haV T) ( _B T ) )</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">cathetus_beta_1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _c T ⋅ _c T  ) ≐ _b T ⋅ ( d- ( _hbV T) ( _A T ) )</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">cathetus_beta_2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _a T ⋅ _a T  ) ≐ _b T ⋅ ( d- ( _hbV T) ( _C T ) )</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">cathetus_gamma_1</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _a T ⋅ _a T  ) ≐ _c T ⋅ ( d- ( _hcV T) ( _B T ) )</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">cathetus_gamma_2</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[T]  ( _b T ⋅ _b T  ) ≐ _c T ⋅ ( d- ( _hcV T) ( _A T ) )</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">catheus_theorem_alpha_1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  ⊦ ( ✓  _α T  ) } ⊦ cathetus_alpha_1 T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">catheus_theorem_alpha_2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  ⊦ ( ✓  _α T  ) } ⊦ cathetus_alpha_2 T </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">catheus_theorem_beta_1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  ⊦ ( ✓  _β T  ) } ⊦ cathetus_beta_1 T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">catheus_theorem_beta_2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  ⊦ ( ✓  _β T  ) } ⊦ cathetus_beta_2 T </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">catheus_theorem_gamma_1</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  ⊦ ( ✓  _γ T  ) } ⊦ cathetus_gamma_1 T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">catheus_theorem_gamma_2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T} { p :  ⊦ ( ✓  _γ T  ) } ⊦ cathetus_gamma_2 T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/geometry</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="cm">// TODO: ❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">rules</span><span class="w"> </span><span class="l l-URI">scala://rules.frameit.mmt.kwarc.info</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PlanarGeometry</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?ProductTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Geometry </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// ℝ² ❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">point</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℝ × ℝ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">xofpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] πl p </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">_x</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">yofpoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">point ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p] πr p </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">_y</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">point_addI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] ⟨ (p1 _x + p2 _x), (p1 _y + p2 _y) ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">point_subtractI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] ⟨ (p1 _x - p2 _x), (p1 _y - p2 _y) ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">vec_multI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,p] ⟨ r ⋅ p _x, r ⋅ p _y ⟩ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">scalar_productI</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[p1,p2] (p1 _x ⋅ p2 _x) + (p1 _y ⋅ p2 _y) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">(?Geometry/Common point point_addI point_subtractI vec_multI scalar_productI) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/graphs</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">num</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Graphs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?AllSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?Relations </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?Union </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞num:?NaturalArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?SetQuantifiers </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">nodetype</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">dgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	    </span><span class="vc">nodes</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set nodetype </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	    </span><span class="vc">edges</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">relation nodetype nodetype </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	    </span><span class="vc">successors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nodetype ⟶ set nodetype </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] ⟪ nodes | ([x] edges a x) ⟫ </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	    </span><span class="vc">predecessors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nodetype ⟶ set nodetype </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] ⟪ nodes | ([x] edges x a) ⟫ </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	    </span><span class="vc">neighbours</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nodetype ⟶ set nodetype </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a] (successors a) ∪ (predecessors a)  </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    	</span><span class="vc">n_regular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n] ∀ ∈ nodes . [a] ∃= n ∈ (neighbours a) . [b] TRUE </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">ugraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?Graphs/dgraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">undirected_edges</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ symmetric edges </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">finite_dgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?Graphs/dgraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    	</span><span class="vc">finite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ nodes finite </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">finite_ugraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?Graphs/ugraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?Graphs/finite_dgraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">	</span><span class="vc">dgraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Graphs/dgraph_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">ugraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Graphs/ugraph_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">finite_dgraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Graphs/finite_dgraph_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">finite_ugraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?Graphs/finite_ugraph_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w"> 	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?RelationClosure </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">nodesOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{g: dgraph}set nodetype </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] (g.nodes) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">nodes</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">dEdgesOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{g: dgraph}relOn nodetype </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] (g.edges) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">edgesOf</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">uEdgesOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{g: ugraph}relOn nodetype </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] symmetric_closure (g.edges) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">edgesOf</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">finite_dgraph ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] | nodesOf g | </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">inducedUGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dgraph ⟶ ugraph </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[d : dgraph] [&#39;</span>
<span class=" -MMT_ObjectExpression">		nodes := d.nodes , </span>
<span class=" -MMT_ObjectExpression">		edges := symmetric_closure (d.edges) ,</span>
<span class=" -MMT_ObjectExpression">		undirected_edges := trivial</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	    </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">emptyGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">graphEmpty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dgraph ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] empty (g.nodes) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">emptyGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dgraph </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39;</span>
<span class=" -MMT_ObjectExpression">	  nodes := emptySet nodetype ,</span>
<span class=" -MMT_ObjectExpression">	  edges := ([x : nodetype,y : nodetype] false)</span>
<span class=" -MMT_ObjectExpression">	&#39;] </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∅</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">graphEdgeless</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dgraph ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] (g.edges) ≐ [x,y] false </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">edgelessGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set nodetype ⟶ dgraph </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] [&#39;</span>
<span class=" -MMT_ObjectExpression">      nodes := S ,</span>
<span class=" -MMT_ObjectExpression">      edges := ([x : nodetype,y : nodetype] false)</span>
<span class=" -MMT_ObjectExpression">      &#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GraphOrderSize</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?FiniteCardinality </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">order</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">dgraph ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[g] | nodesOf g | </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// TODO: we would need to convert a relation into a set of pairs and count that ❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">//size : dgraph ⟶ ℕ ❘ = [g] | dedgesOf g | ❘ # || 1 || ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GraphDegree</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?FiniteCardinality </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="cm">// indegree : {g : dgraph} (g.nodes) ⟶ ℕ ❘ = [g,n] | ⟪ dedgesOf g | [e] π2 e ≐n  ⟫ | ❘ indeg 2❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// outdegree : {g : dgraph} (g.nodes) ⟶ ℕ ❘ = [g,n] | ⟪ dedgesOf g | [e] π1 e ≐n  ⟫ | ❘ outdeg 2❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// degree : {g : ugraph} (g.nodes) ⟶ ℕ ❘ = [g,n] | ⟪ dedgesOf g | [e] π1 e ≐n  ⟫ | ❘ degree 2❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">InitialTerminal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// initial : {g : dgraph} (g.nodes) ⟶ bool ❘ = [g,n] ¬∃[e] e ∈ (g.edges) ∧ ∃[m] e m n ❘ # initial 2 ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// terminal : {g : dgraph} (g.nodes) ⟶ bool ❘ = [g,n] ¬∃[e] e ∈ (g.edges) ∧ ∃[m] e n m ❘ # terminal 2 ❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// sets =/= types ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">GraphMorphisms</span><span class="w"> </span><span class="p">:</span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">graphMorphism_theory</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> g1 : ugraph, g2 : ugraph ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="vc">fun</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nodetype ⟶ nodetype </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">        </span><span class="vc">morphism_property</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀ ∈ (g1.nodes) . [n1] ∀ ∈ (g1.nodes) . [n2] (g1.edges) n1 n2 ⇒ (g2.edges) (fun n1) (fun n2) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/graphs</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">num</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">VertexColoredGraphs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">vertexcoloredgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?Graphs/ugraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">        </span><span class="vc">colors</span><span class="w"> </span><span class="p">:</span><span class=" -MMT_ObjectExpression">set ℕ </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// we assume at most countably many colors indexed by ℕ ❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">color</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nodetype ⟶ asType colors </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">undirectedVertexcoloredgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?Graphs/ugraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?VertexColoredGraphs/vertexcoloredgraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EdgeColoredGraphs</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Graphs </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">edgecoloredgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?Graphs/dgraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">        </span><span class="vc">colors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ℕ </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// we assume at most countably many colors indexed by ℕ ❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">colorOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{a,b:nodetype} ⊦ edges a b ⟶ asType colors </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">color</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>


<span class="w">        </span><span class="vc">color_symm_prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">∀[a] ∀[b] ∀[p] ∀[q] edges a b ⇒ colorOf a b p ≐ colorOf b a q </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="cm">// TODO needs eliminating the second proof argument ❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">undirectedEdgecoloredgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?Graphs/ugraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?EdgeColoredGraphs/edgecoloredgraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>


<span class="w">        </span><span class="vc">color_symm</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ color_symm_prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">proper_prop</span><span class="w"> </span><span class="p">:</span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">∀[a] ∀ ∈ (neighbours a) . [b] ∀ ∈ (neighbours a) . [c] ∀[p] ∀[q] b ≠ c ⇒ colorOf a b p ≠ colorOf a c q </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="cm">// TODO needs eliminating the second proof argument ❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">    </span><span class="vc">uecGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?EdgeColoredGraphs/undirectedEdgecoloredgraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>


<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">properEdgecoloredgraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?EdgeColoredGraphs/undirectedEdgecoloredgraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">        </span><span class="vc">is_proper</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ proper_prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">    </span><span class="vc">properedgecoloredGraph</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?EdgeColoredGraphs/properEdgecoloredgraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">subGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">properedgecoloredGraph ⟶ (nodetype ⟶ prop) ⟶ (nodetype ⟶ nodetype ⟶ prop) ⟶ properedgecoloredGraph </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// TODO definiens ❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// TODO generalize ❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">components</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">properedgecoloredGraph ⟶ set properedgecoloredGraph </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ColoredGraphMorphisms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?GraphMorphisms </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EdgeColoredGraphs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">colorPreservingMorphism</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> g1 : uecGraph, g2 : uecGraph ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?GraphMorphisms/graphMorphism_theory g1 g2 </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">        </span><span class="cm">// preservation_property : ⊦ ∀ ∈ (g1.nodes) . [n1] ∀ ∈ (g1.nodes) . [n2] ∀ [p : ⊦ (g1.edges) n1 n2]</span>
<span class="cm">            (g1.colorOf)  n1 n2 p ≐ (g2.colorOf) (fun n1) (fun n2) trivial ❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Maniplexes</span><span class="w"> </span><span class="p">:</span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EdgeColoredGraphs </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">maniplex_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> rank : ℕ ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?Graphs/ugraph_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">        </span><span class="kd">structure</span><span class="w"> </span><span class="nc">colored</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EdgeColoredGraphs/properEdgecoloredgraph_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">            </span><span class="vc">nodes</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nodes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">            </span><span class="vc">edges</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">edges </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">            </span><span class="vc">colors</span><span class="w"> </span><span class="p">@</span><span class="no"> colors </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⟪ (fullset ℕ) | ([x] x &lt; rank) ⟫ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">            </span><span class="vc">colorOf</span><span class="w"> </span><span class="p">@</span><span class="no"> colorOf </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">        </span><span class="vc">this</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">properedgecoloredGraph </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// TODO ❙</span><span class="w"></span>

<span class="w">        </span><span class="vc">is_n_regular</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ n_regular rank </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="vc">subgraph_induced_by_colors</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{i : ℕ, j : ℕ} properedgecoloredGraph </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="cm">// TODO ❙</span><span class="w"></span>

<span class="w">        </span><span class="vc">has_squares_prop</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = ∀ ∈ colors . [i] ∀ ∈ colors . [j] ((max i j) - (min i j)) &gt; 1 ⇒</span>
<span class="cm">                                                ∀ ∈ (components (subgraph_induced_by_colors i j)) . [C] ∃= 4 ∈ (C.nodes) . [x] true </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">        </span><span class="vc">has_squares</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ has_squares_prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>


<span class="w">        </span><span class="vc">pathIntersection_property</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="cm">// For every pair of nodes (u,v) and every pair of colors (i,j):</span>
<span class="cm">            if there is a path (TODO!) from u to v that only uses colors &gt;i and a second path that only uses colors &lt;j,</span>
<span class="cm">            then there&#39;s a path that only uses colors c with i&lt;c&lt;j</span>
<span class="cm">         ❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">    </span><span class="vc">maniplex</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[n:ℕ] Mod ☞?Maniplexes/maniplex_theory n </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">dual</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{n:ℕ} maniplex n ⟶ maniplex n </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="cm">// swaps edges of color i with edges of color n - 1 - i  </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">k_faces</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{rank : ℕ} maniplex rank ⟶ ℕ ⟶ set properedgecoloredGraph </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">      </span><span class="cm">// = [r,M,k] components (subGraph M ([x] true) ([x,y] (M.color) x y ≠ k)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">k_face_flagGraph</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{rank : ℕ} maniplex rank ⟶ ℕ ⟶ set properedgecoloredGraph </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="cm">// = [r,M,k] components (subGraph M ([x] true) ([x,y] (M.color) x y &lt; k)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// return type should be set (maniplex k) ❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">facet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{rank : ℕ} maniplex rank ⟶ set properedgecoloredGraph </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="cm">// = [r,M] k_face_flagGraph r M (r-1) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// return type should be set (maiplex rank-1) ❙</span><span class="w"></span>

<span class="w">    </span><span class="cm">// k_face_flagGraph preserves pathIntersection_property i.e. return type polytopeFlagGraph ❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">vertex_figures</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{rank : ℕ} maniplex rank ⟶ set properedgecoloredGraph </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[r,M] k_face_flagGraph r M 0 </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// ...and shift colors to get maniplex/polytopeFlagGraph again ❙</span><span class="w"></span>

<span class="w">    </span><span class="kd">theory</span><span class="w"> </span><span class="nc">polytopeFlagGraph_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> rank : ℕ ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞?Maniplexes/maniplex_theory (rank) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">        </span><span class="vc">hasPathIntersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ pathIntersection_property </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/measures</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">lfx</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Sigma</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">exr</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seq</span><span class="w"> </span><span class="l l-URI">http://cds.omdoc.org/urtheories</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">desc</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/DescriptionOperators</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Additive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arithmetics?ExtendedReals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">collections?Properties </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="vc">prop_additive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type}{F : collection A} (setastype F ⟶ ℝ) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_Additive</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w">	</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="cm">// = [A,F,f] ∀[S]∀[T] disjoint X Y ⇒ f(X ∪ Y) ≐ f(X) + f(Y)  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// DM: conversion between sets and types needed to work properly ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SigmaAdditive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?Functions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SigmaAlgebra </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arithmetics?ExtendedReals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">calculus?Series </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="vc">prop_sigmaAdditive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type}{F : collection A} (setastype F ⟶ ℝ) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">prop_sigmaAdditive</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w">	</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="cm">// = [A,F,f] ∀[S : sequence (setastype (F.coll))] pairwiseDisjoint (im S (fullset ℕ)) ⇒  f (elem (F.coll) (UNION (im S (fullset ℕ)))) ≐ SUM ([x : ℕ] f (S x)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// DM: conversion between sets and types needed to work properly ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Measure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SigmaAdditive </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">calculus?Series </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?Functions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">measure_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type , A : sigmaAlgebra X ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">measure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">setastype (A.coll) ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">μ</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">120</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">		</span><span class="vc">axiom_nonnegative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀ [x] μ x ≥ 0 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_emptyiszero</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ μ  (elem (A.coll) ∅ ) ≐ 0 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_sigmaadditivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_sigmaAdditive (A.coll) measure </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">measure</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type, A : sigmaAlgebra X] Mod ☞?Measure/measure_theory X A </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">measureSpace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{&#39;</span>
<span class=" -MMT_ObjectExpression">  		universe : type ,</span>
<span class=" -MMT_ObjectExpression">  		sigma_algebra : sigmaAlgebra universe ,</span>
<span class=" -MMT_ObjectExpression">  		rmeasure : measure universe sigma_algebra</span>
<span class=" -MMT_ObjectExpression">	&#39;}</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">measurableSpace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{&#39;universe : type , sigma_algebra : sigmaAlgebra universe &#39;} </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="cm">// very slow! toMeasureSpace : {ms: measurableSpace} measure (ms.universe) (ms.sigma_algebra) ⟶ measureSpace </span>
<span class="cm">	❘// = [ms, m] [&#39;universe := ms.universe , sigma_algebra := ms.sigma_algebra , measure := m&#39;] ❙</span><span class="w"></span>
<span class="w">	                                                                         </span>
<span class="w">	</span><span class="vc">isFiniteMeasure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">measureSpace ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="cm">// slow! = [ms] (ms.measure.measure) (elem (ms.sigma_algebra.coll) (fullset (ms.universe))) &lt; ∞</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerSigmaAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Measure </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_powersetIsSigmaAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] prop_isSigmaAlgebra A (powerset A (fullset A)) </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_fullInPowerset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} ⊦ prop_fullInColl (℘ (fullset A)) </span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// (℘ (fullset A)) ❙</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">prop_finiteIntersectionPower</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} ⊦ prop_finiteIntersection (℘ (fullset A)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_complementsPower</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} ⊦ prop_closedUnderComplements (℘  (fullset A)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class="cm">// lemma_finiteUnion : ⊦ prop_finiteUnion coll ❘ = sketch &quot;by de Morgan&quot; ❙</span><span class="w"></span>
<span class="cm">//	lemma_empty : ⊦ prop_emptyInColl coll ❘ = sketch &quot;$∅$ is the complement of $X$&quot; ❙</span><span class="w"> </span>

<span class="w">	</span><span class="vc">prop_intersectionInPower</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} ⊦ prop_intersectionInColl (℘ (fullset A)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">powerSigmaAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : type} sigmaAlgebra X </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [X : type] [&#39; 	setalgebra/axiom_complements := prop_complementsPower  , coll := ℘  (fullset X), axiom_intersection := prop_intersectionInPower 	</span>
<span class="cm">	, setalgebra/axiom_full :=  prop_fullInPowerset  &#39;] </span><span class=" -MMT_DD">❙</span><span class="w"> </span>

<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">CountingMeasure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerSigmaAlgebra </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="vc">countingMeasureFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : type, A : sigmaAlgebra X} setastype (A.coll) ⟶ ℝ</span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">❘</span><span class="cm">// slow! = [A, S, s] if s finite  then (| s | : ℝ) else ∞</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">countingMeasureFunction_nonnegative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : type, A : sigmaAlgebra X } ⊦ ∀ [x] (countingMeasureFunction X A) x ≥ 0</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="cm">// slow!	countingMeasure_emptyiszero	: {A : type, S : sigmaAlgebra A} ⊦ (countingMeasureFunction A S) (elem (S.coll) ∅) ≐ 0 ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">countingMeasure_sigmaadditivity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type , S : sigmaAlgebra A} ⊦ prop_sigmaAdditive (S.coll) (countingMeasureFunction A S) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">countingMeasure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : type, A : sigmaAlgebra X}  measure X A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">//  =  [X,A] </span>
<span class="cm">	[&#39;</span>
<span class="cm">	measure := (countingMeasureFunction X A) , axiom_nonnegative :=  countingMeasureFunction_nonnegative ,   </span>
<span class="cm">	axiom_emptyiszero := countingMeasure_emptyiszero , axiom_sigmaadditivity := countingMeasure_sigmaadditivity</span>
<span class="cm">	&#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">countingMeasurableSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ measurableSpace </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// slow! = [A] [&#39;universe := A , sigma_algebra := powerSigmaAlgebra A&#39;]</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">countingMeasureSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ measureSpace </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// slow! = [A] [&#39;universe := A , sigma_algebra := powerSigmaAlgebra A , measure := countingMeasure A (powerSigmaAlgebra A)   &#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w">                 </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NullSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Measure </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">isNullSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measureSpace} set (m.universe) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="cm">// slow! = [m , s] (s ∈ m.sigma_algebra.coll) ∧ (((m.measure.measure) </span>
<span class="cm">  (elem (m.sigma_algebra.coll) s)) ≐ 0)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">allNullSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measureSpace} collection (m.universe) </span><span class=" -MMT_OD">❘</span><span class="cm">// slow!= [m] ⟪  (m.sigma_algebra.coll) | ([s] (((m.measure.measure) </span>
<span class="cm">  (elem (m.sigma_algebra.coll) s)) ≐ 0))⟫ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AlmostEverywhere</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NullSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">almostEverywhere</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{m : measureSpace} ((m.universe) ⟶ bool) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[m,P] ∃ [n] n ∈ (allNullSets m) ∧ (∀[x] x ∈ (fullset (m.universe) \ n) ⇒  P x)</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">AE</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/measures</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">top</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/topology</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">collections?Properties </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">prop_isSetAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type} collection G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] prop_fullInColl C ∧ prop_closedUnderComplements C ∧ prop_finiteIntersection C </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	  </span><span class="p">#</span><span class="w"> </span><span class="ss">isSetAlgebra</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	  </span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">setAlgebra_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetCollection/setColl_theory (X) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_full</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_fullInColl coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_finiteIntersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_finiteIntersection coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_complements</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_closedUnderComplements coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">lemma_finiteUnion</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_finiteUnion coll </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by de Morgan&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">lemma_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_emptyInColl coll </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;$∅$ is the complement of $X$&quot; </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">setAlgebra</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type] Mod ☞?SetAlgebra/setAlgebra_theory X </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">    </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SigmaAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞collections?Properties </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetAlgebra </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="vc">prop_isSigmaAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type} collection G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">	  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] isSetAlgebra C ∧ prop_intersectionInColl C </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	  </span><span class="p">#</span><span class="w"> </span><span class="ss">isSigmaAlgebra</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	  </span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">sigmaAlgebra_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetCollection/setColl_theory (X) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">		</span><span class="vc">axiom_intersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_intersectionInColl coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">lemma_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_unionInColl coll </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by de Morgan&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="k">implicit</span><span class="w"> </span><span class="kd">structure</span><span class="w"> </span><span class="nc">setalgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?SetAlgebra/setAlgebra_theory </span><span class="p">=</span><span class="w"></span>
<span class="w">			</span><span class="vc">coll</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">			</span><span class="vc">axiom_finiteIntersection</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;special case of $axiom_intersection$&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">			</span><span class="vc">lemma_finiteUnion</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;special case of $lemma_union$&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">sigmaAlgebra</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type] Mod ☞?SigmaAlgebra/sigmaAlgebra_theory X </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Measurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?Functions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SigmaAlgebra </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">	</span><span class="vc">measurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B : type}{X : sigmaAlgebra A, Y : sigmaAlgebra B} (A ⟶ B) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	 </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B][X,Y,F] ∀[S] S ∈ (Y.coll) ⇒ (preim F S) ∈ (X.coll) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	 </span><span class="p">#</span><span class="w"> </span><span class="ss">measurable</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>

<span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">LebesgueMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Measurable </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞arith:?RealArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">lebesgueMeasurableLeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, s : sigmaAlgebra A} (A ⟶ ℝ) ⟶ bool </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,f] ∀[x : ℝ] ⟪ fullset A | ([i : A] (f i) ≤ x) ⟫ ∈ (s.coll) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">lebesgueMeasurableLeq</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lebesgueMeasurableLt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, s : sigmaAlgebra A} (A ⟶ ℝ) ⟶ bool </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,f] ∀[x : ℝ] ⟪ fullset A | ([i : A] (f i) &lt; x) ⟫ ∈ (s.coll) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">lebesgueMeasurableLt</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lebesgueMeasurableGeq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, s : sigmaAlgebra A} (A ⟶ ℝ) ⟶ bool </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,f] ∀[x : ℝ] ⟪ fullset A | ([i : A] (f i) ≥ x) ⟫ ∈ (s.coll) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">lebesgueMeasurableGeq</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">lebesgueMeasurableGt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, s : sigmaAlgebra A} (A ⟶ ℝ) ⟶ bool </span>
<span class=" -MMT_ObjectExpression">  </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,f] ∀[x : ℝ] ⟪ fullset A | ([i : A] (f i) &gt; x) ⟫ ∈ (s.coll) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">lebesgueMeasurableGt</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// MiKo: would like a view from topological spaces into Sigma Algebras that makes continuous functions measurable. ❚</span><span class="w"></span>
<span class="cm">// I don&#39;t understand - in general, sigma algebras aren&#39;t topologies... ❚</span><span class="w"></span>
<span class="cm">/T The BorelSigmaAlgebra is the smallest SigmaAlgebra that contains the collection of open sets. ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">BorelSigmaAlgebra</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?LeastMost </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SigmaAlgebra </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">topology?OpenSetTopology </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">borelsigmacoll</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} collection A ⟶ collection A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,C] least ([D] isSigmaAlgebra D ∧ (C ⊑ D)) (subset (set A)) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">borelsigma</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class="cm">//  axiom_closedundercomplements : {t : topologicalSpace} ⊦ prop_closedUnderComplements (borelsigma (topologyOf t)) ❙</span><span class="w"></span>
<span class="w"> </span><span class="cm">// axiom_closedunderintersections : {t : topologicalSpace} ⊦  prop_intersectionInColl (borelsigma (topologyOf t)) ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">borelSigma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{t : topologicalSpace} sigmaAlgebra (t.universe) </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">    </span><span class="cm">// = [t] [&#39;</span>
<span class="cm">	  	  coll := borelsigma (topologyOf t) ,</span>
<span class="cm">	  	  axiom_full := (t.axiom_full) ,</span>
<span class="cm">	  	  axiom_intersection := axiom_closedunderintersections ,</span>
<span class="cm">	  	  axiom_complements := axiom_closedundercomplements</span>
<span class="cm">	&#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">BorelMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Measurable </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BorelSigmaAlgebra </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞top:?RealTopology </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">borelMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, t : topologicalSpace} sigmaAlgebra A ⟶ (A ⟶ t.universe) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,t,s,f] measurable s (borelSigma t) f </span>
<span class=" -MMT_ObjectExpression">	</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">borelMeasurable</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">realBorelMeasurable</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} sigmaAlgebra A ⟶ (A ⟶ ℝ) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,f] measurable s (borelSigma realTopologicalSpace) f</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">lemma_realBorelMeasurableIsMeasurable</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/numbertheory</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">AdditiveBases</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?FiniteSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?SetQuantifiers </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?LeastMost </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?NatIntervals </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">isAdditiveBasisFor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ℕ ⟶ set ℕ ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">        </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,T] ∀ ∈ T . [t] ∃ ∈ A . [a1] ∃ ∈ A . [a2] a1 + a2 ≐ t </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">isRestrictedAdditiveBasisFor</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ℕ ⟶ set ℕ ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">       </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,T] (isAdditiveBasisFor A T) ∧ (∀ ∈ A . [x:ℕ] ∀ ∈ T . [y:ℕ] (2 ⋅ x) ≤ y) ∧</span>
<span class=" -MMT_ObjectExpression">          ∃ [b] T ≐ natInterval 0 b </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?LeastMost </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">isSymmetricAdditiveBasis</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ℕ ⟶ set ℕ ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">        </span><span class="cm">// = [A,T] (isAdditiveBasisFor A T) ∧ ∀ ∈ A . [a] ((greatest ([x:ℕ] x ∈ A) ([x:ℕ,y:ℕ] x ≤ y) - a) ∈ A) ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/numbertheory</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">NatIntervals</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞arith:?NaturalArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞sets:?TypedSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">natInterval</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">ℕ ⟶ ℕ ⟶ set ℕ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] ⟪ fullset ℕ | ([x] a ≤ x ∧ x ≤ b ) ⟫ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">UpDownSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?POSet </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">upset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : poset} (set (P.universe)) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,F] ∀[x] ∀[y] x ∈ F ∧ (P.ord) x y ⇒ y ∈ F </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">upset</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">downset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : poset} (set (P.universe)) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,F] ∀[x] ∀[y] x ∈ F ∧ (P.ord) y x ⇒ y ∈ F </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">downset</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w">  </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">filter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?POSet </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?UpDownSet </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relations </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeastMost </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?DirectedSet</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_isFilter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : poset} (set (P.universe)) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,F] upset F ∧ (P.prop_directedSubset) F </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isFilter</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_isProperFilter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : poset}  (set (P.universe)) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,F] isFilter F ∧ ¬ F ≐ fullset (P.universe) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">prop_isUltrafilter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{P : poset} (set (P.universe)) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[P,F] isGreatest F ([x] isFilter x) ([x,y] subset (P.universe) x y) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w">  </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sig</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Sigma</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">FiniteSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?ProductTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>

<span class="w">	</span><span class="vc">finiteSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[t] Σ  x : (set t) . ⊦ x finite </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">finSet</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">setToFiniteSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type , s : set A} ⊦ s finite ⟶ finSet A </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,p] ⟨ s , p ⟩</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">theorem_emptySetIsFinite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} ⊦ (∅ : set A) finite</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">theorem_setConsFinite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, s : set A , a : A} ⊦ s finite ⟶ ⊦ (s &lt;- a) finite</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">theorem_setConsFiniteSplit</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, s : set A , a : A } ⊦ (s &lt;- a) finite ⟶ ⊦ s finite </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">setSpFin</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// error , wenn keine notation dann fehle rin setsum -&gt; bla ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Functions</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relations </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">function_composition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type, C : type} (A ⟶ B) ⟶ (B ⟶ C)  ⟶ (A ⟶ C) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C][f,g] [x] g (f x) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="ss">°</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">image</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (A ⟶ B) ⟶ set A ⟶ set B  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">im</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">function_restriction</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type, C : type}{prf : (C &lt;* A)} (A ⟶ B) ⟶ (C ⟶ B) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">function_restriction</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">preimage</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} (A ⟶ B) ⟶ set B ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">preim</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">identityFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A ⟶ A) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x] x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">Id</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">constantFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type} B ⟶ A ⟶ B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,c,x] c </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Injective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">	</span><span class="vc">injective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B : type, f: A ⟶ B} prop  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f] ∀[x:A] ∀[y : A]  f x ≐ f y ⇒ x ≐ y </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">#</span><span class="w"> </span><span class="ss">is_injective</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">		</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	           </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Surjective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">surjective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B : type, f: A ⟶ B} prop  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f]   ∀[y : B] ∃[x: A]  f x ≐ y </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">#</span><span class="w"> </span><span class="ss">is_surjective</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Bijective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Surjective</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Injective</span><span class=" -MMT_DD">❙</span><span class="w">  </span>

<span class="w">	</span><span class="vc">bijective</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type, B: type, f : A ⟶ B} prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[A, B, f] is_injective f ∧ is_surjective f</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">		</span><span class="p">#</span><span class="w"> </span><span class="ss">is_bijective</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">          </span>
<span class="w">	</span><span class="vc">bijections</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B : type} type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, B] (A ⟶ B) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">bijections</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">inverseBijections</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type, B : type} bijections A B ⟶ bijections B A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">bijinv</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">InverseFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">inverse</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type,B: type, f: A ⟶ B} B ⟶ A  </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,f,y]  ι [x] f x ≐ y </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">    </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">^-</span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Permutation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Bijective </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">permutation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type, f: A ⟶ A} prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,f] is_bijective f </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">     </span><span class="p">#</span><span class="w"> </span><span class="ss">is_permutation</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ar</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PrOSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relations </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?NaturalDeduction </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">proset_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetStructures/setstruct_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">ord</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≼</span><span class="w"> </span><span class="si">2</span><span class="w">  </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">axiom_reflexive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ reflexive ord </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">axiom_transitive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ transitive ord </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">lemma_preOrder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ preOrder ord </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">and_introduction axiom_reflexive axiom_transitive </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">strictord</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] ord a b ∧ ¬ a ≐ b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="ss">≺</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">strict_lemma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ strictPreOrder strictord </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by construction&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span>
<span class="w">     </span><span class="vc">prop_upperBound</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set U ⟶ U ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,b] ∀[s] S s ⇒ (s ≼ b) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">prop_lowerBound</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set U ⟶ U ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,b] ∀[s] S s ⇒ (b ≼ s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">prop_directed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">∀[a] ∀[b] ∃[c] a ≼ c ∧ b ≼ c </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">prop_directedSubset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(U ⟶ bool) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[F] ∀[a] ∀[b] F a ∧ F b ⇒ ∃[c] F c ∧ a ≼ c ∧ b ≼ c </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">proset</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?PrOSet/proset_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w">  </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LeastMost</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relations </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">    </span><span class="vc">prop_isLeast</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} A ⟶ (A ⟶ bool) ⟶ (A ⟶ A ⟶ bool) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,P,R] P x ∧ ∀[y] P y ⇒ R x y </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isLeast</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">    </span><span class="vc">least</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A ⟶ bool) ⟶ (A ⟶ A ⟶ bool) ⟶ A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,R] ι [x] isLeast x P R </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">least</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w">   </span>
<span class="w">    </span><span class="vc">prop_isGreatest</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} A ⟶ (A ⟶ bool) ⟶ (A ⟶ A ⟶ bool) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,x,P,R] isLeast x P (converse R) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">isGreatest</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">    </span><span class="vc">greatest</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A ⟶ bool) ⟶ (A ⟶ A ⟶ bool) ⟶ A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,R] ι [x] isGreatest x P R </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">greatest</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="cm">// least/greatest assume that there is a unique least element. Instead minimal/maximal return a set of minimal elements (a singleton</span>
<span class="cm">    // if there is a unique one). ❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">minimal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A ⟶ bool) ⟶ (A ⟶ A ⟶ bool) ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,R] ι [s] ∀[x] x ∈ s ⇒ isLeast x P R </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">minimal</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">maximal</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} (A ⟶ bool) ⟶ (A ⟶ A ⟶ bool) ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P,R] ι [s] ∀[x] x ∈ s ⇒ isGreatest x P R </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">maximal</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DirectedSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">algebra?OperationProps </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeastMost </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PrOSet </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">directedSet_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PrOSet/proset_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span><span class="vc">lub</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] least (prop_upperBound S) ord </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span><span class="vc">glb</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] greatest (prop_lowerBound S) ord </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span><span class="vc">meet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] lub [x] x ≐ a ∧ x ≐ b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span><span class="vc">join</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">U ⟶ U ⟶ U </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[a,b] glb [x] x ≐ a ∨ x ≐ b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">      </span><span class="vc">axiom_directed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_directed </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span><span class="vc">meetIdenpotent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_idempotent meet </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">sketch &quot;by idempotence of conjunction&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span><span class="vc">meetAssociative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_associative meet </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by associativity of conjunction&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span><span class="vc">meetCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_commutative meet </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by commutativity of conjunction&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span><span class="vc">joinIdempotent</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_idempotent join </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">sketch &quot;by idempotence of disjunction&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span><span class="vc">joinAssociative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_associative join </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by associativity of disjunction&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span><span class="vc">joinCommutative</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_commutative join </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by commutativity of disjunction&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span><span class="vc">directedSet</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?DirectedSet/directedSet_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Fixpoints</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">isFixpoint</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type, f:A ⟶ A, a:A} prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,f,a] f a  ≐  a </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">fixpoints</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} (A ⟶ A) ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,f] ι [s] ∀[x] x ∈ s ⇒ isFixpoint A f x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">POSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PrOSet </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="kd">theory</span><span class="w"> </span><span class="nc">poset_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">     </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PrOSet/proset_theory </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">axiom_antisymmetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ antisymmetric ord </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">lemma_partialOrder</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ partialOrder ord </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">and_introduction lemma_preOrder axiom_antisymmetric</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">     </span><span class="vc">strict_lemma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ strictPartialOrder strictord </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">sketch &quot;by construction&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="vc">poset</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?POSet/poset_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SupremumReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?LeastMost </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ar:?ExtendedReals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">	</span><span class="vc">supremumReal</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set ℝ ⟶ ℝ</span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[s] least ([a] ∀[x] x ∈ s ⇒ x ≤ a)  ([a,b] a ≤ b)   </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">supR</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">/T MiKo: a first-order approximation of a view from POSet to PowerSet</span>
<span class="cm">   eventually, we want to push filter and co out over this to get the </span>
<span class="cm">   usual applications of filters ❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">ASet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerSet </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?BasicLemmata </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">A</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowersetPOSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?POSet </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="kd">view</span><span class="w"> </span><span class="nc">PowersetIsPOSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?POSet/poset_theory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?ASet</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    	</span><span class="vc">universe</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">set A </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    	</span><span class="vc">ord</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S,T] subset A S T </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    	</span><span class="vc">axiom_reflexive</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lemma_subsetReflexive </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    	</span><span class="vc">axiom_transitive</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lemma_subsetTransitive </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    	</span><span class="vc">axiom_antisymmetric</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">lemma_subsetAntisymmetric </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Relations</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞arith:?NaturalArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?ProductTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">relation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B] A ⟶ B ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">relation</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">relOn</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] A ⟶ A ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">relOn</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">converse</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} relation A B ⟶ relation B A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B][R] [y,x] R x y</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">converse</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">relation_composition</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B,C} relation A B ⟶ relation B C  ⟶ relation A C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B,C][R,S] [x,y] ∃[w] R x w ∧ S w y </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="ss">^</span><span class="w"> </span><span class="si">5</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">range</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} relation A B ⟶ set B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">range</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// restriction: {A,B} relation A B ⟶ {C} relation C B  ❘ # 3 | 4 ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_reflexive</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] ∀[x] R x x</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">reflexive</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_irreflexive</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] ∀ [x] ¬ R x x</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">irreflexive</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_symmetric</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] ∀[x]∀[y] R x y ⇒ R y x</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">symmetric</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_antisymmetric</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] ∀[x]∀[y] R x y ∧ R y x ⇒ x ≐ y</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">antisymmetric</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_asymmetric</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] ∀[x]∀[y] R x y ⇒ ¬ R y x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asymmetric</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_total</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] ∀[x]∀[y] x ≠ y ⇒ (R x y ∨ R y x)</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">total</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_transitive</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] ∀[x]∀[y]∀[z] R x y ∧ R y z ⇒ R x z</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">transitive</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_equivalent</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (symmetric R) ∧ (transitive R) ∧ (reflexive R) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">equivalent</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_preorder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (reflexive R) ∧ (transitive R) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">preorder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// MiKo: I could not find any evidence for this name on the web</span>
<span class="cm">	prop_permutation: {A} relOn A⟶ bool ❘ = [A][R] (symmetric R) ∧ (transitive R) ❘ # permutation 2 ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_commutes</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,f,g] ∀ [x:A] ∀ [y:A] f x y ⇒ (∀ [z:A] g z y ⇒ ∃ [w:A] g w x ∧ f z w)  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">commute</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_preOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (reflexive R) ∧ (transitive R) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">preOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_strictPreOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (irreflexive R) ∧ (transitive R) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">strictPreOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_partialOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (preOrder R) ∧ (antisymmetric R) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">partialOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_strictPartialOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (irreflexive R) ∧ (transitive R) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">strictPartialOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_order</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (partialOrder R) ∧ (total R) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">order</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">prop_strictOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (strictPartialOrder R) ∧ (total R) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">strictOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_linearOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (partialOrder R) ∧ ∀ [a] ∀ [b] R a b ∨ R b a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">linearOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_wellfounded</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (partialOrder R) ∧ ∀ [B: set A] ∃ [b] b ∈ B ∧ ∀ [c] (R b c)  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">wellfounded</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">prop_wellOrder</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][R] (linearOrder R) ∧ (wellfounded R)  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">wellOrder</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// sameRelation: {A,B} relation A B ⟶ relation A B ⟶ bool ❘ = [A,B,f,g] (inclusion f g) ∧ (inclusion f g) ❘ # sameRelation 3 4 ❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">  	</span><span class="vc">subrelation</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} relation A B ⟶ relation A B ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,B][R,S] ∀ [x]∀[y] (R x y) ⇒ (S x y) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">sub</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RelationClosure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Relations </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetRelations </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="cm">/T maybe factor out minimal-such-that? ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">closure</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ (relOn A⟶ bool) ⟶ relOn A</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">  	</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,R,P] ι [S] R sub S ∧ P S ∧ ∀[T] (R sub T ∧ P T) ⇒ (S ≐ T) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">closure</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span><span class="vc">symmetricClosure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ relOn A</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,R] closure R [x] symmetric x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">symmetric_closure</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">reflexiveClosure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶relOn A</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[A,R] closure R [x] reflexive x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">transitiveClosure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶relOn A</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w">  </span><span class=" -MMT_ObjectExpression">[A,R] closure R [x] transitive x </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">reflexiveTransitiveClosure</span><span class="w">  </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} relOn A⟶ relOn A</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,R] closure R [r] reflexive r ∧ transitive r </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">1</span><span class="ss">^*</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">closureLemma</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ∀[P : relOn A⟶ bool] ∀[R : relOn A] P (closure R P) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="cm">// theory QuotientSpace : base:?Logic = </span>
<span class="cm">  include ?Relations ❙</span>
<span class="cm">  include ?PowerSet ❙</span>
<span class="cm">  include collections?Properties ❙</span>
<span class="cm"> </span>
<span class="cm">  // temporary workaround; use https://github.com/UniFormal/MMT/issues/358 later. ❙</span>
<span class="cm">  equivRel : type ❘ = {A} relOn A ❙</span>
<span class="cm">  equivalenceClass : {A} equivRel A ⟶ A ⟶ set A ❘ </span>
<span class="cm">    = [A,R,a] ⟪ (fullset A) | ([x] R a x) ⟫ ❘</span>
<span class="cm">    # 3 _^ 2 ❙</span>
<span class="cm">  quotient : {A} set A ⟶ equivRel A ⟶ set (set A) ❘</span>
<span class="cm">    = [A,S,R] ⟪ (℘ (fullset A)) | ([T] ∀[x] x ∈ T ⇒ ∃[y] y ∈ S ∧ R x y) ⟫ ❘</span>
<span class="cm">    # 3 / 2 ❙</span>
<span class="cm">  projection : {A} equivRel ⟶ A ⟶ set A ❘</span>
<span class="cm">     = [A,R] [a] a _^ R ❘</span>
<span class="cm">    # π_2 ❙</span>
<span class="cm">  lemma_cover : {A} ⊦ ∀[R] ∀[S] S / R covers S ❙</span>
<span class="cm">  lemma_disjiont : {A} ⊦ ∀[R] ∀[S] ∀[X] ∀[Y] X ∈ S / R ∧ Y ∈ S ⇒ disjoint X Y ❙</span>
<span class="cm">  lemma_nonEmpty : {A} ⊦ ∀[R] ∀[S] ∀[X] X ∈ S / R ⇒ nonEmpty X ❙</span>
<span class="cm">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="cm">// Views to parametric theories are currently impossible; semantics is unclear ❙</span>
<span class="cm">// view PartitionQuotientspace : ?Partition -&gt; ?Quotientspace  (R) =</span>
<span class="cm">  coll = quottientspace R ❙</span>
<span class="cm">  axiom_covers =  lemma_cover ❙</span>
<span class="cm">  axiom_nonEmpty =  lemma_nonEmtpy ❙</span>
<span class="cm">  axiom_pairwisedisjoint = lemma_disjoint ❙</span>
<span class="cm">❚</span><span class="w"></span>
<span class="w">   </span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w">  </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sig</span><span class="w"> </span><span class="l l-URI">http://gl.mathhub.info/MMT/LFX/Sigma</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ar</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetSum</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ar:?RealArithmetics </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?FiniteSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span>
<span class="w">	</span><span class="vc">setSum</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type  , s : set ℝ} ⊦ s finite ⟶ (A ⟶ ℝ) ⟶ ℝ </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">setSum</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">setSum_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type , f : A ⟶ ℝ} ⊦ setSum ∅ theorem_emptySetIsFinite f ≐ (0 : ℝ) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">setSum_cons</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type , s : set ℝ ,  a : ℝ, p : ⊦ (s &lt;- a) finite , f : A ⟶ ℝ} </span>
<span class=" -MMT_ObjectExpression">	⊦ setSum (s &lt;- a) p f ≐ a + setSum s (theorem_setConsFiniteSplit ℝ s a p) f </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">arith</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/arithmetics</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TypedSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?Lists </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?Subtyping </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">/T the type operator of sets along with its constructors ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">set</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] A ⟶ prop </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">setCons</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A ⟶ set A ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] [a,P] [x] P x ∨ x ≐ a</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">&lt;-</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">setList</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} List A ⟶  set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">≪</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">≫</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">inSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} A ⟶ set A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][a,P] P a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">∈</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">bsetst</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ (A ⟶ prop) ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A][P,Q] [x] P x ∧ Q x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⟪</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">⟫</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">fullset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] [x] true </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">fullset</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">setAsType</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type, P: set A} type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,P] ⟨ x : A | ⊦ P x ⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">asType</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="cm">// TODO, need a lot of congruence rules that make sure that setcons ACI ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetQuantifiers</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?NatLiterals </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">forall_sets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type } set A ⟶ (A ⟶ prop) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,P] ∀[x:A] x ∈ S ⇒ P x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∀</span><span class="w"> </span><span class="ss">∈</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-101</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists_sets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type } set A ⟶ (A ⟶ prop) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,P] ∃[x:A] x ∈ S ∧ P x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∃</span><span class="w"> </span><span class="ss">∈</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-101</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">exists_n_sets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A:type} ℕ ⟶ set A ⟶ (A ⟶ prop) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∃=</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">∈</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">.</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">-102</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">EmptySet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">emptySet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] [x] false</span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">∅</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s] s ≐ ∅  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">empty</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">nonEmpty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">         </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s] s ≠ ∅  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">         </span>
<span class="w">  </span><span class="vc">inhabited</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">inhabited</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">axiom_inhabited</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ∀[S:set A] inhabited S ⇔ (∃ [x] (x ∈ S)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">axiom_emptySet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ¬ (∃ [x:A] (x ∈ ∅)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Singleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EmptySet </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">single</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a] ∅ &lt;- a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">single</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">singleton</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s] ∃[x] s ≐ single x </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">singleton</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="w">  </span><span class="cm">// consider merge this with singleton ❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Tuples</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EmptySet </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">double</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A ⟶ A ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a,b] ∅ &lt;- a &lt;- b </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">double</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span><span class="vc">triple</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} A ⟶ A ⟶ A ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a,b,c] ∅ &lt;- a &lt;- b &lt;- c </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">triple</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">axiom_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,a : set A, b : set A} ⊦ ∃! [x: set A] ∀[y : A] y ∈ x ⇔ (y ∈ a ∨ y ∈ b) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">axiom_union</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ set A ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">∪</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a,b] </span>
<span class=" -MMT_ObjectExpression">   		that (set A) ([x: set A] ∀[y : A] y ∈ x ⇔ (y ∈ a ∨ y ∈ b)) (axiom_union A a b) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   		</span>
<span class="w">   </span><span class="vc">munionCollection</span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">{A,B} set A ⟶ (A ⟶ set B) ⟶ set B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⋃</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">unionCollection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set (set A) ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, s] ⋃ s ([e] e) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">UNION</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Intersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">intersection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ set A ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">∩</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,a,b] ⟪ a | ([x] x ∈ b) ⟫ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">mintersectCollection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A,B} set A ⟶ (A ⟶ set B) ⟶ set B </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">⋂</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">intersectCollection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set (set A) ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, s] ⋂ s ([e] e) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">INTERSECT</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SetRelations</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Intersection </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?EmptySet </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">subset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ set A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] ∀[x] x ∈ S ⇒ x ∈ T </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⊑</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">properSubset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ set A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] (S ⊑ T) ∧ ¬ S ≐ T </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⊂</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">superset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ set A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] ∀[x] x ∈ T ⇒ x ∈ S </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⊒</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">properSuperset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ set A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] (S ⊒ T) ∧ ¬ S ≐ T </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">⊃</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">disjoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ set A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[O,A,B] A ∩ B ≐ ∅ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">disjoint</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">sameSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ set A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S,T] (S ⊑ T) ∧ (T ⊑ S)  </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">same_set</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">PowerSet</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">powerset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ set (set A) </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">℘</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// TODO ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetDifference</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Singleton </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Union </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">setdiff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ set A ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[O,A,B] ⟪ A | ([x] ¬ x ∈ B) ⟫ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">\</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">symdiff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ set A ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[O,A,B] (A \ B) ∪ (B \ A) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">symdiff</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">complement</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[O,A] (fullset O \ A) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">compl</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// take out an element from a set ❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">subtract</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ A ⟶ set A </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[O,A,a] A \ (single a) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">-</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">BasicLemmata</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetDifference </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetRelations </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="vc">lemma_extensionality</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ∀[a:set A] ∀[b:set A] same_set a b ⇔ a ≐ b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_universeMember</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ∀ [a : A] (a ∈ (fullset A)) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_subsetTransitive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ∀ [s : set A] ∀ [t : set A] ∀ [u : set A] (subset A s t ∧ subset A t u) ⇒ subset A s u </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_subsetReflexive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ∀ [s : set A] subset A s s </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_subsetAntisymmetric</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ∀ [s : set A] ∀ [t : set A] (subset A s t ∧ subset A t s) ⇒ s ≐ t </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_emptyset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ∀ [s : set A] subset A ∅ s </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_emptySetSubset</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ∀ [s : set A] ( subset A s ∅) ⇒ s ≐ ∅ </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_properSubsetTransitive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ∀ [s : set A] ∀ [t : set A] ∀ [u : set A] (s ⊂ t ∧ t ⊂ u) ⇒ s ⊂ u </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_properSubsetIrreflexive</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ ∀ [s : set A] ¬ (s ⊂ s) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">FiniteCardinality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">arithmetics?NaturalNumbers </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">finite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">finite</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">cardinality</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A, a : set A}⊦ a finite ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="p">#</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">|</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">infinite</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] ¬ S finite </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">infinite</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">SetStructures</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>

<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">setstruct_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">U</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span><span class="vc">setstruct</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">Mod ☞?SetStructures/setstruct_theory </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	 </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">dom</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">setstruct ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] (S.universe) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">doms</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{S : setstruct}set (dom S) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S] fullset (dom S) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">IndicatorFunction</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?TypedSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞arith:?NaturalNumbers </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?DescriptionOperator </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">indicatorFunction</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} set A ⟶ A ⟶ ℕ </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,s,a] if (a ∈ s) then (1 : ℕ) else 0 </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">AllSets</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?FiniteCardinality </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?PowerSet </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Union </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetDifference </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetStructures </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetRelations </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">typeof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ type </span><span class=" -MMT_OD">❘</span><span class="cm">// = [A,s] ⟨ x : A | ⊦ x ∈ s⟩ </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">setastype</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">elemof</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A}{s : set A, e : A} ⊦ e ∈ s ⟶ setastype s </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">elem</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">%I4</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w"> </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">SetCollection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?AllSets </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">   </span><span class="vc">collection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] set (set G)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">                                      </span>
<span class="w">   </span><span class="kd">theory</span><span class="w"> </span><span class="nc">setColl_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">   	  </span><span class="vc">coll</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">collection X </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   	  </span><span class="vc">colltype</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">setastype coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span><span class="vc">setColl</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type] Mod ☞?SetCollection/setColl_theory (X) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">emptySetInType</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T, S : setColl T, emptyincoll : ⊦ ∅ ∈ (S.coll) } S.colltype </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">∅t</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">fullSetInType</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{T, S : setColl T, fullincoll : ⊦ (fullset T) ∈ (S.coll) } S.colltype </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">fullt</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="si">%I2</span><span class="w"> </span><span class="si">%I3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TaggedSetCollection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?SetCollection </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?ProductTypes </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">taggedCollection</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] set (G × set G) </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/topology</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sets</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">neighborhoodSystem</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">sets:?filter </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">    </span><span class="vc">universe</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">X</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">nhsys</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">X ⟶ powerset (set X) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">N</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_filter</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀ [x] isFilter (N x)</span><span class=" -MMT_DD">❙</span><span class="w"> </span><span class="cm">// maybe better use a predicate subtype for N? ❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_nhsys1</span><span class="w"> </span><span class="p">:</span><span class="w">  </span><span class=" -MMT_ObjectExpression">⊦ ∀ [x] ∀ [U] U ∈ (N x) ⇒ x ∈ U </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">axiom_nhsys2</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ ∀ [x] ∀ [U] U ∈ (N x) ⇒ ∃ [V] (N x) ∧ ∀ [y] y ∈ V ⇒ U ∈ (N y) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">    </span><span class="vc">isOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">(set X) ⟶ bool </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[S]  ∀ [x] x ∈ S ⇒ ∃ [U] U ∈ (N x) ∧ U ⊑ S</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="cm">// view topologyFromNHsystem: ?topology_theory -&gt; ?neighborhoodSystem =</span>
<span class="cm">//   universe := universe ❙</span>
<span class="cm">//   topology := isOpen ❙</span>
<span class="cm">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/topology</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">calc</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/calculus</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">RealTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞calc:?RealMetricSpace</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞calc:?MetricSpaceAsTopology </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>

<span class="w">	</span><span class="vc">realTopology</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">metricAsTopology realmetricspace </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">topology ℝ</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">realTopologicalSpace</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[&#39; universe := ℝ , topology := realTopology  &#39;] </span><span class=" -MMT_OD">❘</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">topologicalSpace </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/topology</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">base</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/Foundation</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">ts</span><span class="w"> </span><span class="l l-URI">http://mathhub.info/MitM/core/typedsets</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">OpenSetTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">	</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">collections?Properties </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">prop_isTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type} collection G ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">	  </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,C] prop_emptyInColl C ∧ prop_fullInColl C ∧ prop_unionInColl C ∧ prop_finiteIntersection C </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">	  </span><span class="p">#</span><span class="w"> </span><span class="ss">isTopology</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="kd">theory</span><span class="w"> </span><span class="nc">topology_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">		</span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetCollection/setColl_theory (X) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_emptyInColl coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_full</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_fullInColl coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_unionInColl coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">		</span><span class="vc">axiom_intersection</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ prop_finiteIntersection coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">topology</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type] Mod ☞?OpenSetTopology/topology_theory (X)</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">topologicalSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{&#39;</span>
<span class=" -MMT_ObjectExpression">		universe : type ,</span>
<span class=" -MMT_ObjectExpression">		topology : topology universe</span>
<span class=" -MMT_ObjectExpression">	&#39;}</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="vc">topologyOf</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G: topologicalSpace} collection (G.universe) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] (G.topology).coll </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">topologyOf</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">	</span><span class="vc">isOpen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} set (G.universe) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] S ∈ (topologyOf G) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">open</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">isClosed</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} set (G.universe) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] ((doms G)\ S) ∈ (topologyOf G) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">closed</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">isClopen</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} set (G.universe) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] closed S ∧ open S </span><span class=" -MMT_DD">❙</span><span class="w"> </span>
<span class="w">	</span>
<span class=" -MMT_MD">❚</span><span class="w"></span>


<span class="kd">theory</span><span class="w"> </span><span class="nc">coarsefineTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">coarserTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} collection A ⟶ collection A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,T1,T2] T1 ⊑ T2 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">finerTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} collection A ⟶ collection A ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,T1,T2] T2 ⊑ T1 </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"> </span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">TrivialTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span>
<span class="w">  </span><span class="vc">trivialTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} collection A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [A] setList (set A) ((emptySet A) , ((fullset A) , nil A)) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">trivialTopology</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_empty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ prop_emptyInColl (trivialTopology A) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] sketch &quot;by construction&quot; </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">lemma_empty</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_full</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ prop_fullInColl (trivialTopology A) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] sketch &quot;by construction&quot; </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">lemma_full</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_union</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ prop_unionInColl (trivialTopology A) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] sketch &quot;by construction&quot; </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">lemma_union</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">lemma_intersection</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} ⊦ prop_finiteIntersection (trivialTopology A) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A] sketch &quot;by construction&quot; </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">lemma_intersection</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">  </span><span class="vc">indiscreteSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A : type} topologicalSpace </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// = [A] [&#39; </span>
<span class="cm">      universe := A , </span>
<span class="cm">      topology := trivialTopology A,</span>
<span class="cm">      axiom_empty := lemma_empty A,</span>
<span class="cm">      axiom_full := lemma_full A,</span>
<span class="cm">      (axiom_union) := lemma_union A,</span>
<span class="cm">      axiom_intersection := lemma_intersection A</span>
<span class="cm">      &#39;] </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// ^ &quot;x.topology&quot; still needs to be the record</span>
<span class="cm">  	containing the collection and all the proofs. The topological space only contains the universe and the topology (which is a record itself). ❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">DiscreteSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞base:?InformalProofs </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">discreteTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A} set A ⟶ collection A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A,S] ℘ S </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w"> 	</span><span class="cm">// lemma_empty : {A : type } ⊦ ∀[S : set A] prop_emptyInColl (discreteTopology S) ❘ = sketch &quot;by construction&quot; ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// lemma_full : ⊦ ∀[S] prop_fullInColl (discreteTopology S) ❘ sketch &quot;by construction&quot; ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// lemma_union : ⊦ ∀[S] prop_unionInColl (discreteTopology S) ❘ sketch &quot;by construction&quot; ❙</span><span class="w"></span>
<span class="w">	</span><span class="cm">// lemma_intersection: ⊦ ∀[S] prop_finiteIntersection (discreteTopology S) sketch &quot;by construction&quot; ❙</span><span class="w"></span>
<span class="w">		</span>
<span class="w">    </span><span class="cm">// discreteSpace : {A} set A ⟶ topologicalSpace A ❘ = [A,S] [&#39;</span>
<span class="cm">	universe := A, </span>
<span class="cm">	topology := ℘ S </span>
<span class="cm">	axiom_empty := lemma_empty A,</span>
<span class="cm">	axiom_full := lemma_full A,</span>
<span class="cm">        axiom_union := lemma_union A,</span>
<span class="cm">        axiom_intersection := lemma_intersection A</span>
<span class="cm">  	&#39;] ❙</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">ClosureInterior</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">closure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} set (G.universe) ⟶ set (G.universe) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] ⋃ ⟪ topologyOf G | ([T] closed T ∧ S ⊑ T) ⟫ ([T] T) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">closure</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">interior</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} set (G.universe) ⟶ set (G.universe)</span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] ⋂ ⟪ topologyOf G | ([T] open T ∧ T ⊑ S) ⟫ ([T] T) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">interior</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">boundary</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} set (G.universe) ⟶ set (G.universe) </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,S] closure S \ interior S </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">boundary</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w">                                                             </span>
<span class="w">   </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">Neighborhood</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">neighborhood</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} (G.universe) ⟶ set (G.universe) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,a,S] S ∈ topologyOf G ∧ a ∈ S </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">neighborhood</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">2</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">LimitPoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Neighborhood </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">limitPoint</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} (G.universe) ⟶ set (G.universe) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">    </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G][a,S] S ⊑ doms G ∧ a ∈ S ∧ ∀[N : set (dom G)] neighborhood N a ⇒ ∃[b] b ∈ N ∧ ¬ a ≐ b </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Continuity</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?Neighborhood </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">☞ts:?Functions </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// continuous_def : the preimage of an open set is open ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">continuous</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : topologicalSpace, Y : topologicalSpace} ((dom X) ⟶ (dom Y)) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,Y,f] ∀[O] O ∈ topologyOf X ⇒ (im f O) ∈ topologyOf Y </span>
<span class=" -MMT_ObjectExpression">     </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">continuous</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">continuousAt</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X : topologicalSpace, Y : topologicalSpace} ((dom X) ⟶ (dom Y)) ⟶ (dom X) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X,Y,f,x] ∀[V] neighborhood V (f x) ⇒ neighborhood (preim f V) x</span>
<span class=" -MMT_ObjectExpression">     </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">continuousAt</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="si">4</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Compactness</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="cm">// compact_def: every open cover C of dom G has a finite subcover D of dom G ❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">compact</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : topologicalSpace} prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G] ∀[C] C covers (fullset (G.universe)) ⇒ ∃[D] D subcover C on (fullset (G.universe)) </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">compact</span><span class="w"> </span><span class="si">1</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">TopologyBase</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">  </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class="vc">base</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{X: topologicalSpace}collection (X.universe) ⟶prop </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,B] ∀[O] O ∈ topologyOf G ⇒ ∃[C] C ⊑ B ∧ O ≐ UNION C </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">basefor</span><span class="w"> </span><span class="si">1</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">  </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">HausdorffTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">=</span><span class="w"> </span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">typedsets?SetRelations </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class="vc">hausdorffProperty</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{G : type}(collection G) ⟶ prop </span><span class=" -MMT_OD">❘</span><span class="w"></span>
<span class="w">     </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[G,T] ∀[p] ∀ [q] p ∈ (fullset G) ∧ q ∈ (fullset G) ∧ p ≠ q ⇒ </span>
<span class=" -MMT_ObjectExpression">       ∃[P]∃[Q]P ∈ T ∧ Q ∈ T ∧ p ∈ P ∧ q ∈ Q ∧ disjoint P Q </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="k">role</span><span class="w"> </span><span class=" -MMT_ObjectExpression">abbreviation </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">       </span>
<span class="w">   </span><span class="kd">theory</span><span class="w"> </span><span class="nc">hausdorff_theory</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">base:?Logic</span><span class="w"> </span><span class="p">&gt;</span><span class="nv"> X : type ❘ </span><span class="p">=</span><span class="w"></span>
<span class="w">   	 </span><span class="kn">include</span><span class="w"> </span><span class="l l-URI">?OpenSetTopology/topology_theory (X) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   	 </span><span class="vc">ishausdorff</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">⊦ hausdorffProperty X coll </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">   </span><span class="vc">hausdorffTopology</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[X : type] Mod ☞?HausdorffTopology/hausdorff_theory (X) </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">   </span>
<span class="w">   </span><span class="vc">hausdorffSpace</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">kind </span><span class=" -MMT_OD">❘</span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{&#39;</span>
<span class=" -MMT_ObjectExpression">		universe : type ,</span>
<span class=" -MMT_ObjectExpression">		topology : hausdorffTopology universe</span>
<span class=" -MMT_ObjectExpression">	&#39;} </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kd">theory</span><span class="w"> </span><span class="nc">EmptyTheory</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kd">theory</span><span class="w"> </span><span class="nc">EmptyTheoryWithMeta</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?EmptyTheory</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">EmptyView</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?EmptyTheory</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?EmptyTheory</span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">thy</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">emptyStructure</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EmptyTheory</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="w">  </span><span class="kd">structure</span><span class="w"> </span><span class="nc">emptyStructureWithEq</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="nv">?EmptyTheory</span><span class="p">=</span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="cp">fixmeta</span><span class="w"> </span><span class="l l-URI">blub</span><span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://github.com/ComFreek/mmtpygments/meta-annotations</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">meta</span><span class="w"> </span><span class="l l-URI">key</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;value&quot; </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kd">meta</span><span class="w"> </span><span class="l l-URI">otherKey</span><span class="w"> </span><span class=" -MMT_ObjectExpression">?uri </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">theory</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">key</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;value&quot; </span><span class=" -MMT_MD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">otherKey</span><span class="w"> </span><span class=" -MMT_ObjectExpression">?uri</span><span class=" -MMT_MD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">c</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">E </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">key</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;value&quot; </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">otherKey</span><span class="w"> </span><span class=" -MMT_ObjectExpression">?uri </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">v</span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?S</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?T</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">key</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;value&quot; </span><span class=" -MMT_MD">❙</span><span class="w"></span>
<span class="w">	</span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">otherKey</span><span class="w"> </span><span class=" -MMT_ObjectExpression">?uri</span><span class=" -MMT_MD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">c</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">d</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">key</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;value&quot; </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">otherKey</span><span class="w"> </span><span class=" -MMT_ObjectExpression">?uri </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
<div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="l l-URI">http://github.com/ComFreek/mmtpygments</span><span class="w"> </span><span class=" -MMT_MD">❚</span><span class="w"></span>
<span class="kd">meta</span><span class="w"> </span><span class="l l-URI">?purpose</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;screenshot for readme&quot; </span><span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">theory</span><span class="w"> </span><span class="nc">Lists</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">list</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">type ⟶ type </span><span class=" -MMT_DD">❙</span><span class="w"></span>

<span class="w">	</span><span class="vc">nil</span><span class="p">:</span><span class="w">    </span><span class=" -MMT_ObjectExpression">{A: type} list A                </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="ss">[]</span><span class="w"> </span><span class="si">%I1</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">150</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">cons</span><span class="p">:</span><span class="w">   </span><span class=" -MMT_ObjectExpression">{A: type} A ⟶ list A ⟶ list A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">::</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">append</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type} A ⟶ list A ⟶ list A </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="ss">;;</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">80</span><span class="w">  </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span>
<span class="w">	</span><span class="vc">concat</span><span class="p">:</span><span class="w"> </span><span class=" -MMT_ObjectExpression">{A: type} list A ⟶ list A ⟶ list A</span>
<span class=" -MMT_ObjectExpression">		</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">?purpose</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;for concatenation&quot;</span>
<span class=" -MMT_ObjectExpression">		</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// comment: choose a better notation?</span>
<span class="cm">		</span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="p">#</span><span class="w"> </span><span class="si">2</span><span class="w"> </span><span class="ss">:::</span><span class="w"> </span><span class="si">3</span><span class="w"> </span><span class="k">prec</span><span class="w"> </span><span class="mi">50</span><span class="w"></span>
<span class="w">	</span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>

<span class="kd">view</span><span class="w"> </span><span class="nc">reverse</span><span class="p">:</span><span class="w"> </span><span class="l l-URI">?Lists</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="l l-URI">?Lists</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
<span class="w">	</span><span class="vc">list</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">list </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">nil</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">nil </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">cons</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, a, l] l ;; a </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="kd">meta</span><span class="w"> </span><span class="l l-URI">?coolness</span><span class="w"> </span><span class=" -MMT_ObjectExpression">&quot;beyond imagination&quot; </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">append</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">[A, a, l] a :: l </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class="w">	</span><span class="vc">concat</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class=" -MMT_ObjectExpression">??? </span><span class=" -MMT_OD">❘</span><span class="w"> </span><span class="cm">// missing </span><span class=" -MMT_DD">❙</span><span class="w"></span>
<span class=" -MMT_MD">❚</span><span class="w"></span>
</pre></div>
</body></html>